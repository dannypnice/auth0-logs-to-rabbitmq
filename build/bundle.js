module.exports=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=84)}([function(e,t){e.exports=require("util")},function(e,t){e.exports=require("auth0-extension-tools@1.3.1")},function(e,t,r){function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,r){return a(e,t,r)}var o=r(18),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=o:(n(o,t),t.Buffer=i),n(a,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=a(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(e,t,r){"use strict";e.exports=r(1).config()},function(e,t,r){"use strict";var n=r(7),i=r(0).format,o=(r(0).inherits,r(30).HEARTBEAT);e.exports.closeMessage=function(e){var t=e.fields.replyCode;return i('%d (%s) with message "%s"',t,n.constant_strs[t],e.fields.replyText)},e.exports.methodName=function(e){return n.info(e).name},e.exports.inspect=function(e,t){if(e===o)return"<Heartbeat>";if(e.id){var r=n.info(e.id);return i("<%s channel:%d%s>",r.name,e.channel,t?" "+JSON.stringify(e.fields,void 0,2):"")}return i("<Content channel:%d size:%d>",e.channel,e.size)}},function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);s.call(this,e),u.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}e.exports=n;var o=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},a=r(11);a.inherits=r(12);var s=r(64),u=r(66);a.inherits(n,s),function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}(o(u.prototype),function(e){n.prototype[e]||(n.prototype[e]=u.prototype[e])})},function(e,t,r){const n=r(78),i=r(32),o=r(71),a=r(77);e.exports.createServer=n.createServer,e.exports.urlHelpers=i,e.exports.middlewares=o,e.exports.routes=a},function(e,t,r){"use strict";function n(e){var t,r,n=0,i={versionMajor:void 0,versionMinor:void 0,serverProperties:void 0,mechanisms:void 0,locales:void 0};return t=e[n],n++,i.versionMajor=t,t=e[n],n++,i.versionMinor=t,r=e.readUInt32BE(n),n+=4,t=St(e.slice(n,n+r)),n+=r,i.serverProperties=t,r=e.readUInt32BE(n),n+=4,t=e.slice(n,n+r),n+=r,i.mechanisms=t,r=e.readUInt32BE(n),n+=4,t=e.slice(n,n+r),n+=r,i.locales=t,i}function i(e,t){var r,n=0,i=null,o=0,a=0;if(void 0===(i=t.serverProperties))throw new Error("Missing value for mandatory field 'serverProperties'");if("object"!=typeof i)throw new TypeError("Field 'serverProperties' is the wrong type; must be an object");r=Ct(Mt,i,a);var s=Mt.slice(a,a+r);if(a+=r,o+=s.length,void 0===(i=t.mechanisms))i=Bt.from("PLAIN");else if(!Bt.isBuffer(i))throw new TypeError("Field 'mechanisms' is the wrong type; must be a Buffer");if(o+=i.length,void 0===(i=t.locales))i=Bt.from("en_US");else if(!Bt.isBuffer(i))throw new TypeError("Field 'locales' is the wrong type; must be a Buffer");o+=i.length;var u=Bt.alloc(22+o);if(u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(655370,7),n=11,void 0===(i=t.versionMajor))i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'versionMajor' is the wrong type; must be a number (but not NaN)");if(u.writeUInt8(i,n),n++,void 0===(i=t.versionMinor))i=9;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'versionMinor' is the wrong type; must be a number (but not NaN)");return u.writeUInt8(i,n),n++,n+=s.copy(u,n),i=t.mechanisms,void 0===i&&(i=Bt.from("PLAIN")),r=i.length,u.writeUInt32BE(r,n),n+=4,i.copy(u,n),n+=r,i=t.locales,void 0===i&&(i=Bt.from("en_US")),r=i.length,u.writeUInt32BE(r,n),n+=4,i.copy(u,n),n+=r,u[n]=206,u.writeUInt32BE(n-7,3),u}function o(e){var t,r,n=0,i={clientProperties:void 0,mechanism:void 0,response:void 0,locale:void 0};return r=e.readUInt32BE(n),n+=4,t=St(e.slice(n,n+r)),n+=r,i.clientProperties=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.mechanism=t,r=e.readUInt32BE(n),n+=4,t=e.slice(n,n+r),n+=r,i.response=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.locale=t,i}function a(e,t){var r,n=0,i=null,o=0,a=0;if(void 0===(i=t.clientProperties))throw new Error("Missing value for mandatory field 'clientProperties'");if("object"!=typeof i)throw new TypeError("Field 'clientProperties' is the wrong type; must be an object");r=Ct(Mt,i,a);var s=Mt.slice(a,a+r);if(a+=r,o+=s.length,void 0===(i=t.mechanism))i="PLAIN";else if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'mechanism' is the wrong type; must be a string (up to 255 chars)");var u=Bt.byteLength(i,"utf8");if(o+=u,void 0===(i=t.response))throw new Error("Missing value for mandatory field 'response'");if(!Bt.isBuffer(i))throw new TypeError("Field 'response' is the wrong type; must be a Buffer");if(o+=i.length,void 0===(i=t.locale))i="en_US";else if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'locale' is the wrong type; must be a string (up to 255 chars)");var c=Bt.byteLength(i,"utf8");o+=c;var l=Bt.alloc(18+o);return l[0]=1,l.writeUInt16BE(e,1),l.writeUInt32BE(655371,7),n=11,n+=s.copy(l,n),i=t.mechanism,void 0===i&&(i="PLAIN"),l[n]=u,n++,l.write(i,n,"utf8"),n+=u,i=t.response,void 0===i&&(i=Bt.from(void 0)),r=i.length,l.writeUInt32BE(r,n),n+=4,i.copy(l,n),n+=r,i=t.locale,void 0===i&&(i="en_US"),l[n]=c,n++,l.write(i,n,"utf8"),n+=c,l[n]=206,l.writeUInt32BE(n-7,3),l}function s(e){var t,r,n=0,i={challenge:void 0};return r=e.readUInt32BE(n),n+=4,t=e.slice(n,n+r),n+=r,i.challenge=t,i}function u(e,t){var r,n=0,i=null,o=0;if(void 0===(i=t.challenge))throw new Error("Missing value for mandatory field 'challenge'");if(!Bt.isBuffer(i))throw new TypeError("Field 'challenge' is the wrong type; must be a Buffer");o+=i.length;var a=Bt.alloc(16+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655380,7),n=11,i=t.challenge,void 0===i&&(i=Bt.from(void 0)),r=i.length,a.writeUInt32BE(r,n),n+=4,i.copy(a,n),n+=r,a[n]=206,a.writeUInt32BE(n-7,3),a}function c(e){var t,r,n=0,i={response:void 0};return r=e.readUInt32BE(n),n+=4,t=e.slice(n,n+r),n+=r,i.response=t,i}function l(e,t){var r,n=0,i=null,o=0;if(void 0===(i=t.response))throw new Error("Missing value for mandatory field 'response'");if(!Bt.isBuffer(i))throw new TypeError("Field 'response' is the wrong type; must be a Buffer");o+=i.length;var a=Bt.alloc(16+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655381,7),n=11,i=t.response,void 0===i&&(i=Bt.from(void 0)),r=i.length,a.writeUInt32BE(r,n),n+=4,i.copy(a,n),n+=r,a[n]=206,a.writeUInt32BE(n-7,3),a}function f(e){var t,r=0,n={channelMax:void 0,frameMax:void 0,heartbeat:void 0};return t=e.readUInt16BE(r),r+=2,n.channelMax=t,t=e.readUInt32BE(r),r+=4,n.frameMax=t,t=e.readUInt16BE(r),r+=2,n.heartbeat=t,n}function d(e,t){var r=0,n=null,i=Bt.alloc(20);if(i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(655390,7),r=11,void 0===(n=t.channelMax))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'channelMax' is the wrong type; must be a number (but not NaN)");if(i.writeUInt16BE(n,r),r+=2,void 0===(n=t.frameMax))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'frameMax' is the wrong type; must be a number (but not NaN)");if(i.writeUInt32BE(n,r),r+=4,void 0===(n=t.heartbeat))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'heartbeat' is the wrong type; must be a number (but not NaN)");return i.writeUInt16BE(n,r),r+=2,i[r]=206,i.writeUInt32BE(r-7,3),i}function h(e){var t,r=0,n={channelMax:void 0,frameMax:void 0,heartbeat:void 0};return t=e.readUInt16BE(r),r+=2,n.channelMax=t,t=e.readUInt32BE(r),r+=4,n.frameMax=t,t=e.readUInt16BE(r),r+=2,n.heartbeat=t,n}function p(e,t){var r=0,n=null,i=Bt.alloc(20);if(i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(655391,7),r=11,void 0===(n=t.channelMax))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'channelMax' is the wrong type; must be a number (but not NaN)");if(i.writeUInt16BE(n,r),r+=2,void 0===(n=t.frameMax))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'frameMax' is the wrong type; must be a number (but not NaN)");if(i.writeUInt32BE(n,r),r+=4,void 0===(n=t.heartbeat))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'heartbeat' is the wrong type; must be a number (but not NaN)");return i.writeUInt16BE(n,r),r+=2,i[r]=206,i.writeUInt32BE(r-7,3),i}function g(e){var t,r,n=0,i={virtualHost:void 0,capabilities:void 0,insist:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.virtualHost=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.capabilities=t,t=!!(1&e[n]),i.insist=t,i}function v(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.virtualHost))n="/";else if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'virtualHost' is the wrong type; must be a string (up to 255 chars)");var a=Bt.byteLength(n,"utf8");if(o+=a,void 0===(n=t.capabilities))n="";else if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'capabilities' is the wrong type; must be a string (up to 255 chars)");var s=Bt.byteLength(n,"utf8");o+=s;var u=Bt.alloc(15+o);return u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(655400,7),r=11,n=t.virtualHost,void 0===n&&(n="/"),u[r]=a,r++,u.write(n,r,"utf8"),r+=a,n=t.capabilities,void 0===n&&(n=""),u[r]=s,r++,u.write(n,r,"utf8"),r+=s,n=t.insist,void 0===n&&(n=!1),n&&(i+=1),u[r]=i,r++,u[r]=206,u.writeUInt32BE(r-7,3),u}function m(e){var t,r,n=0,i={knownHosts:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.knownHosts=t,i}function w(e,t){var r=0,n=null,i=0;if(void 0===(n=t.knownHosts))n="";else if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'knownHosts' is the wrong type; must be a string (up to 255 chars)");var o=Bt.byteLength(n,"utf8");i+=o;var a=Bt.alloc(13+i);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655401,7),r=11,n=t.knownHosts,void 0===n&&(n=""),a[r]=o,r++,a.write(n,r,"utf8"),r+=o,a[r]=206,a.writeUInt32BE(r-7,3),a}function y(e){var t,r,n=0,i={replyCode:void 0,replyText:void 0,classId:void 0,methodId:void 0};return t=e.readUInt16BE(n),n+=2,i.replyCode=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.replyText=t,t=e.readUInt16BE(n),n+=2,i.classId=t,t=e.readUInt16BE(n),n+=2,i.methodId=t,i}function b(e,t){var r=0,n=null,i=0;if(void 0===(n=t.replyText))n="";else if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'replyText' is the wrong type; must be a string (up to 255 chars)");var o=Bt.byteLength(n,"utf8");i+=o;var a=Bt.alloc(19+i);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655410,7),r=11,void 0===(n=t.replyCode))throw new Error("Missing value for mandatory field 'replyCode'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'replyCode' is the wrong type; must be a number (but not NaN)");if(a.writeUInt16BE(n,r),r+=2,n=t.replyText,void 0===n&&(n=""),a[r]=o,r++,a.write(n,r,"utf8"),r+=o,void 0===(n=t.classId))throw new Error("Missing value for mandatory field 'classId'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'classId' is the wrong type; must be a number (but not NaN)");if(a.writeUInt16BE(n,r),r+=2,void 0===(n=t.methodId))throw new Error("Missing value for mandatory field 'methodId'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'methodId' is the wrong type; must be a number (but not NaN)");return a.writeUInt16BE(n,r),r+=2,a[r]=206,a.writeUInt32BE(r-7,3),a}function E(e){return{}}function I(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(655411,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function x(e){var t,r,n=0,i={reason:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.reason=t,i}function k(e,t){var r=0,n=null,i=0;if(void 0===(n=t.reason))n="";else if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'reason' is the wrong type; must be a string (up to 255 chars)");var o=Bt.byteLength(n,"utf8");i+=o;var a=Bt.alloc(13+i);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655420,7),r=11,n=t.reason,void 0===n&&(n=""),a[r]=o,r++,a.write(n,r,"utf8"),r+=o,a[r]=206,a.writeUInt32BE(r-7,3),a}function B(e){return{}}function U(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(655421,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function T(e){var t,r,n=0,i={outOfBand:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.outOfBand=t,i}function C(e,t){var r=0,n=null,i=0;if(void 0===(n=t.outOfBand))n="";else if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'outOfBand' is the wrong type; must be a string (up to 255 chars)");var o=Bt.byteLength(n,"utf8");i+=o;var a=Bt.alloc(13+i);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(1310730,7),r=11,n=t.outOfBand,void 0===n&&(n=""),a[r]=o,r++,a.write(n,r,"utf8"),r+=o,a[r]=206,a.writeUInt32BE(r-7,3),a}function S(e){var t,r,n=0,i={channelId:void 0};return r=e.readUInt32BE(n),n+=4,t=e.slice(n,n+r),n+=r,i.channelId=t,i}function M(e,t){var r,n=0,i=null,o=0;if(void 0===(i=t.channelId))i=Bt.from("");else if(!Bt.isBuffer(i))throw new TypeError("Field 'channelId' is the wrong type; must be a Buffer");o+=i.length;var a=Bt.alloc(16+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(1310731,7),n=11,i=t.channelId,void 0===i&&(i=Bt.from("")),r=i.length,a.writeUInt32BE(r,n),n+=4,i.copy(a,n),n+=r,a[n]=206,a.writeUInt32BE(n-7,3),a}function _(e){var t,r={active:void 0};return t=!!(1&e[0]),r.active=t,r}function A(e,t){var r=0,n=null,i=0,o=Bt.alloc(13);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(1310740,7),r=11,void 0===(n=t.active))throw new Error("Missing value for mandatory field 'active'");return n&&(i+=1),o[r]=i,r++,o[r]=206,o.writeUInt32BE(r-7,3),o}function O(e){var t,r={active:void 0};return t=!!(1&e[0]),r.active=t,r}function L(e,t){var r=0,n=null,i=0,o=Bt.alloc(13);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(1310741,7),r=11,void 0===(n=t.active))throw new Error("Missing value for mandatory field 'active'");return n&&(i+=1),o[r]=i,r++,o[r]=206,o.writeUInt32BE(r-7,3),o}function N(e){var t,r,n=0,i={replyCode:void 0,replyText:void 0,classId:void 0,methodId:void 0};return t=e.readUInt16BE(n),n+=2,i.replyCode=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.replyText=t,t=e.readUInt16BE(n),n+=2,i.classId=t,t=e.readUInt16BE(n),n+=2,i.methodId=t,i}function R(e,t){var r=0,n=null,i=0;if(void 0===(n=t.replyText))n="";else if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'replyText' is the wrong type; must be a string (up to 255 chars)");var o=Bt.byteLength(n,"utf8");i+=o;var a=Bt.alloc(19+i);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(1310760,7),r=11,void 0===(n=t.replyCode))throw new Error("Missing value for mandatory field 'replyCode'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'replyCode' is the wrong type; must be a number (but not NaN)");if(a.writeUInt16BE(n,r),r+=2,n=t.replyText,void 0===n&&(n=""),a[r]=o,r++,a.write(n,r,"utf8"),r+=o,void 0===(n=t.classId))throw new Error("Missing value for mandatory field 'classId'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'classId' is the wrong type; must be a number (but not NaN)");if(a.writeUInt16BE(n,r),r+=2,void 0===(n=t.methodId))throw new Error("Missing value for mandatory field 'methodId'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'methodId' is the wrong type; must be a number (but not NaN)");return a.writeUInt16BE(n,r),r+=2,a[r]=206,a.writeUInt32BE(r-7,3),a}function F(e){return{}}function q(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(1310761,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function j(e){var t,r,n=0,i={realm:void 0,exclusive:void 0,passive:void 0,active:void 0,write:void 0,read:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.realm=t,t=!!(1&e[n]),i.exclusive=t,t=!!(2&e[n]),i.passive=t,t=!!(4&e[n]),i.active=t,t=!!(8&e[n]),i.write=t,t=!!(16&e[n]),i.read=t,i}function D(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.realm))n="/data";else if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'realm' is the wrong type; must be a string (up to 255 chars)");var a=Bt.byteLength(n,"utf8");o+=a;var s=Bt.alloc(14+o);return s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(1966090,7),r=11,n=t.realm,void 0===n&&(n="/data"),s[r]=a,r++,s.write(n,r,"utf8"),r+=a,n=t.exclusive,void 0===n&&(n=!1),n&&(i+=1),n=t.passive,void 0===n&&(n=!0),n&&(i+=2),n=t.active,void 0===n&&(n=!0),n&&(i+=4),n=t.write,void 0===n&&(n=!0),n&&(i+=8),n=t.read,void 0===n&&(n=!0),n&&(i+=16),s[r]=i,r++,s[r]=206,s.writeUInt32BE(r-7,3),s}function P(e){var t,r=0,n={ticket:void 0};return t=e.readUInt16BE(r),r+=2,n.ticket=t,n}function z(e,t){var r=0,n=null,i=Bt.alloc(14);if(i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(1966091,7),r=11,void 0===(n=t.ticket))n=1;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return i.writeUInt16BE(n,r),r+=2,i[r]=206,i.writeUInt32BE(r-7,3),i}function K(e){var t,r,n=0,i={ticket:void 0,exchange:void 0,type:void 0,passive:void 0,durable:void 0,autoDelete:void 0,internal:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.type=t,t=!!(1&e[n]),i.passive=t,t=!!(2&e[n]),i.durable=t,t=!!(4&e[n]),i.autoDelete=t,t=!!(8&e[n]),i.internal=t,t=!!(16&e[n]),i.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=St(e.slice(n,n+r)),n+=r,i.arguments=t,i}function Q(e,t){var r,n=0,i=null,o=0,a=0,s=0;if(void 0===(i=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var u=Bt.byteLength(i,"utf8");if(a+=u,void 0===(i=t.type))i="direct";else if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'type' is the wrong type; must be a string (up to 255 chars)");var c=Bt.byteLength(i,"utf8");if(a+=c,void 0===(i=t.arguments))i={};else if("object"!=typeof i)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Ct(Mt,i,s);var l=Mt.slice(s,s+r);s+=r,a+=l.length;var f=Bt.alloc(17+a);if(f[0]=1,f.writeUInt16BE(e,1),f.writeUInt32BE(2621450,7),n=11,void 0===(i=t.ticket))i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return f.writeUInt16BE(i,n),n+=2,i=t.exchange,void 0===i&&(i=void 0),f[n]=u,n++,f.write(i,n,"utf8"),n+=u,i=t.type,void 0===i&&(i="direct"),f[n]=c,n++,f.write(i,n,"utf8"),n+=c,i=t.passive,void 0===i&&(i=!1),i&&(o+=1),i=t.durable,void 0===i&&(i=!1),i&&(o+=2),i=t.autoDelete,void 0===i&&(i=!1),i&&(o+=4),i=t.internal,void 0===i&&(i=!1),i&&(o+=8),i=t.nowait,void 0===i&&(i=!1),i&&(o+=16),f[n]=o,n++,o=0,n+=l.copy(f,n),f[n]=206,f.writeUInt32BE(n-7,3),f}function H(e){return{}}function J(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(2621451,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function W(e){var t,r,n=0,i={ticket:void 0,exchange:void 0,ifUnused:void 0,nowait:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.exchange=t,t=!!(1&e[n]),i.ifUnused=t,t=!!(2&e[n]),i.nowait=t,i}function G(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var a=Bt.byteLength(n,"utf8");o+=a;var s=Bt.alloc(16+o);if(s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(2621460,7),r=11,void 0===(n=t.ticket))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return s.writeUInt16BE(n,r),r+=2,n=t.exchange,void 0===n&&(n=void 0),s[r]=a,r++,s.write(n,r,"utf8"),r+=a,n=t.ifUnused,void 0===n&&(n=!1),n&&(i+=1),n=t.nowait,void 0===n&&(n=!1),n&&(i+=2),s[r]=i,r++,s[r]=206,s.writeUInt32BE(r-7,3),s}function Y(e){return{}}function V(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(2621461,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function X(e){var t,r,n=0,i={ticket:void 0,destination:void 0,source:void 0,routingKey:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.destination=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.source=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.routingKey=t,t=!!(1&e[n]),i.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=St(e.slice(n,n+r)),n+=r,i.arguments=t,i}function Z(e,t){var r,n=0,i=null,o=0,a=0,s=0;if(void 0===(i=t.destination))throw new Error("Missing value for mandatory field 'destination'");if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'destination' is the wrong type; must be a string (up to 255 chars)");var u=Bt.byteLength(i,"utf8");if(a+=u,void 0===(i=t.source))throw new Error("Missing value for mandatory field 'source'");if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'source' is the wrong type; must be a string (up to 255 chars)");var c=Bt.byteLength(i,"utf8");if(a+=c,void 0===(i=t.routingKey))i="";else if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var l=Bt.byteLength(i,"utf8");if(a+=l,void 0===(i=t.arguments))i={};else if("object"!=typeof i)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Ct(Mt,i,s);var f=Mt.slice(s,s+r);s+=r,a+=f.length;var d=Bt.alloc(18+a);if(d[0]=1,d.writeUInt16BE(e,1),d.writeUInt32BE(2621470,7),n=11,void 0===(i=t.ticket))i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return d.writeUInt16BE(i,n),n+=2,i=t.destination,void 0===i&&(i=void 0),d[n]=u,n++,d.write(i,n,"utf8"),n+=u,i=t.source,void 0===i&&(i=void 0),d[n]=c,n++,d.write(i,n,"utf8"),n+=c,i=t.routingKey,void 0===i&&(i=""),d[n]=l,n++,d.write(i,n,"utf8"),n+=l,i=t.nowait,void 0===i&&(i=!1),i&&(o+=1),d[n]=o,n++,o=0,n+=f.copy(d,n),d[n]=206,d.writeUInt32BE(n-7,3),d}function $(e){return{}}function ee(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(2621471,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function te(e){var t,r,n=0,i={ticket:void 0,destination:void 0,source:void 0,routingKey:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.destination=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.source=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.routingKey=t,t=!!(1&e[n]),i.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=St(e.slice(n,n+r)),n+=r,i.arguments=t,i}function re(e,t){var r,n=0,i=null,o=0,a=0,s=0;if(void 0===(i=t.destination))throw new Error("Missing value for mandatory field 'destination'");if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'destination' is the wrong type; must be a string (up to 255 chars)");var u=Bt.byteLength(i,"utf8");if(a+=u,void 0===(i=t.source))throw new Error("Missing value for mandatory field 'source'");if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'source' is the wrong type; must be a string (up to 255 chars)");var c=Bt.byteLength(i,"utf8");if(a+=c,void 0===(i=t.routingKey))i="";else if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var l=Bt.byteLength(i,"utf8");if(a+=l,void 0===(i=t.arguments))i={};else if("object"!=typeof i)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Ct(Mt,i,s);var f=Mt.slice(s,s+r);s+=r,a+=f.length;var d=Bt.alloc(18+a);if(d[0]=1,d.writeUInt16BE(e,1),d.writeUInt32BE(2621480,7),n=11,void 0===(i=t.ticket))i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return d.writeUInt16BE(i,n),n+=2,i=t.destination,void 0===i&&(i=void 0),d[n]=u,n++,d.write(i,n,"utf8"),n+=u,i=t.source,void 0===i&&(i=void 0),d[n]=c,n++,d.write(i,n,"utf8"),n+=c,i=t.routingKey,void 0===i&&(i=""),d[n]=l,n++,d.write(i,n,"utf8"),n+=l,i=t.nowait,void 0===i&&(i=!1),i&&(o+=1),d[n]=o,n++,o=0,n+=f.copy(d,n),d[n]=206,d.writeUInt32BE(n-7,3),d}function ne(e){return{}}function ie(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(2621491,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function oe(e){var t,r,n=0,i={ticket:void 0,queue:void 0,passive:void 0,durable:void 0,exclusive:void 0,autoDelete:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.queue=t,t=!!(1&e[n]),i.passive=t,t=!!(2&e[n]),i.durable=t,t=!!(4&e[n]),i.exclusive=t,t=!!(8&e[n]),i.autoDelete=t,t=!!(16&e[n]),i.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=St(e.slice(n,n+r)),n+=r,i.arguments=t,i}function ae(e,t){var r,n=0,i=null,o=0,a=0,s=0;if(void 0===(i=t.queue))i="";else if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var u=Bt.byteLength(i,"utf8");if(a+=u,void 0===(i=t.arguments))i={};else if("object"!=typeof i)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Ct(Mt,i,s);var c=Mt.slice(s,s+r);s+=r,a+=c.length;var l=Bt.alloc(16+a);if(l[0]=1,l.writeUInt16BE(e,1),l.writeUInt32BE(3276810,7),n=11,void 0===(i=t.ticket))i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return l.writeUInt16BE(i,n),n+=2,i=t.queue,void 0===i&&(i=""),l[n]=u,n++,l.write(i,n,"utf8"),n+=u,i=t.passive,void 0===i&&(i=!1),i&&(o+=1),i=t.durable,void 0===i&&(i=!1),i&&(o+=2),i=t.exclusive,void 0===i&&(i=!1),i&&(o+=4),i=t.autoDelete,void 0===i&&(i=!1),i&&(o+=8),i=t.nowait,void 0===i&&(i=!1),i&&(o+=16),l[n]=o,n++,o=0,n+=c.copy(l,n),l[n]=206,l.writeUInt32BE(n-7,3),l}function se(e){var t,r,n=0,i={queue:void 0,messageCount:void 0,consumerCount:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.queue=t,t=e.readUInt32BE(n),n+=4,i.messageCount=t,t=e.readUInt32BE(n),n+=4,i.consumerCount=t,i}function ue(e,t){var r=0,n=null,i=0;if(void 0===(n=t.queue))throw new Error("Missing value for mandatory field 'queue'");if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var o=Bt.byteLength(n,"utf8");i+=o;var a=Bt.alloc(21+i);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3276811,7),r=11,n=t.queue,void 0===n&&(n=void 0),a[r]=o,r++,a.write(n,r,"utf8"),r+=o,void 0===(n=t.messageCount))throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");if(a.writeUInt32BE(n,r),r+=4,void 0===(n=t.consumerCount))throw new Error("Missing value for mandatory field 'consumerCount'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'consumerCount' is the wrong type; must be a number (but not NaN)");return a.writeUInt32BE(n,r),r+=4,a[r]=206,a.writeUInt32BE(r-7,3),a}function ce(e){var t,r,n=0,i={ticket:void 0,queue:void 0,exchange:void 0,routingKey:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.queue=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.routingKey=t,t=!!(1&e[n]),i.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=St(e.slice(n,n+r)),n+=r,i.arguments=t,i}function le(e,t){var r,n=0,i=null,o=0,a=0,s=0;if(void 0===(i=t.queue))i="";else if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var u=Bt.byteLength(i,"utf8");if(a+=u,void 0===(i=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var c=Bt.byteLength(i,"utf8");if(a+=c,void 0===(i=t.routingKey))i="";else if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var l=Bt.byteLength(i,"utf8");if(a+=l,void 0===(i=t.arguments))i={};else if("object"!=typeof i)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Ct(Mt,i,s);var f=Mt.slice(s,s+r);s+=r,a+=f.length;var d=Bt.alloc(18+a);if(d[0]=1,d.writeUInt16BE(e,1),d.writeUInt32BE(3276820,7),n=11,void 0===(i=t.ticket))i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return d.writeUInt16BE(i,n),n+=2,i=t.queue,void 0===i&&(i=""),d[n]=u,n++,d.write(i,n,"utf8"),n+=u,i=t.exchange,void 0===i&&(i=void 0),d[n]=c,n++,d.write(i,n,"utf8"),n+=c,i=t.routingKey,void 0===i&&(i=""),d[n]=l,n++,d.write(i,n,"utf8"),n+=l,i=t.nowait,void 0===i&&(i=!1),i&&(o+=1),d[n]=o,n++,o=0,n+=f.copy(d,n),d[n]=206,d.writeUInt32BE(n-7,3),d}function fe(e){return{}}function de(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(3276821,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function he(e){var t,r,n=0,i={ticket:void 0,queue:void 0,nowait:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.queue=t,t=!!(1&e[n]),i.nowait=t,i}function pe(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.queue))n="";else if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var a=Bt.byteLength(n,"utf8");o+=a;var s=Bt.alloc(16+o);if(s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(3276830,7),r=11,void 0===(n=t.ticket))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return s.writeUInt16BE(n,r),r+=2,n=t.queue,void 0===n&&(n=""),s[r]=a,r++,s.write(n,r,"utf8"),r+=a,n=t.nowait,void 0===n&&(n=!1),n&&(i+=1),s[r]=i,r++,s[r]=206,s.writeUInt32BE(r-7,3),s}function ge(e){var t,r=0,n={messageCount:void 0};return t=e.readUInt32BE(r),r+=4,n.messageCount=t,n}function ve(e,t){var r=0,n=null,i=Bt.alloc(16);if(i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(3276831,7),r=11,void 0===(n=t.messageCount))throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");return i.writeUInt32BE(n,r),r+=4,i[r]=206,i.writeUInt32BE(r-7,3),i}function me(e){var t,r,n=0,i={ticket:void 0,queue:void 0,ifUnused:void 0,ifEmpty:void 0,nowait:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.queue=t,t=!!(1&e[n]),i.ifUnused=t,t=!!(2&e[n]),i.ifEmpty=t,t=!!(4&e[n]),i.nowait=t,i}function we(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.queue))n="";else if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var a=Bt.byteLength(n,"utf8");o+=a;var s=Bt.alloc(16+o);if(s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(3276840,7),r=11,void 0===(n=t.ticket))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return s.writeUInt16BE(n,r),r+=2,n=t.queue,void 0===n&&(n=""),s[r]=a,r++,s.write(n,r,"utf8"),r+=a,n=t.ifUnused,void 0===n&&(n=!1),n&&(i+=1),n=t.ifEmpty,void 0===n&&(n=!1),n&&(i+=2),n=t.nowait,void 0===n&&(n=!1),n&&(i+=4),s[r]=i,r++,s[r]=206,s.writeUInt32BE(r-7,3),s}function ye(e){var t,r=0,n={messageCount:void 0};return t=e.readUInt32BE(r),r+=4,n.messageCount=t,n}function be(e,t){var r=0,n=null,i=Bt.alloc(16);if(i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(3276841,7),r=11,void 0===(n=t.messageCount))throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");return i.writeUInt32BE(n,r),r+=4,i[r]=206,i.writeUInt32BE(r-7,3),i}function Ee(e){var t,r,n=0,i={ticket:void 0,queue:void 0,exchange:void 0,routingKey:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.queue=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.routingKey=t,r=e.readUInt32BE(n),n+=4,t=St(e.slice(n,n+r)),n+=r,i.arguments=t,i}function Ie(e,t){var r,n=0,i=null,o=0,a=0;if(void 0===(i=t.queue))i="";else if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var s=Bt.byteLength(i,"utf8");if(o+=s,void 0===(i=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var u=Bt.byteLength(i,"utf8");if(o+=u,void 0===(i=t.routingKey))i="";else if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var c=Bt.byteLength(i,"utf8");if(o+=c,void 0===(i=t.arguments))i={};else if("object"!=typeof i)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Ct(Mt,i,a);var l=Mt.slice(a,a+r);a+=r,o+=l.length;var f=Bt.alloc(17+o);if(f[0]=1,f.writeUInt16BE(e,1),f.writeUInt32BE(3276850,7),n=11,void 0===(i=t.ticket))i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return f.writeUInt16BE(i,n),n+=2,i=t.queue,void 0===i&&(i=""),f[n]=s,n++,f.write(i,n,"utf8"),n+=s,i=t.exchange,void 0===i&&(i=void 0),f[n]=u,n++,f.write(i,n,"utf8"),n+=u,i=t.routingKey,void 0===i&&(i=""),f[n]=c,n++,f.write(i,n,"utf8"),n+=c,n+=l.copy(f,n),f[n]=206,f.writeUInt32BE(n-7,3),f}function xe(e){return{}}function ke(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(3276851,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function Be(e){var t,r=0,n={prefetchSize:void 0,prefetchCount:void 0,global:void 0};return t=e.readUInt32BE(r),r+=4,n.prefetchSize=t,t=e.readUInt16BE(r),r+=2,n.prefetchCount=t,t=!!(1&e[r]),n.global=t,n}function Ue(e,t){var r=0,n=null,i=0,o=Bt.alloc(19);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3932170,7),r=11,void 0===(n=t.prefetchSize))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'prefetchSize' is the wrong type; must be a number (but not NaN)");if(o.writeUInt32BE(n,r),r+=4,void 0===(n=t.prefetchCount))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'prefetchCount' is the wrong type; must be a number (but not NaN)");return o.writeUInt16BE(n,r),r+=2,n=t.global,void 0===n&&(n=!1),n&&(i+=1),o[r]=i,r++,o[r]=206,o.writeUInt32BE(r-7,3),o}function Te(e){return{}}function Ce(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(3932171,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function Se(e){var t,r,n=0,i={ticket:void 0,queue:void 0,consumerTag:void 0,noLocal:void 0,noAck:void 0,exclusive:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.queue=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.consumerTag=t,t=!!(1&e[n]),i.noLocal=t,t=!!(2&e[n]),i.noAck=t,t=!!(4&e[n]),i.exclusive=t,t=!!(8&e[n]),i.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=St(e.slice(n,n+r)),n+=r,i.arguments=t,i}function Me(e,t){var r,n=0,i=null,o=0,a=0,s=0;if(void 0===(i=t.queue))i="";else if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var u=Bt.byteLength(i,"utf8");if(a+=u,void 0===(i=t.consumerTag))i="";else if(!("string"==typeof i&&Bt.byteLength(i)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var c=Bt.byteLength(i,"utf8");if(a+=c,void 0===(i=t.arguments))i={};else if("object"!=typeof i)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Ct(Mt,i,s);var l=Mt.slice(s,s+r);s+=r,a+=l.length;var f=Bt.alloc(17+a);if(f[0]=1,f.writeUInt16BE(e,1),f.writeUInt32BE(3932180,7),n=11,void 0===(i=t.ticket))i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return f.writeUInt16BE(i,n),n+=2,i=t.queue,void 0===i&&(i=""),f[n]=u,n++,f.write(i,n,"utf8"),n+=u,i=t.consumerTag,void 0===i&&(i=""),f[n]=c,n++,f.write(i,n,"utf8"),n+=c,i=t.noLocal,void 0===i&&(i=!1),i&&(o+=1),i=t.noAck,void 0===i&&(i=!1),i&&(o+=2),i=t.exclusive,void 0===i&&(i=!1),i&&(o+=4),i=t.nowait,void 0===i&&(i=!1),i&&(o+=8),f[n]=o,n++,o=0,n+=l.copy(f,n),f[n]=206,f.writeUInt32BE(n-7,3),f}function _e(e){var t,r,n=0,i={consumerTag:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.consumerTag=t,i}function Ae(e,t){var r=0,n=null,i=0;if(void 0===(n=t.consumerTag))throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var o=Bt.byteLength(n,"utf8");i+=o;var a=Bt.alloc(13+i);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932181,7),r=11,n=t.consumerTag,void 0===n&&(n=void 0),a[r]=o,r++,a.write(n,r,"utf8"),r+=o,a[r]=206,a.writeUInt32BE(r-7,3),a}function Oe(e){var t,r,n=0,i={consumerTag:void 0,nowait:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.consumerTag=t,t=!!(1&e[n]),i.nowait=t,i}function Le(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.consumerTag))throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var a=Bt.byteLength(n,"utf8");o+=a;var s=Bt.alloc(14+o);return s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(3932190,7),r=11,n=t.consumerTag,void 0===n&&(n=void 0),s[r]=a,r++,s.write(n,r,"utf8"),r+=a,n=t.nowait,void 0===n&&(n=!1),n&&(i+=1),s[r]=i,r++,s[r]=206,s.writeUInt32BE(r-7,3),s}function Ne(e){var t,r,n=0,i={consumerTag:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.consumerTag=t,i}function Re(e,t){var r=0,n=null,i=0;if(void 0===(n=t.consumerTag))throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var o=Bt.byteLength(n,"utf8");i+=o;var a=Bt.alloc(13+i);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932191,7),r=11,n=t.consumerTag,void 0===n&&(n=void 0),a[r]=o,r++,a.write(n,r,"utf8"),r+=o,a[r]=206,a.writeUInt32BE(r-7,3),a}function Fe(e){var t,r,n=0,i={ticket:void 0,exchange:void 0,routingKey:void 0,mandatory:void 0,immediate:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.routingKey=t,t=!!(1&e[n]),i.mandatory=t,t=!!(2&e[n]),i.immediate=t,i}function qe(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.exchange))n="";else if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var a=Bt.byteLength(n,"utf8");if(o+=a,void 0===(n=t.routingKey))n="";else if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var s=Bt.byteLength(n,"utf8");o+=s;var u=Bt.alloc(17+o);if(u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(3932200,7),r=11,void 0===(n=t.ticket))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return u.writeUInt16BE(n,r),r+=2,n=t.exchange,void 0===n&&(n=""),u[r]=a,r++,u.write(n,r,"utf8"),r+=a,n=t.routingKey,void 0===n&&(n=""),u[r]=s,r++,u.write(n,r,"utf8"),r+=s,n=t.mandatory,void 0===n&&(n=!1),n&&(i+=1),n=t.immediate,void 0===n&&(n=!1),n&&(i+=2),u[r]=i,r++,u[r]=206,u.writeUInt32BE(r-7,3),u}function je(e){var t,r,n=0,i={replyCode:void 0,replyText:void 0,exchange:void 0,routingKey:void 0};return t=e.readUInt16BE(n),n+=2,i.replyCode=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.replyText=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.routingKey=t,i}function De(e,t){var r=0,n=null,i=0;if(void 0===(n=t.replyText))n="";else if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'replyText' is the wrong type; must be a string (up to 255 chars)");var o=Bt.byteLength(n,"utf8");if(i+=o,void 0===(n=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var a=Bt.byteLength(n,"utf8");if(i+=a,void 0===(n=t.routingKey))throw new Error("Missing value for mandatory field 'routingKey'");if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var s=Bt.byteLength(n,"utf8");i+=s;var u=Bt.alloc(17+i);if(u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(3932210,7),r=11,void 0===(n=t.replyCode))throw new Error("Missing value for mandatory field 'replyCode'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'replyCode' is the wrong type; must be a number (but not NaN)");return u.writeUInt16BE(n,r),r+=2,n=t.replyText,void 0===n&&(n=""),u[r]=o,r++,u.write(n,r,"utf8"),r+=o,n=t.exchange,void 0===n&&(n=void 0),u[r]=a,r++,u.write(n,r,"utf8"),r+=a,n=t.routingKey,void 0===n&&(n=void 0),u[r]=s,r++,u.write(n,r,"utf8"),r+=s,u[r]=206,u.writeUInt32BE(r-7,3),u}function Pe(e){var t,r,n=0,i={consumerTag:void 0,deliveryTag:void 0,redelivered:void 0,exchange:void 0,routingKey:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.consumerTag=t,t=Tt.readUInt64BE(e,n),n+=8,i.deliveryTag=t,t=!!(1&e[n]),i.redelivered=t,n++,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.routingKey=t,i}function ze(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.consumerTag))throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var a=Bt.byteLength(n,"utf8");if(o+=a,void 0===(n=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var s=Bt.byteLength(n,"utf8");if(o+=s,void 0===(n=t.routingKey))throw new Error("Missing value for mandatory field 'routingKey'");if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var u=Bt.byteLength(n,"utf8");o+=u;var c=Bt.alloc(24+o);if(c[0]=1,c.writeUInt16BE(e,1),c.writeUInt32BE(3932220,7),r=11,n=t.consumerTag,void 0===n&&(n=void 0),c[r]=a,r++,c.write(n,r,"utf8"),r+=a,void 0===(n=t.deliveryTag))throw new Error("Missing value for mandatory field 'deliveryTag'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return Tt.writeUInt64BE(c,n,r),r+=8,n=t.redelivered,void 0===n&&(n=!1),n&&(i+=1),c[r]=i,r++,i=0,n=t.exchange,void 0===n&&(n=void 0),c[r]=s,r++,c.write(n,r,"utf8"),r+=s,n=t.routingKey,void 0===n&&(n=void 0),c[r]=u,r++,c.write(n,r,"utf8"),r+=u,c[r]=206,c.writeUInt32BE(r-7,3),c}function Ke(e){var t,r,n=0,i={ticket:void 0,queue:void 0,noAck:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.queue=t,t=!!(1&e[n]),i.noAck=t,i}function Qe(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.queue))n="";else if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var a=Bt.byteLength(n,"utf8");o+=a;var s=Bt.alloc(16+o);if(s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(3932230,7),r=11,void 0===(n=t.ticket))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return s.writeUInt16BE(n,r),r+=2,n=t.queue,void 0===n&&(n=""),s[r]=a,r++,s.write(n,r,"utf8"),r+=a,n=t.noAck,void 0===n&&(n=!1),n&&(i+=1),s[r]=i,r++,s[r]=206,s.writeUInt32BE(r-7,3),s}function He(e){var t,r,n=0,i={deliveryTag:void 0,redelivered:void 0,exchange:void 0,routingKey:void 0,messageCount:void 0};return t=Tt.readUInt64BE(e,n),n+=8,i.deliveryTag=t,t=!!(1&e[n]),i.redelivered=t,n++,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.routingKey=t,t=e.readUInt32BE(n),n+=4,i.messageCount=t,i}function Je(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var a=Bt.byteLength(n,"utf8");if(o+=a,void 0===(n=t.routingKey))throw new Error("Missing value for mandatory field 'routingKey'");if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var s=Bt.byteLength(n,"utf8");o+=s;var u=Bt.alloc(27+o);if(u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(3932231,7),r=11,void 0===(n=t.deliveryTag))throw new Error("Missing value for mandatory field 'deliveryTag'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");if(Tt.writeUInt64BE(u,n,r),r+=8,n=t.redelivered,void 0===n&&(n=!1),n&&(i+=1),u[r]=i,r++,i=0,n=t.exchange,void 0===n&&(n=void 0),u[r]=a,r++,u.write(n,r,"utf8"),r+=a,n=t.routingKey,void 0===n&&(n=void 0),u[r]=s,r++,u.write(n,r,"utf8"),r+=s,void 0===(n=t.messageCount))throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");return u.writeUInt32BE(n,r),r+=4,u[r]=206,u.writeUInt32BE(r-7,3),u}function We(e){var t,r,n=0,i={clusterId:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.clusterId=t,i}function Ge(e,t){var r=0,n=null,i=0;if(void 0===(n=t.clusterId))n="";else if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'clusterId' is the wrong type; must be a string (up to 255 chars)");var o=Bt.byteLength(n,"utf8");i+=o;var a=Bt.alloc(13+i);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932232,7),r=11,n=t.clusterId,void 0===n&&(n=""),a[r]=o,r++,a.write(n,r,"utf8"),r+=o,a[r]=206,a.writeUInt32BE(r-7,3),a}function Ye(e){var t,r=0,n={deliveryTag:void 0,multiple:void 0};return t=Tt.readUInt64BE(e,r),r+=8,n.deliveryTag=t,t=!!(1&e[r]),n.multiple=t,n}function Ve(e,t){var r=0,n=null,i=0,o=Bt.alloc(21);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3932240,7),r=11,void 0===(n=t.deliveryTag))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return Tt.writeUInt64BE(o,n,r),r+=8,n=t.multiple,void 0===n&&(n=!1),n&&(i+=1),o[r]=i,r++,o[r]=206,o.writeUInt32BE(r-7,3),o}function Xe(e){var t,r=0,n={deliveryTag:void 0,requeue:void 0};return t=Tt.readUInt64BE(e,r),r+=8,n.deliveryTag=t,t=!!(1&e[r]),n.requeue=t,n}function Ze(e,t){var r=0,n=null,i=0,o=Bt.alloc(21);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3932250,7),r=11,void 0===(n=t.deliveryTag))throw new Error("Missing value for mandatory field 'deliveryTag'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return Tt.writeUInt64BE(o,n,r),r+=8,n=t.requeue,void 0===n&&(n=!0),n&&(i+=1),o[r]=i,r++,o[r]=206,o.writeUInt32BE(r-7,3),o}function $e(e){var t,r={requeue:void 0};return t=!!(1&e[0]),r.requeue=t,r}function et(e,t){var r=0,n=null,i=0,o=Bt.alloc(13);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3932260,7),r=11,n=t.requeue,void 0===n&&(n=!1),n&&(i+=1),o[r]=i,r++,o[r]=206,o.writeUInt32BE(r-7,3),o}function tt(e){var t,r={requeue:void 0};return t=!!(1&e[0]),r.requeue=t,r}function rt(e,t){var r=0,n=null,i=0,o=Bt.alloc(13);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3932270,7),r=11,n=t.requeue,void 0===n&&(n=!1),n&&(i+=1),o[r]=i,r++,o[r]=206,o.writeUInt32BE(r-7,3),o}function nt(e){return{}}function it(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(3932271,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function ot(e){var t,r=0,n={deliveryTag:void 0,multiple:void 0,requeue:void 0};return t=Tt.readUInt64BE(e,r),r+=8,n.deliveryTag=t,t=!!(1&e[r]),n.multiple=t,t=!!(2&e[r]),n.requeue=t,n}function at(e,t){var r=0,n=null,i=0,o=Bt.alloc(21);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3932280,7),r=11,void 0===(n=t.deliveryTag))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return Tt.writeUInt64BE(o,n,r),r+=8,n=t.multiple,void 0===n&&(n=!1),n&&(i+=1),n=t.requeue,void 0===n&&(n=!0),n&&(i+=2),o[r]=i,r++,o[r]=206,o.writeUInt32BE(r-7,3),o}function st(e){return{}}function ut(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(5898250,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function ct(e){return{}}function lt(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(5898251,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function ft(e){return{}}function dt(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(5898260,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function ht(e){return{}}function pt(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(5898261,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function gt(e){return{}}function vt(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(5898270,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function mt(e){return{}}function wt(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(5898271,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function yt(e){var t,r={nowait:void 0};return t=!!(1&e[0]),r.nowait=t,r}function bt(e,t){var r=0,n=null,i=0,o=Bt.alloc(13);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(5570570,7),r=11,n=t.nowait,void 0===n&&(n=!1),n&&(i+=1),o[r]=i,r++,o[r]=206,o.writeUInt32BE(r-7,3),o}function Et(e){return{}}function It(e,t){var r=0,n=Bt.alloc(12);return n[0]=1,n.writeUInt16BE(e,1),n.writeUInt32BE(5570571,7),r=11,n[r]=206,n.writeUInt32BE(r-7,3),n}function xt(e,t,r){var n,i,o=0,a=0,s=0,u=0;if(void 0!=(n=r.contentType)){if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'contentType' is the wrong type; must be a string (up to 255 chars)");var c=Bt.byteLength(n,"utf8");u+=1,u+=c}if(void 0!=(n=r.contentEncoding)){if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'contentEncoding' is the wrong type; must be a string (up to 255 chars)");var l=Bt.byteLength(n,"utf8");u+=1,u+=l}if(void 0!=(n=r.headers)){if("object"!=typeof n)throw new TypeError("Field 'headers' is the wrong type; must be an object");i=Ct(Mt,n,s);var f=Mt.slice(s,s+i);s+=i,u+=f.length}if(void 0!=(n=r.deliveryMode)){if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryMode' is the wrong type; must be a number (but not NaN)");u+=1}if(void 0!=(n=r.priority)){if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'priority' is the wrong type; must be a number (but not NaN)");u+=1}if(void 0!=(n=r.correlationId)){if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'correlationId' is the wrong type; must be a string (up to 255 chars)");var d=Bt.byteLength(n,"utf8");u+=1,u+=d}if(void 0!=(n=r.replyTo)){if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'replyTo' is the wrong type; must be a string (up to 255 chars)");var h=Bt.byteLength(n,"utf8");u+=1,u+=h}if(void 0!=(n=r.expiration)){if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'expiration' is the wrong type; must be a string (up to 255 chars)");var p=Bt.byteLength(n,"utf8");u+=1,u+=p}if(void 0!=(n=r.messageId)){if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'messageId' is the wrong type; must be a string (up to 255 chars)");var g=Bt.byteLength(n,"utf8");u+=1,u+=g}if(void 0!=(n=r.timestamp)){if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'timestamp' is the wrong type; must be a number (but not NaN)");u+=8}if(void 0!=(n=r.type)){if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'type' is the wrong type; must be a string (up to 255 chars)");var v=Bt.byteLength(n,"utf8");u+=1,u+=v}if(void 0!=(n=r.userId)){if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'userId' is the wrong type; must be a string (up to 255 chars)");var m=Bt.byteLength(n,"utf8");u+=1,u+=m}if(void 0!=(n=r.appId)){if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'appId' is the wrong type; must be a string (up to 255 chars)");var w=Bt.byteLength(n,"utf8");u+=1,u+=w}if(void 0!=(n=r.clusterId)){if(!("string"==typeof n&&Bt.byteLength(n)<256))throw new TypeError("Field 'clusterId' is the wrong type; must be a string (up to 255 chars)");var y=Bt.byteLength(n,"utf8");u+=1,u+=y}var b=Bt.alloc(22+u);return b[0]=2,b.writeUInt16BE(e,1),b.writeUInt32BE(3932160,7),Tt.writeUInt64BE(b,t,11),a=0,o=21,n=r.contentType,void 0!=n&&(a+=32768,b[o]=c,o++,b.write(n,o,"utf8"),o+=c),n=r.contentEncoding,void 0!=n&&(a+=16384,b[o]=l,o++,b.write(n,o,"utf8"),o+=l),n=r.headers,void 0!=n&&(a+=8192,o+=f.copy(b,o)),n=r.deliveryMode,void 0!=n&&(a+=4096,b.writeUInt8(n,o),o++),n=r.priority,void 0!=n&&(a+=2048,b.writeUInt8(n,o),o++),n=r.correlationId,void 0!=n&&(a+=1024,b[o]=d,o++,b.write(n,o,"utf8"),o+=d),n=r.replyTo,void 0!=n&&(a+=512,b[o]=h,o++,b.write(n,o,"utf8"),o+=h),n=r.expiration,void 0!=n&&(a+=256,b[o]=p,o++,b.write(n,o,"utf8"),o+=p),n=r.messageId,void 0!=n&&(a+=128,b[o]=g,o++,b.write(n,o,"utf8"),o+=g),n=r.timestamp,void 0!=n&&(a+=64,Tt.writeUInt64BE(b,n,o),o+=8),n=r.type,void 0!=n&&(a+=32,b[o]=v,o++,b.write(n,o,"utf8"),o+=v),n=r.userId,void 0!=n&&(a+=16,b[o]=m,o++,b.write(n,o,"utf8"),o+=m),n=r.appId,void 0!=n&&(a+=8,b[o]=w,o++,b.write(n,o,"utf8"),o+=w),n=r.clusterId,void 0!=n&&(a+=4,b[o]=y,o++,b.write(n,o,"utf8"),o+=y),b[o]=206,b.writeUInt32BE(o-7,3),b.writeUInt16BE(a,19),b.slice(0,o+1)}function kt(e){var t,r,n,i=2;if(0===(t=e.readUInt16BE(0)))return{};var o={contentType:void 0,contentEncoding:void 0,headers:void 0,deliveryMode:void 0,priority:void 0,correlationId:void 0,replyTo:void 0,expiration:void 0,messageId:void 0,timestamp:void 0,type:void 0,userId:void 0,appId:void 0,clusterId:void 0};return 32768&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.contentType=r),16384&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.contentEncoding=r),8192&t&&(n=e.readUInt32BE(i),i+=4,r=St(e.slice(i,i+n)),i+=n,o.headers=r),4096&t&&(r=e[i],i++,o.deliveryMode=r),2048&t&&(r=e[i],i++,o.priority=r),1024&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.correlationId=r),512&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.replyTo=r),256&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.expiration=r),128&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.messageId=r),64&t&&(r=Tt.readUInt64BE(e,i),i+=8,o.timestamp=r),32&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.type=r),16&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.userId=r),8&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.appId=r),4&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.clusterId=r),o}var Bt=r(2).Buffer,Ut=r(28),Tt=r(9),Ct=Ut.encodeTable,St=Ut.decodeFields,Mt=Bt.alloc(16384);Object.freeze({});e.exports.constants={FRAME_METHOD:1,FRAME_HEADER:2,FRAME_BODY:3,FRAME_HEARTBEAT:8,FRAME_MIN_SIZE:4096,FRAME_END:206,REPLY_SUCCESS:200,CONTENT_TOO_LARGE:311,NO_ROUTE:312,NO_CONSUMERS:313,ACCESS_REFUSED:403,NOT_FOUND:404,RESOURCE_LOCKED:405,PRECONDITION_FAILED:406,CONNECTION_FORCED:320,INVALID_PATH:402,FRAME_ERROR:501,SYNTAX_ERROR:502,COMMAND_INVALID:503,CHANNEL_ERROR:504,UNEXPECTED_FRAME:505,RESOURCE_ERROR:506,NOT_ALLOWED:530,NOT_IMPLEMENTED:540,INTERNAL_ERROR:541},e.exports.constant_strs={1:"FRAME-METHOD",2:"FRAME-HEADER",3:"FRAME-BODY",8:"FRAME-HEARTBEAT",200:"REPLY-SUCCESS",206:"FRAME-END",311:"CONTENT-TOO-LARGE",312:"NO-ROUTE",313:"NO-CONSUMERS",320:"CONNECTION-FORCED",402:"INVALID-PATH",403:"ACCESS-REFUSED",404:"NOT-FOUND",405:"RESOURCE-LOCKED",406:"PRECONDITION-FAILED",501:"FRAME-ERROR",502:"SYNTAX-ERROR",503:"COMMAND-INVALID",504:"CHANNEL-ERROR",505:"UNEXPECTED-FRAME",506:"RESOURCE-ERROR",530:"NOT-ALLOWED",540:"NOT-IMPLEMENTED",541:"INTERNAL-ERROR",4096:"FRAME-MIN-SIZE"},e.exports.FRAME_OVERHEAD=8,e.exports.decode=function(e,t){switch(e){case 655370:return n(t);case 655371:return o(t);case 655380:return s(t);case 655381:return c(t);case 655390:return f(t);case 655391:return h(t);case 655400:return g(t);case 655401:return m(t);case 655410:return y(t);case 655411:return E(t);case 655420:return x(t);case 655421:return B(t);case 1310730:return T(t);case 1310731:return S(t);case 1310740:return _(t);case 1310741:return O(t);case 1310760:return N(t);case 1310761:return F(t);case 1966090:return j(t);case 1966091:return P(t);case 2621450:return K(t);case 2621451:return H(t);case 2621460:return W(t);case 2621461:return Y(t);case 2621470:return X(t);case 2621471:return $(t);case 2621480:return te(t);case 2621491:return ne(t);case 3276810:return oe(t);case 3276811:return se(t);case 3276820:return ce(t);case 3276821:return fe(t);case 3276830:return he(t);case 3276831:return ge(t);case 3276840:return me(t);case 3276841:return ye(t);case 3276850:return Ee(t);case 3276851:return xe(t);case 3932170:return Be(t);case 3932171:return Te(t);case 3932180:return Se(t);case 3932181:return _e(t);case 3932190:return Oe(t);case 3932191:return Ne(t);case 3932200:return Fe(t);case 3932210:return je(t);case 3932220:return Pe(t);case 3932230:return Ke(t);case 3932231:return He(t);case 3932232:return We(t);case 3932240:return Ye(t);case 3932250:return Xe(t);case 3932260:return $e(t);case 3932270:return tt(t);case 3932271:return nt(t);case 3932280:return ot(t);case 5898250:return st(t);case 5898251:return ct(t);case 5898260:return ft(t);case 5898261:return ht(t);case 5898270:return gt(t);case 5898271:return mt(t);case 5570570:return yt(t);case 5570571:return Et(t);case 60:return kt(t);default:throw new Error("Unknown class/method ID")}},e.exports.encodeMethod=function(e,t,r){switch(e){case 655370:return i(t,r);case 655371:return a(t,r);case 655380:return u(t,r);case 655381:return l(t,r);case 655390:return d(t,r);case 655391:return p(t,r);case 655400:return v(t,r);case 655401:return w(t,r);case 655410:return b(t,r);case 655411:return I(t,r);case 655420:return k(t,r);case 655421:return U(t,r);case 1310730:return C(t,r);case 1310731:return M(t,r);case 1310740:return A(t,r);case 1310741:return L(t,r);case 1310760:return R(t,r);case 1310761:return q(t,r);case 1966090:return D(t,r);case 1966091:return z(t,r);case 2621450:return Q(t,r);case 2621451:return J(t,r);case 2621460:return G(t,r);case 2621461:return V(t,r);case 2621470:return Z(t,r);case 2621471:return ee(t,r);case 2621480:return re(t,r);case 2621491:return ie(t,r);case 3276810:return ae(t,r);case 3276811:return ue(t,r);case 3276820:return le(t,r);case 3276821:return de(t,r);case 3276830:return pe(t,r);case 3276831:return ve(t,r);case 3276840:return we(t,r);case 3276841:return be(t,r);case 3276850:return Ie(t,r);case 3276851:return ke(t,r);case 3932170:return Ue(t,r);case 3932171:return Ce(t,r);case 3932180:return Me(t,r);case 3932181:return Ae(t,r);case 3932190:return Le(t,r);case 3932191:return Re(t,r);case 3932200:return qe(t,r);case 3932210:return De(t,r);case 3932220:return ze(t,r);case 3932230:return Qe(t,r);case 3932231:return Je(t,r);case 3932232:return Ge(t,r);case 3932240:return Ve(t,r);case 3932250:return Ze(t,r);case 3932260:return et(t,r);case 3932270:return rt(t,r);case 3932271:return it(t,r);case 3932280:return at(t,r);case 5898250:return ut(t,r);case 5898251:return lt(t,r);case 5898260:return dt(t,r);case 5898261:return pt(t,r);case 5898270:return vt(t,r);case 5898271:return wt(t,r);case 5570570:return bt(t,r);case 5570571:return It(t,r);default:throw new Error("Unknown class/method ID")}},e.exports.encodeProperties=function(e,t,r,n){switch(e){case 60:return xt(t,r,n);default:throw new Error("Unknown class/properties ID")}},e.exports.info=function(e){switch(e){case 655370:return _t;case 655371:return At;case 655380:return Ot;case 655381:return Lt;case 655390:return Nt;case 655391:return Rt;case 655400:return Ft;case 655401:return qt;case 655410:return jt;case 655411:return Dt;case 655420:return Pt;case 655421:return zt;case 1310730:return Kt;case 1310731:return Qt;case 1310740:return Ht;case 1310741:return Jt;case 1310760:return Wt;case 1310761:return Gt;case 1966090:return Yt;case 1966091:return Vt;case 2621450:return Xt;case 2621451:return Zt;case 2621460:return $t;case 2621461:return er;case 2621470:return tr;case 2621471:return rr;case 2621480:return nr;case 2621491:return ir;case 3276810:return or;case 3276811:return ar;case 3276820:return sr;case 3276821:return ur;case 3276830:return cr;case 3276831:return lr;case 3276840:return fr;case 3276841:return dr;case 3276850:return hr;case 3276851:return pr;case 3932170:return gr;case 3932171:return vr;case 3932180:return mr;case 3932181:return wr;case 3932190:return yr;case 3932191:return br;case 3932200:return Er;case 3932210:return Ir;case 3932220:return xr;case 3932230:return kr;case 3932231:return Br;case 3932232:return Ur;case 3932240:return Tr;case 3932250:return Cr;case 3932260:return Sr;case 3932270:return Mr;case 3932271:return _r;case 3932280:return Ar;case 5898250:return Or;case 5898251:return Lr;case 5898260:return Nr;case 5898261:return Rr;case 5898270:return Fr;case 5898271:return qr;case 5570570:return jr;case 5570571:return Dr;case 60:return Pr;default:throw new Error("Unknown class/method ID")}},e.exports.ConnectionStart=655370;var _t=e.exports.methodInfoConnectionStart={id:655370,classId:10,methodId:10,name:"ConnectionStart",args:[{type:"octet",name:"versionMajor",default:0},{type:"octet",name:"versionMinor",default:9},{type:"table",name:"serverProperties"},{type:"longstr",name:"mechanisms",default:"PLAIN"},{type:"longstr",name:"locales",default:"en_US"}]};e.exports.ConnectionStartOk=655371;var At=e.exports.methodInfoConnectionStartOk={id:655371,classId:10,methodId:11,name:"ConnectionStartOk",args:[{type:"table",name:"clientProperties"},{type:"shortstr",name:"mechanism",default:"PLAIN"},{type:"longstr",name:"response"},{type:"shortstr",name:"locale",default:"en_US"}]};e.exports.ConnectionSecure=655380;var Ot=e.exports.methodInfoConnectionSecure={id:655380,classId:10,methodId:20,name:"ConnectionSecure",args:[{type:"longstr",name:"challenge"}]};e.exports.ConnectionSecureOk=655381;var Lt=e.exports.methodInfoConnectionSecureOk={id:655381,classId:10,methodId:21,name:"ConnectionSecureOk",args:[{type:"longstr",name:"response"}]};e.exports.ConnectionTune=655390;var Nt=e.exports.methodInfoConnectionTune={id:655390,classId:10,methodId:30,name:"ConnectionTune",args:[{type:"short",name:"channelMax",default:0},{type:"long",name:"frameMax",default:0},{type:"short",name:"heartbeat",default:0}]};e.exports.ConnectionTuneOk=655391;var Rt=e.exports.methodInfoConnectionTuneOk={id:655391,classId:10,methodId:31,name:"ConnectionTuneOk",args:[{type:"short",name:"channelMax",default:0},{type:"long",name:"frameMax",default:0},{type:"short",name:"heartbeat",default:0}]};e.exports.ConnectionOpen=655400;var Ft=e.exports.methodInfoConnectionOpen={id:655400,classId:10,methodId:40,name:"ConnectionOpen",args:[{type:"shortstr",name:"virtualHost",default:"/"},{type:"shortstr",name:"capabilities",default:""},{type:"bit",name:"insist",default:!1}]};e.exports.ConnectionOpenOk=655401;var qt=e.exports.methodInfoConnectionOpenOk={id:655401,classId:10,methodId:41,name:"ConnectionOpenOk",args:[{type:"shortstr",name:"knownHosts",default:""}]};e.exports.ConnectionClose=655410;var jt=e.exports.methodInfoConnectionClose={id:655410,classId:10,methodId:50,name:"ConnectionClose",args:[{type:"short",name:"replyCode"},{type:"shortstr",name:"replyText",default:""},{type:"short",name:"classId"},{type:"short",name:"methodId"}]};e.exports.ConnectionCloseOk=655411;var Dt=e.exports.methodInfoConnectionCloseOk={id:655411,classId:10,methodId:51,name:"ConnectionCloseOk",args:[]};e.exports.ConnectionBlocked=655420;var Pt=e.exports.methodInfoConnectionBlocked={id:655420,classId:10,methodId:60,name:"ConnectionBlocked",args:[{type:"shortstr",name:"reason",default:""}]};e.exports.ConnectionUnblocked=655421;var zt=e.exports.methodInfoConnectionUnblocked={id:655421,classId:10,methodId:61,name:"ConnectionUnblocked",args:[]};e.exports.ChannelOpen=1310730;var Kt=e.exports.methodInfoChannelOpen={id:1310730,classId:20,methodId:10,name:"ChannelOpen",args:[{type:"shortstr",name:"outOfBand",default:""}]};e.exports.ChannelOpenOk=1310731;var Qt=e.exports.methodInfoChannelOpenOk={id:1310731,classId:20,methodId:11,name:"ChannelOpenOk",args:[{type:"longstr",name:"channelId",default:""}]};e.exports.ChannelFlow=1310740;var Ht=e.exports.methodInfoChannelFlow={id:1310740,classId:20,methodId:20,name:"ChannelFlow",args:[{type:"bit",name:"active"}]};e.exports.ChannelFlowOk=1310741;var Jt=e.exports.methodInfoChannelFlowOk={id:1310741,classId:20,methodId:21,name:"ChannelFlowOk",args:[{type:"bit",name:"active"}]};e.exports.ChannelClose=1310760;var Wt=e.exports.methodInfoChannelClose={id:1310760,classId:20,methodId:40,name:"ChannelClose",args:[{type:"short",name:"replyCode"},{type:"shortstr",name:"replyText",default:""},{type:"short",name:"classId"},{type:"short",name:"methodId"}]};e.exports.ChannelCloseOk=1310761;var Gt=e.exports.methodInfoChannelCloseOk={id:1310761,classId:20,methodId:41,name:"ChannelCloseOk",args:[]};e.exports.AccessRequest=1966090;var Yt=e.exports.methodInfoAccessRequest={id:1966090,classId:30,methodId:10,name:"AccessRequest",args:[{type:"shortstr",name:"realm",default:"/data"},{type:"bit",name:"exclusive",default:!1},{type:"bit",name:"passive",default:!0},{type:"bit",name:"active",default:!0},{type:"bit",name:"write",default:!0},{type:"bit",name:"read",default:!0}]};e.exports.AccessRequestOk=1966091;var Vt=e.exports.methodInfoAccessRequestOk={id:1966091,classId:30,methodId:11,name:"AccessRequestOk",args:[{type:"short",name:"ticket",default:1}]};e.exports.ExchangeDeclare=2621450;var Xt=e.exports.methodInfoExchangeDeclare={id:2621450,classId:40,methodId:10,name:"ExchangeDeclare",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"type",default:"direct"},{type:"bit",name:"passive",default:!1},{type:"bit",name:"durable",default:!1},{type:"bit",name:"autoDelete",default:!1},{type:"bit",name:"internal",default:!1},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};e.exports.ExchangeDeclareOk=2621451;var Zt=e.exports.methodInfoExchangeDeclareOk={id:2621451,classId:40,methodId:11,name:"ExchangeDeclareOk",args:[]};e.exports.ExchangeDelete=2621460;var $t=e.exports.methodInfoExchangeDelete={id:2621460,classId:40,methodId:20,name:"ExchangeDelete",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"exchange"},{type:"bit",name:"ifUnused",default:!1},{type:"bit",name:"nowait",default:!1}]};e.exports.ExchangeDeleteOk=2621461;var er=e.exports.methodInfoExchangeDeleteOk={id:2621461,classId:40,methodId:21,name:"ExchangeDeleteOk",args:[]};e.exports.ExchangeBind=2621470;var tr=e.exports.methodInfoExchangeBind={id:2621470,classId:40,methodId:30,name:"ExchangeBind",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"destination"},{type:"shortstr",name:"source"},{type:"shortstr",name:"routingKey",default:""},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};e.exports.ExchangeBindOk=2621471;var rr=e.exports.methodInfoExchangeBindOk={id:2621471,classId:40,methodId:31,name:"ExchangeBindOk",args:[]};e.exports.ExchangeUnbind=2621480;var nr=e.exports.methodInfoExchangeUnbind={id:2621480,classId:40,methodId:40,name:"ExchangeUnbind",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"destination"},{type:"shortstr",name:"source"},{type:"shortstr",name:"routingKey",default:""},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};e.exports.ExchangeUnbindOk=2621491;var ir=e.exports.methodInfoExchangeUnbindOk={id:2621491,classId:40,methodId:51,name:"ExchangeUnbindOk",args:[]};e.exports.QueueDeclare=3276810;var or=e.exports.methodInfoQueueDeclare={id:3276810,classId:50,methodId:10,name:"QueueDeclare",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"bit",name:"passive",default:!1},{type:"bit",name:"durable",default:!1},{type:"bit",name:"exclusive",default:!1},{type:"bit",name:"autoDelete",default:!1},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};e.exports.QueueDeclareOk=3276811;var ar=e.exports.methodInfoQueueDeclareOk={id:3276811,classId:50,methodId:11,name:"QueueDeclareOk",args:[{type:"shortstr",name:"queue"},{type:"long",name:"messageCount"},{type:"long",name:"consumerCount"}]};e.exports.QueueBind=3276820;var sr=e.exports.methodInfoQueueBind={id:3276820,classId:50,methodId:20,name:"QueueBind",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey",default:""},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};e.exports.QueueBindOk=3276821;var ur=e.exports.methodInfoQueueBindOk={id:3276821,classId:50,methodId:21,name:"QueueBindOk",args:[]};e.exports.QueuePurge=3276830;var cr=e.exports.methodInfoQueuePurge={id:3276830,classId:50,methodId:30,name:"QueuePurge",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"bit",name:"nowait",default:!1}]};e.exports.QueuePurgeOk=3276831;var lr=e.exports.methodInfoQueuePurgeOk={id:3276831,classId:50,methodId:31,name:"QueuePurgeOk",args:[{type:"long",name:"messageCount"}]};e.exports.QueueDelete=3276840;var fr=e.exports.methodInfoQueueDelete={id:3276840,classId:50,methodId:40,name:"QueueDelete",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"bit",name:"ifUnused",default:!1},{type:"bit",name:"ifEmpty",default:!1},{type:"bit",name:"nowait",default:!1}]};e.exports.QueueDeleteOk=3276841;var dr=e.exports.methodInfoQueueDeleteOk={id:3276841,classId:50,methodId:41,name:"QueueDeleteOk",args:[{type:"long",name:"messageCount"}]};e.exports.QueueUnbind=3276850;var hr=e.exports.methodInfoQueueUnbind={id:3276850,classId:50,methodId:50,name:"QueueUnbind",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey",default:""},{type:"table",name:"arguments",default:{}}]};e.exports.QueueUnbindOk=3276851;var pr=e.exports.methodInfoQueueUnbindOk={id:3276851,classId:50,methodId:51,name:"QueueUnbindOk",args:[]};e.exports.BasicQos=3932170;var gr=e.exports.methodInfoBasicQos={id:3932170,classId:60,methodId:10,name:"BasicQos",args:[{type:"long",name:"prefetchSize",default:0},{type:"short",name:"prefetchCount",default:0},{type:"bit",name:"global",default:!1}]};e.exports.BasicQosOk=3932171;var vr=e.exports.methodInfoBasicQosOk={id:3932171,classId:60,methodId:11,name:"BasicQosOk",args:[]};e.exports.BasicConsume=3932180;var mr=e.exports.methodInfoBasicConsume={id:3932180,classId:60,methodId:20,name:"BasicConsume",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"shortstr",name:"consumerTag",default:""},{type:"bit",name:"noLocal",default:!1},{type:"bit",name:"noAck",default:!1},{type:"bit",name:"exclusive",default:!1},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};e.exports.BasicConsumeOk=3932181;var wr=e.exports.methodInfoBasicConsumeOk={id:3932181,classId:60,methodId:21,name:"BasicConsumeOk",args:[{type:"shortstr",name:"consumerTag"}]};e.exports.BasicCancel=3932190;var yr=e.exports.methodInfoBasicCancel={id:3932190,classId:60,methodId:30,name:"BasicCancel",args:[{type:"shortstr",name:"consumerTag"},{type:"bit",name:"nowait",default:!1}]};e.exports.BasicCancelOk=3932191;var br=e.exports.methodInfoBasicCancelOk={id:3932191,classId:60,methodId:31,name:"BasicCancelOk",args:[{type:"shortstr",name:"consumerTag"}]};e.exports.BasicPublish=3932200;var Er=e.exports.methodInfoBasicPublish={id:3932200,classId:60,methodId:40,name:"BasicPublish",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"exchange",default:""},{type:"shortstr",name:"routingKey",default:""},{type:"bit",name:"mandatory",default:!1},{type:"bit",name:"immediate",default:!1}]};e.exports.BasicReturn=3932210;var Ir=e.exports.methodInfoBasicReturn={id:3932210,classId:60,methodId:50,name:"BasicReturn",args:[{type:"short",name:"replyCode"},{type:"shortstr",name:"replyText",default:""},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey"}]};e.exports.BasicDeliver=3932220;var xr=e.exports.methodInfoBasicDeliver={id:3932220,classId:60,methodId:60,name:"BasicDeliver",args:[{type:"shortstr",name:"consumerTag"},{type:"longlong",name:"deliveryTag"},{type:"bit",name:"redelivered",default:!1},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey"}]};e.exports.BasicGet=3932230;var kr=e.exports.methodInfoBasicGet={id:3932230,classId:60,methodId:70,name:"BasicGet",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"bit",name:"noAck",default:!1}]};e.exports.BasicGetOk=3932231;var Br=e.exports.methodInfoBasicGetOk={id:3932231,classId:60,methodId:71,name:"BasicGetOk",args:[{type:"longlong",name:"deliveryTag"},{type:"bit",name:"redelivered",default:!1},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey"},{type:"long",name:"messageCount"}]};e.exports.BasicGetEmpty=3932232;var Ur=e.exports.methodInfoBasicGetEmpty={id:3932232,classId:60,methodId:72,name:"BasicGetEmpty",args:[{type:"shortstr",name:"clusterId",default:""}]};e.exports.BasicAck=3932240;var Tr=e.exports.methodInfoBasicAck={id:3932240,classId:60,methodId:80,name:"BasicAck",args:[{type:"longlong",name:"deliveryTag",default:0},{type:"bit",name:"multiple",default:!1}]};e.exports.BasicReject=3932250;var Cr=e.exports.methodInfoBasicReject={id:3932250,classId:60,methodId:90,name:"BasicReject",args:[{type:"longlong",name:"deliveryTag"},{type:"bit",name:"requeue",default:!0}]};e.exports.BasicRecoverAsync=3932260;var Sr=e.exports.methodInfoBasicRecoverAsync={id:3932260,classId:60,methodId:100,name:"BasicRecoverAsync",args:[{type:"bit",name:"requeue",default:!1}]};e.exports.BasicRecover=3932270;var Mr=e.exports.methodInfoBasicRecover={id:3932270,classId:60,methodId:110,name:"BasicRecover",args:[{type:"bit",name:"requeue",default:!1}]};e.exports.BasicRecoverOk=3932271;var _r=e.exports.methodInfoBasicRecoverOk={id:3932271,classId:60,methodId:111,name:"BasicRecoverOk",args:[]};e.exports.BasicNack=3932280;var Ar=e.exports.methodInfoBasicNack={id:3932280,classId:60,methodId:120,name:"BasicNack",args:[{type:"longlong",name:"deliveryTag",default:0},{type:"bit",name:"multiple",default:!1},{type:"bit",name:"requeue",default:!0}]};e.exports.TxSelect=5898250;var Or=e.exports.methodInfoTxSelect={id:5898250,classId:90,methodId:10,name:"TxSelect",args:[]};e.exports.TxSelectOk=5898251;var Lr=e.exports.methodInfoTxSelectOk={id:5898251,classId:90,methodId:11,name:"TxSelectOk",args:[]};e.exports.TxCommit=5898260;var Nr=e.exports.methodInfoTxCommit={id:5898260,classId:90,methodId:20,name:"TxCommit",args:[]};e.exports.TxCommitOk=5898261;var Rr=e.exports.methodInfoTxCommitOk={id:5898261,classId:90,methodId:21,name:"TxCommitOk",args:[]};e.exports.TxRollback=5898270;var Fr=e.exports.methodInfoTxRollback={id:5898270,classId:90,methodId:30,name:"TxRollback",args:[]};e.exports.TxRollbackOk=5898271;var qr=e.exports.methodInfoTxRollbackOk={id:5898271,classId:90,methodId:31,name:"TxRollbackOk",args:[]};e.exports.ConfirmSelect=5570570;var jr=e.exports.methodInfoConfirmSelect={id:5570570,classId:85,methodId:10,name:"ConfirmSelect",args:[{type:"bit",name:"nowait",default:!1}]};e.exports.ConfirmSelectOk=5570571;var Dr=e.exports.methodInfoConfirmSelectOk={id:5570571,classId:85,methodId:11,name:"ConfirmSelectOk",args:[]};e.exports.BasicProperties=60;var Pr=e.exports.propertiesInfoBasicProperties={id:60,name:"BasicProperties",args:[{type:"shortstr",name:"contentType"},{type:"shortstr",name:"contentEncoding"},{type:"table",name:"headers"},{type:"octet",name:"deliveryMode"},{type:"octet",name:"priority"},{type:"shortstr",name:"correlationId"},{type:"shortstr",name:"replyTo"},{type:"shortstr",name:"expiration"},{type:"shortstr",name:"messageId"},{type:"timestamp",name:"timestamp"},{type:"shortstr",name:"type"},{type:"shortstr",name:"userId"},{type:"shortstr",name:"appId"},{type:"shortstr",name:"clusterId"}]}},function(e,t,r){function n(e,t){return e&&e.split("\n").slice(t).join("\n")}function i(e,t){var r=new Error;this.message=e,this.stack=this.toString()+"\n"+n(r.stack,2),this.stackAtStateChange=t}function o(e){return"Stack capture: "+e+"\n"+n((new Error).stack,2)}(0,r(0).inherits)(i,Error),i.prototype.name="IllegalOperationError",e.exports.IllegalOperationError=i,e.exports.stackCapture=o},function(e,t,r){"use strict";function n(e){return e<=Y&&e>=-Y}function i(e){if(!n(e))throw new TypeError("number cannot be represented as a contiguous integer")}function o(e,t,r){if("number"!=typeof(e=+e)||e<t||e>r||Math.floor(e)!==e)throw new TypeError('"value" argument is out of bounds');return e}function a(e,t,r){if(t<0||t+r>e.length)throw new RangeError("Index out of range")}function s(e,t){return e.readUInt8(t)<<16|e.readUInt16BE(t+1)}function u(e,t,r){t=o(t,0,16777215),a(e,r,3),e.writeUInt8(t>>>16,r),e.writeUInt16BE(65535&t,r+1)}function c(e,t){return(e.readUInt8(t)||0)*W+e.readUInt32BE(t+1)}function l(e,t,r){t=o(t,0,0xffffffffff),a(e,r,5),e.writeUInt8(Math.floor(t*G),r),e.writeInt32BE(-1&t,r+1)}function f(e,t){return e.readUInt16BE(t)*W+e.readUInt32BE(t+2)}function d(e,t,r){t=o(t,0,0xffffffffffff),a(e,r,6),e.writeUInt16BE(Math.floor(t*G),r),e.writeInt32BE(-1&t,r+2)}function h(e,t){return((e.readUInt8(t)||0)<<16|e.readUInt16BE(t+1))*W+e.readUInt32BE(t+3)}function p(e,t,r){if(t=o(t,0,72057594037927940),a(e,r,7),t<72057594037927940){var n=Math.floor(t*G);e.writeUInt8(n>>>16,r),e.writeUInt16BE(65535&n,r+1),e.writeInt32BE(-1&t,r+3)}else e[r]=255,e[r+1]=255,e[r+2]=255,e[r+3]=255,e[r+4]=255,e[r+5]=255,e[r+6]=255}function g(e,t){return e.readUInt32BE(t)*W+e.readUInt32BE(t+4)}function v(e,t,r){t=o(t,0,0x10000000000000000),a(e,r,8),t<0x10000000000000000?(e.writeUInt32BE(Math.floor(t*G),r),e.writeInt32BE(-1&t,r+4)):(e[r]=255,e[r+1]=255,e[r+2]=255,e[r+3]=255,e[r+4]=255,e[r+5]=255,e[r+6]=255,e[r+7]=255)}function m(e,t){return e.readUInt8(t+2)<<16|e.readUInt16LE(t)}function w(e,t,r){t=o(t,0,16777215),a(e,r,3),e.writeUInt16LE(65535&t,r),e.writeUInt8(t>>>16,r+2)}function y(e,t){return(e.readUInt8(t+4)||0)*W+e.readUInt32LE(t)}function b(e,t,r){t=o(t,0,0xffffffffff),a(e,r,5),e.writeInt32LE(-1&t,r),e.writeUInt8(Math.floor(t*G),r+4)}function E(e,t){return e.readUInt16LE(t+4)*W+e.readUInt32LE(t)}function I(e,t,r){t=o(t,0,0xffffffffffff),a(e,r,6),e.writeInt32LE(-1&t,r),e.writeUInt16LE(Math.floor(t*G),r+4)}function x(e,t){return((e.readUInt8(t+6)||0)<<16|e.readUInt16LE(t+4))*W+e.readUInt32LE(t)}function k(e,t,r){if(t=o(t,0,72057594037927940),a(e,r,7),t<72057594037927940){e.writeInt32LE(-1&t,r);var n=Math.floor(t*G);e.writeUInt16LE(65535&n,r+4),e.writeUInt8(n>>>16,r+6)}else e[r]=255,e[r+1]=255,e[r+2]=255,e[r+3]=255,e[r+4]=255,e[r+5]=255,e[r+6]=255}function B(e,t){return e.readUInt32LE(t+4)*W+e.readUInt32LE(t)}function U(e,t,r){t=o(t,0,0x10000000000000000),a(e,r,8),t<0x10000000000000000?(e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t*G),r+4)):(e[r]=255,e[r+1]=255,e[r+2]=255,e[r+3]=255,e[r+4]=255,e[r+5]=255,e[r+6]=255,e[r+7]=255)}function T(e,t){return(e.readInt8(t)<<16)+e.readUInt16BE(t+1)}function C(e,t,r){t=o(t,-8388608,8388607),a(e,r,3),e.writeInt8(t>>16,r),e.writeUInt16BE(65535&t,r+1)}function S(e,t){return(e.readInt8(t)||0)*W+e.readUInt32BE(t+1)}function M(e,t,r){t=o(t,-549755813888,549755813887),a(e,r,5),e.writeInt8(Math.floor(t*G),r),e.writeInt32BE(-1&t,r+1)}function _(e,t){return e.readInt16BE(t)*W+e.readUInt32BE(t+2)}function A(e,t,r){t=o(t,-0x800000000000,0x7fffffffffff),a(e,r,6),e.writeInt16BE(Math.floor(t*G),r),e.writeInt32BE(-1&t,r+2)}function O(e,t){return(((e.readInt8(t)||0)<<16)+e.readUInt16BE(t+1))*W+e.readUInt32BE(t+3)}function L(e,t,r){if(t=o(t,-0x800000000000000,0x80000000000000),a(e,r,7),t<0x80000000000000){var n=Math.floor(t*G);e.writeInt8(n>>16,r),e.writeUInt16BE(65535&n,r+1),e.writeInt32BE(-1&t,r+3)}else e[r]=127,e[r+1]=255,e[r+2]=255,e[r+3]=255,e[r+4]=255,e[r+5]=255,e[r+6]=255}function N(e,t){return e.readInt32BE(t)*W+e.readUInt32BE(t+4)}function R(e,t,r){t=o(t,-0x800000000000000000,0x8000000000000000),a(e,r,8),t<0x8000000000000000?(e.writeInt32BE(Math.floor(t*G),r),e.writeInt32BE(-1&t,r+4)):(e[r]=127,e[r+1]=255,e[r+2]=255,e[r+3]=255,e[r+4]=255,e[r+5]=255,e[r+6]=255,e[r+7]=255)}function F(e,t){return(e.readInt8(t+2)<<16)+e.readUInt16LE(t)}function q(e,t,r){t=o(t,-8388608,8388607),a(e,r,3),e.writeUInt16LE(65535&t,r),e.writeInt8(t>>16,r+2)}function j(e,t){return(e.readInt8(t+4)||0)*W+e.readUInt32LE(t)}function D(e,t,r){t=o(t,-549755813888,549755813887),a(e,r,5),e.writeInt32LE(-1&t,r),e.writeInt8(Math.floor(t*G),r+4)}function P(e,t){return e.readInt16LE(t+4)*W+e.readUInt32LE(t)}function z(e,t,r){t=o(t,-0x800000000000,0x7fffffffffff),a(e,r,6),e.writeInt32LE(-1&t,r),e.writeInt16LE(Math.floor(t*G),r+4)}function K(e,t){return(((e.readInt8(t+6)||0)<<16)+e.readUInt16LE(t+4))*W+e.readUInt32LE(t)}function Q(e,t,r){if(t=o(t,-0x80000000000000,0x80000000000000),a(e,r,7),t<0x80000000000000){e.writeInt32LE(-1&t,r);var n=Math.floor(t*G);e.writeUInt16LE(65535&n,r+4),e.writeInt8(n>>16,r+6)}else e[r]=255,e[r+1]=255,e[r+2]=255,e[r+3]=255,e[r+4]=255,e[r+5]=255,e[r+6]=127}function H(e,t){return e.readInt32LE(t+4)*W+e.readUInt32LE(t)}function J(e,t,r){t=o(t,-0x8000000000000000,0x8000000000000000),a(e,r,8),t<0x8000000000000000?(e.writeInt32LE(-1&t,r),e.writeInt32LE(Math.floor(t*G),r+4)):(e[r]=255,e[r+1]=255,e[r+2]=255,e[r+3]=255,e[r+4]=255,e[r+5]=255,e[r+6]=255,e[r+7]=127)}var W=4294967296,G=1/W,Y=9007199254740991;e.exports.isContiguousInt=n,e.exports.assertContiguousInt=i,["UInt","Int"].forEach(function(t){var r=t+"8";e.exports["read"+r]=Buffer.prototype["read"+r].call,e.exports["write"+r]=Buffer.prototype["write"+r].call,["16","32"].forEach(function(r){["LE","BE"].forEach(function(n){var i=t+r+n,o=Buffer.prototype["read"+i];e.exports["read"+i]=function(e,t){return o.call(e,t)};var a=Buffer.prototype["write"+i];e.exports["write"+i]=function(e,t,r){return a.call(e,t,r)}})})}),e.exports.readUInt24BE=s,e.exports.writeUInt24BE=u,e.exports.readUInt40BE=c,e.exports.writeUInt40BE=l,e.exports.readUInt48BE=f,e.exports.writeUInt48BE=d,e.exports.readUInt56BE=h,e.exports.writeUInt56BE=p,e.exports.readUInt64BE=g,e.exports.writeUInt64BE=v,e.exports.readUInt24LE=m,e.exports.writeUInt24LE=w,e.exports.readUInt40LE=y,e.exports.writeUInt40LE=b,e.exports.readUInt48LE=E,e.exports.writeUInt48LE=I,e.exports.readUInt56LE=x,e.exports.writeUInt56LE=k,e.exports.readUInt64LE=B,e.exports.writeUInt64LE=U,e.exports.readInt24BE=T,e.exports.writeInt24BE=C,e.exports.readInt40BE=S,e.exports.writeInt40BE=M,e.exports.readInt48BE=_,e.exports.writeInt48BE=A,e.exports.readInt56BE=O,e.exports.writeInt56BE=L,e.exports.readInt64BE=N,e.exports.writeInt64BE=R,e.exports.readInt24LE=F,e.exports.writeInt24LE=q,e.exports.readInt40LE=j,e.exports.writeInt40LE=D,e.exports.readInt48LE=P,e.exports.writeInt48LE=z,e.exports.readInt56LE=K,e.exports.writeInt56LE=Q,e.exports.readInt64LE=H,e.exports.writeInt64LE=J},function(e,t){var r=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=r)},function(e,t){function r(e){return Array.isArray?Array.isArray(e):"[object Array]"===v(e)}function n(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function c(e){return void 0===e}function l(e){return"[object RegExp]"===v(e)}function f(e){return"object"==typeof e&&null!==e}function d(e){return"[object Date]"===v(e)}function h(e){return"[object Error]"===v(e)||e instanceof Error}function p(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function v(e){return Object.prototype.toString.call(e)}t.isArray=r,t.isBoolean=n,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=a,t.isString=s,t.isSymbol=u,t.isUndefined=c,t.isRegExp=l,t.isObject=f,t.isDate=d,t.isError=h,t.isFunction=p,t.isPrimitive=g,t.isBuffer=Buffer.isBuffer},function(e,t,r){try{var n=r(0);if("function"!=typeof n.inherits)throw"";e.exports=n.inherits}catch(t){e.exports=r(119)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.JwksClient=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(19),u=n(s),c=r(154),l=n(c),f=r(40),d=(n(f),r(41)),h=n(d),p=r(43),g=n(p),v=r(127),m=r(129);t.JwksClient=function(){function e(t){var r=this;i(this,e),this.getSigningKey=function(e,t){r.logger("Fetching signing key for '"+e+"'"),r.getSigningKeys(function(n,i){if(n)return t(n);var o=i.find(function(t){return t.kid===e});return o?t(null,o):(r.logger("Unable to find a signing key that matches '"+e+"'"),t(new g.default("Unable to find a signing key that matches '"+e+"'")))})},this.options=o({rateLimit:!1,cache:!1,strictSsl:!0},t),this.logger=(0,u.default)("jwks"),this.options.rateLimit&&(this.getSigningKey=(0,m.rateLimitSigningKey)(this,t)),this.options.cache&&(this.getSigningKey=(0,m.cacheSigningKey)(this,t))}return a(e,[{key:"getKeys",value:function(e){var t=this;this.logger("Fetching keys from '"+this.options.jwksUri+"'"),(0,l.default)({json:!0,uri:this.options.jwksUri,strictSSL:this.options.strictSsl,headers:this.options.requestHeaders},function(r,n){return r||n.statusCode<200||n.statusCode>=300?(t.logger("Failure:",n&&n.body||r),e(n?new h.default(n.body&&(n.body.message||n.body)||n.statusMessage||"Http Error "+n.statusCode):r)):(t.logger("Keys:",n.body.keys),e(null,n.body.keys))})}},{key:"getSigningKeys",value:function(e){var t=this;this.getKeys(function(r,n){if(r)return e(r);if(!n||!n.length)return e(new h.default("The JWKS endpoint did not contain any keys"));var i=n.filter(function(e){return"sig"===e.use&&"RSA"===e.kty&&e.kid&&(e.x5c&&e.x5c.length||e.n&&e.e)}).map(function(e){return e.x5c&&e.x5c.length?{kid:e.kid,nbf:e.nbf,publicKey:(0,v.certToPEM)(e.x5c[0])}:{kid:e.kid,nbf:e.nbf,rsaPublicKey:(0,v.rsaPublicKeyToPEM)(e.n,e.e)}});return i.length?(t.logger("Signing Keys:",i),e(null,i)):e(new h.default("The JWKS endpoint did not contain any signing keys"))})}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SigningKeyNotFoundError=t.JwksRateLimitError=t.JwksError=t.ArgumentError=void 0;var i=r(40),o=n(i),a=r(41),s=n(a),u=r(42),c=n(u),l=r(43),f=n(l);t.ArgumentError=o.default,t.JwksError=s.default,t.JwksRateLimitError=c.default,t.SigningKeyNotFoundError=f.default},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("express@4.12.4")},function(e,t,r){"use strict";var n=r(157);n.emitErrs=!0;var i=new n.Logger({transports:[new n.transports.Console({timestamp:!0,level:"debug",handleExceptions:!0,json:!1,colorize:!0})],exitOnError:!1});e.exports=i,e.exports.stream={write:function(e){i.info(e.replace(/\n$/,""))}}},function(e,t){e.exports=require("buffer")},function(e,t){e.exports=require("debug@2.2.0")},function(e,t){e.exports=require("stream")},function(e,t,r){"use strict";function n(e,t,r,n){for(var i=0,o=r.length;i<o;i++){var a=r[i];switch(a.type){case"string":t+=e.write(a.value,t,"utf8");break;case"binary":t+=s(a,e,t,n);break;case"integer":t+=u(a,e,t,n);break;case"float":t+=l(a,e,t,n)}}return t}function i(e,t){var r=a(e,t),i=h.alloc(r);return n(i,0,e,t),i}function o(e,t){if("string"==typeof e.size)return t[e.size]*e.unit/8;if("string"===e.type)return h.byteLength(e.value,"utf8");if("binary"===e.type&&!0===e.size){return t[e.name].length}return e.size*e.unit/8}function a(e,t){for(var r=0,n=0,i=e.length;n<i;n++)r+=o(e[n],t);return r}function s(e,t,r,n){var i=n[e.name],a=o(e,n);return i.copy(t,r,0,a),a}function u(e,t,r,n){return c(t,e.name?n[e.name]:e.value,r,o(e,n),e.bigendian)}function c(e,t,r,n,i){switch(n){case 1:e.writeUInt8(t,r);break;case 2:i?e.writeUInt16BE(t,r):e.writeUInt16LE(t,r);break;case 4:i?e.writeUInt32BE(t,r):e.writeUInt32LE(t,r);break;case 8:i?d.writeUInt64BE(e,t,r):d.writeUInt64LE(e,t,r);break;default:throw new Error("integer size * unit must be 8, 16, 32 or 64")}return n}function l(e,t,r,n){return f(t,e.name?n[e.name]:e.value,r,o(e,n),e.bigendian)}function f(e,t,r,n,i){if(4===n)i?e.writeFloatBE(t,r):e.writeFloatLE(t,r);else{if(8!==n)throw new Error("float size * unit must be 32 or 64");i?e.writeDoubleBE(t,r):e.writeDoubleLE(t,r)}return n}var d=r(9),h=r(2).Buffer,p=r(22).parse;e.exports.write=n,e.exports.build=i,e.exports.write_int=c,e.exports.write_float=f,e.exports.builder=function(e){e=arguments.length>1?[].join.call(arguments,","):e;var t=p(e);return function(e){return i(t,e)}}},function(e,t,r){"use strict";function n(e){for(var t=o.parse(e),r=0,n=t.length;r<n;r++){var a=t[r];if(void 0!=a.string)t[r]=i.string(a.string);else if(void 0!=a.value)t[r]=i.value(a.value,a.size,a.specifiers);else{if(void 0==a.name)throw"Unknown segment "+a;t[r]=i.variable(a.name,a.size,a.specifiers)}}return t}var i=r(89),o=r(88);e.exports.parse=function(){return n([].join.call(arguments,","))}},function(e,t,r){e.exports=!r(24)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){"use strict";function n(e){g.call(this),this.connection=e,this.reply=null,this.pending=[],this.lwm=1,this.unconfirmed=[],this.on("ack",this.handleConfirm.bind(this,function(e){e&&e(null)})),this.on("nack",this.handleConfirm.bind(this,function(e){e&&e(new Error("message nacked"))})),this.handleMessage=a}function i(e,t){return function(){throw new m(e,t)}}function o(e,t,r){e.sendImmediately=e.sendOrEnqueue=e.sendMessage=i(t,r)}function a(e){var t;if(e.id===c.BasicDeliver)t="delivery";else{if(e.id!==c.BasicReturn)throw v("Expected BasicDeliver or BasicReturn; got %s",f(e));t="return"}var r=this,n=e.fields;return s(function(e){e.fields=n,r.emit(t,e)})}function s(e){function t(t){if(t.id===c.BasicProperties)return s.properties=t.fields,n=i=t.size,0===n?(s.content=y.alloc(0),e(s),a):r;throw"Expected headers frame after delivery"}function r(t){if(t.content){var u=t.content.length;if(0===(i-=u))return null!==o?(o.push(t.content),s.content=y.concat(o)):s.content=t.content,e(s),a;if(i<0)throw v("Too much content sent! Expected %d bytes",n);return null!==o?o.push(t.content):o=[t.content],r}throw"Expected content frame after headers"}var n=0,i=0,o=null,s={fields:null,properties:null,content:null};return t}function u(e){n.call(this,e),this.consumers={}}var c=r(7),l=r(4).closeMessage,f=r(4).inspect,d=r(4).methodName,h=r(46),p=r(0).inherits,g=r(15).EventEmitter,v=r(0).format,m=r(8).IllegalOperationError,w=r(8).stackCapture,y=r(2).Buffer;p(n,g),e.exports.Channel=n,e.exports.acceptMessage=s;var b=n.prototype;b.allocate=function(){return this.ch=this.connection.freshChannel(this),this},b.sendImmediately=function(e,t){return this.connection.sendMethod(this.ch,e,t)},b.sendOrEnqueue=function(e,t,r){this.reply?this.pending.push({method:e,fields:t,reply:r}):(h(0===this.pending.length),this.reply=r,this.sendImmediately(e,t))},b.sendMessage=function(e,t,r){return this.connection.sendMessage(this.ch,c.BasicPublish,e,c.BasicProperties,t,r)},b._rpc=function(e,t,r,n){function i(t,i){if(null===t){if(i.id===r)return n(null,i);var a=d(r),s=new Error(v("Expected %s; got %s",a,f(i,!1)));return o.closeWithError(i.id,v("Expected %s; got %s",a,d(i.id)),c.constants.UNEXPECTED_FRAME,s),n(s)}if(t instanceof Error)return n(t);var u=(t.fields.classId<<16)+t.fields.methodId,s=e===u?v("Operation failed: %s; %s",d(e),l(t)):v("Channel closed by server: %s",l(t)),h=new Error(s);return h.code=t.fields.replyCode,h.classId=t.fields.classId,h.methodId=t.fields.methodId,n(h)}var o=this;this.sendOrEnqueue(e,t,i)},b.toClosed=function(e){this._rejectPending(),o(this,"Channel closed",e),this.accept=i("Channel closed",e),this.connection.releaseChannel(this.ch),this.emit("close")},b.toClosing=function(e,t){var r=this.sendImmediately.bind(this);o(this,"Channel closing",e),this.accept=function(e){if(e.id===c.ChannelCloseOk){t&&t();var n=w("ChannelCloseOk frame received");this.toClosed(n)}else e.id===c.ChannelClose&&r(c.ChannelCloseOk,{})}},b._rejectPending=function(){function e(e){e(new Error("Channel ended, no reply will be forthcoming"))}null!==this.reply&&e(this.reply),this.reply=null;for(var t;t=this.pending.shift();)e(t.reply);this.pending=null},b.closeBecause=function(e,t,r){this.sendImmediately(c.ChannelClose,{replyText:e,replyCode:t,methodId:0,classId:0});var n=w("closeBecause called: "+e);this.toClosing(n,r)},b.closeWithError=function(e,t,r,n){var i=this;this.closeBecause(t,r,function(){n.code=r,e&&(n.classId=c.info(e).classId,n.methodId=c.info(e).methodId),i.emit("error",n)})},b.acceptMessageFrame=function(e){try{this.handleMessage=this.handleMessage(e)}catch(t){"string"==typeof t?this.closeWithError(e.id,t,c.constants.UNEXPECTED_FRAME,new Error(t)):t instanceof Error?this.closeWithError(e.id,"Error while processing message",c.constants.INTERNAL_ERROR,t):this.closeWithError(e.id,"Internal error while processing message",c.constants.INTERNAL_ERROR,new Error(t.toString()))}},b.handleConfirm=function(e,t){var r=t.deliveryTag;if(t.multiple){var n=this.unconfirmed.splice(0,r-this.lwm+1);this.lwm=r+1,n.forEach(e)}else{var i;if(r===this.lwm)for(i=this.unconfirmed.shift(),this.lwm++;null===this.unconfirmed[0];)this.unconfirmed.shift(),this.lwm++;else i=this.unconfirmed[r-this.lwm],this.unconfirmed[r-this.lwm]=null;e(i)}},b.pushConfirmCallback=function(e){this.unconfirmed.push(e||!1)},b.accept=function(e){switch(e.id){case void 0:case c.BasicDeliver:case c.BasicReturn:case c.BasicProperties:return this.acceptMessageFrame(e);case c.BasicAck:return this.emit("ack",e.fields);case c.BasicNack:return this.emit("nack",e.fields);case c.BasicCancel:return this.emit("cancel",e.fields);case c.ChannelClose:if(this.reply){var t=this.reply;this.reply=null,t(e)}var r="Channel closed by server: "+l(e);this.sendImmediately(c.ChannelCloseOk,{});var n=new Error(r);n.code=e.fields.replyCode,n.classId=e.fields.classId,n.methodId=e.fields.methodId,this.emit("error",n);var i=w(r);return void this.toClosed(i);case c.BasicFlow:return this.closeWithError(e.id,"Flow not implemented",c.constants.NOT_IMPLEMENTED,new Error("Flow not implemented"));default:var t=this.reply;if(this.reply=null,this.pending.length>0){var o=this.pending.shift();this.reply=o.reply,this.sendImmediately(o.method,o.fields)}return t(null,e)}},b.onBufferDrain=function(){this.emit("drain")},p(u,n),e.exports.BaseChannel=u,u.prototype.registerConsumer=function(e,t){this.consumers[e]=t},u.prototype.unregisterConsumer=function(e){delete this.consumers[e]},u.prototype.dispatchMessage=function(e,t){var r=e.consumerTag,n=this.consumers[r];if(n)return n(t);throw new Error("Unknown consumer: "+r)},u.prototype.handleDelivery=function(e){return this.dispatchMessage(e.fields,e)},u.prototype.handleCancel=function(e){return this.dispatchMessage(e,null)}},function(e,t,r){"use strict";function n(e){return e>=0x8000000000000000||Math.abs(e)<0x4000000000000&&Math.floor(e)!==e}function i(e,t,r){var n=r;r+=4;for(var i in t)if(void 0!==t[i]){var o=Buffer.byteLength(i);e.writeUInt8(o,r),r++,e.write(i,r,"utf8"),r+=o,r+=a(e,t[i],r)}var s=r-n;return e.writeUInt32BE(s-4,n),s}function o(e,t,r){var n=r;r+=4;for(var i=0,o=t.length;i<o;i++)r+=a(e,t[i],r);var s=r-n;return e.writeUInt32BE(s-4,n),s}function a(e,t,r){function a(t){e.write(t,r),r++}var s=r,c=typeof t,l=t;switch(t&&"object"===c&&t.hasOwnProperty("!")&&(l=t.value,c=t["!"]),"number"==c&&(c=n(l)?"double":l<128&&l>=-128?"byte":l>=-32768&&l<32768?"short":l>=-2147483648&&l<2147483648?"int":"long"),c){case"string":var f=Buffer.byteLength(l,"utf8");a("S"),e.writeUInt32BE(f,r),r+=4,e.write(l,r,"utf8"),r+=f;break;case"object":null===l?a("V"):Array.isArray(l)?(a("A"),r+=o(e,l,r)):Buffer.isBuffer(l)?(a("x"),e.writeUInt32BE(l.length,r),r+=4,l.copy(e,r),r+=l.length):(a("F"),r+=i(e,l,r));break;case"boolean":a("t"),e.writeUInt8(l?1:0,r),r++;break;case"double":case"float64":a("d"),e.writeDoubleBE(l,r),r+=8;break;case"byte":case"int8":a("b"),e.writeInt8(l,r),r++;break;case"short":case"int16":a("s"),e.writeInt16BE(l,r),r+=2;break;case"int":case"int32":a("I"),e.writeInt32BE(l,r),r+=4;break;case"long":case"int64":a("l"),u.writeInt64BE(e,l,r),r+=8;break;case"timestamp":a("T"),u.writeUInt64BE(e,l,r),r+=8;break;case"float":a("f"),e.writeFloatBE(l,r),r+=4;break;case"decimal":if(a("D"),!(l.hasOwnProperty("places")&&l.hasOwnProperty("digits")&&l.places>=0&&l.places<256))throw new TypeError("Decimal value must be {'places': 0..255, 'digits': uint32}, got "+JSON.stringify(l));e[r]=l.places,r++,e.writeUInt32BE(l.digits,r),r+=4;break;default:throw new TypeError("Unknown type to encode: "+c)}return r-s}function s(e){function t(){var t=String.fromCharCode(e[c]);switch(c++,t){case"b":o=e.readInt8(c),c++;break;case"S":n=e.readUInt32BE(c),c+=4,o=e.toString("utf8",c,c+n),c+=n;break;case"I":o=e.readInt32BE(c),c+=4;break;case"D":var i=e[c];c++;var a=e.readUInt32BE(c);c+=4,o={"!":"decimal",value:{places:i,digits:a}};break;case"T":o=u.readUInt64BE(e,c),c+=8,o={"!":"timestamp",value:o};break;case"F":n=e.readUInt32BE(c),c+=4,o=s(e.slice(c,c+n)),c+=n;break;case"A":n=e.readUInt32BE(c),c+=4,r(c+n);break;case"d":o=e.readDoubleBE(c),c+=8;break;case"f":o=e.readFloatBE(c),c+=4;break;case"l":o=u.readInt64BE(e,c),c+=8;break;case"s":o=e.readInt16BE(c),c+=2;break;case"t":o=0!=e[c],c++;break;case"V":o=null;break;case"x":n=e.readUInt32BE(c),c+=4,o=e.slice(c,c+n),c+=n;break;default:throw new TypeError('Unexpected type tag "'+t+'"')}}function r(e){for(var r=[];c<e;)t(),r.push(o);o=r}for(var n,i,o,a={},c=0,l=e.length;c<l;)n=e.readUInt8(c),c++,i=e.toString("utf8",c,c+n),c+=n,t(),a[i]=o;return a}var u=r(9);e.exports.encodeTable=i,e.exports.decodeFields=s},function(e,t,r){var n=r(2).Buffer,i=r(28);e.exports.plain=function(e,t){return{mechanism:"PLAIN",response:function(){return n.from(["",e,t].join(String.fromCharCode(0)))},username:e,password:t}},e.exports.amqplain=function(e,t){return{mechanism:"AMQPLAIN",response:function(){const r=n.alloc(16384),o=i.encodeTable(r,{LOGIN:e,PASSWORD:t},0);return r.slice(4,o)},username:e,password:t}},e.exports.external=function(){return{mechanism:"EXTERNAL",response:function(){return n.from("")}}}},function(e,t,r){"use strict";function n(e,t){var r=g(e);if(r){var n=r.size,i=r.rest;if(n>t)throw new Error("Frame size exceeds frame max");if(i.length>n){if(i[n]!==h)throw new Error("Invalid frame");return{type:r.type,channel:r.channel,size:n,payload:i.slice(0,n),rest:i.slice(n+1)}}}return!1}var i=r(7),o=i.constants,a=i.decode,s=r(2).Buffer,u=r(87);e.exports.PROTOCOL_HEADER="AMQP"+String.fromCharCode(0,0,9,1);var c=o.FRAME_METHOD,l=o.FRAME_HEARTBEAT,f=o.FRAME_HEADER,d=o.FRAME_BODY,h=o.FRAME_END,p=u.builder(d,"channel:16, size:32, payload:size/binary",h);e.exports.makeBodyFrame=function(e,t){return p({channel:e,size:t.length,payload:t})};var g=u.matcher("type:8","channel:16","size:32","rest/binary");e.exports.parseFrame=n;var v=u.matcher("class:16","_weight:16","size:64","flagsAndfields/binary"),m=u.matcher("id:32, args/binary"),w={channel:0};e.exports.decodeFrame=function(e){var t=e.payload;switch(e.type){case c:var r=m(t),n=r.id,i=a(n,r.args);return{id:n,channel:e.channel,fields:i};case f:var o=v(t),n=o.class,i=a(n,o.flagsAndfields);return{id:n,channel:e.channel,size:o.size,fields:i};case d:return{channel:e.channel,content:e.payload};case l:return w;default:throw new Error("Unknown frame type "+e.type)}},e.exports.HEARTBEAT_BUF=s.from([o.FRAME_HEARTBEAT,0,0,0,0,0,0,o.FRAME_END]),e.exports.HEARTBEAT=w},function(e,t,r){function n(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function a(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=r(18).Buffer,u=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(!(n>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,n=t.charCodeAt(i);if(n>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},function(e,t,r){function n(e){if(!e.container)return null;const t=e.container.replace(c,"\\$&"),r=e.jtn?e.jtn.replace(c,"\\$&"):"";if(e.url_format===u)return new RegExp("^/api/run/"+t+"/(?:"+r+"/?)?");if(e.url_format===s)return new RegExp("^/"+t+"/(?:"+r+"/?)?");if(e.url_format===a)return new RegExp("^/(?:"+r+"/?)?");throw new Error("Unsupported webtask URL format.")}function i(e,t){if(!e)return null;const r=e.indexOf("sandbox8")>=0?"8":"";return"https://"+t+"."+(e.split(".it.auth0.com")[0].split("-")[1]||"us")+r+".webtask.io/"}const o=r(51),a=3,s=2,u=1,c=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,l=function(e,t){var r=o.parse(e).pathname||"";return r=r.replace(t,"").replace(/^\/|\/$/g,""),r.startsWith("/")||(r="/"+r),r.endsWith("/")||(r+="/"),r};e.exports.getBasePath=function(e){return l(e.originalUrl||"",e.path)},e.exports.getBaseUrl=function(e,t){var r=t;const n=o.parse(e.originalUrl||"").pathname||"";return o.format({protocol:r||"https",host:e.headers.host,pathname:n.replace(e.path,"").replace(/\/$/g,"")})},e.exports.getWebtaskUrl=function(e){const t=n(e.x_wt),r=e.url,a=e.url.replace(t,"/"),s=o.parse(a||"").pathname,u=e.x_wt&&e.x_wt.ectx&&e.x_wt.ectx.ISOLATED_DOMAIN||!1,c=o.parse(r||"").pathname||"";var l;if(u){l=o.format({protocol:"https",host:e.headers.host,pathname:c.replace(s,"").replace(/\/$/g,"")});const f=".it.auth0.com/api/run/"+e.x_wt.container+"/",d=i(l,e.x_wt.container);l.indexOf(f)>=0&&(l=l.replace("https://"+e.headers.host+"/api/run/"+e.x_wt.container+"/",d))}else l=c;return l}},function(e,t,r){"use strict";var n=r(136);e.exports=function(e,t,r){return function(i,o,a){var s=n(a);return!0===e||"function"==typeof e&&e(i,o,s)?t(i,o,s):r?r(i,o,s):s()}}},function(e,t,r){"use strict";function n(){S=[]}function i(){S.push(b.apply(null,arguments))}function o(){return S.join("\n")}function a(e){return"string"==typeof e.size?b("%s * %d",d(e.size),e.unit):(e.size*e.unit).toString()}function s(e){i("bits = %s;\n",a(e));var t="integer"===e.type?"parse_int":"parse_float",r=e.bigendian,n=e.signed;i("byteoffset = offset / 8; offset += bits"),i("if (offset > binsize) { return false; }"),i("else { result = %s(bin, byteoffset, bits / 8, %s, %s); }",t,r,n)}function u(e){i("byteoffset = offset / 8;"),!0===e.size?(i("offset = binsize;"),i("result = bin.slice(byteoffset);")):(i("bits = %s;",a(e)),i("offset += bits;"),i("if (offset > binsize) { return false; }"),i("else { result = bin.slice(byteoffset,","byteoffset + bits / 8); }"))}function c(e){i("byteoffset = offset / 8;");var t=e.value.length;i("offset += %d;",8*t),i("if (offset > binsize) { return false; }"),i("else { result = bin.toString(byteoffset,",b("byteoffset + %d); }",t))}function l(e){if("string"==typeof e.size)i("var skipbits = %s * %d;",d(e.size),e.unit),i("if (offset + skipbits > binsize) { return false; }"),i("else { offset += skipbits; }");else if(!0===e.size)i("if (offset % 8 === 0) { offset = binsize; }"),i("else { return false; }");else{var t=e.unit*e.size;i("if (offset + %d > binsize) { return false; }",t),i("else { offset += %d; }",t)}}function f(e){if("_"===e.name)l(e);else{switch(e.type){case"integer":case"float":s(e);break;case"binary":u(e);break;case"string":c(e)}if(i("if (result === false) return false;"),e.name)i("else if (%s !== undefined) {",d(e.name)),i("if (%s != result) return false;",d(e.name)),i("}"),i("else %s = result;",d(e.name));else{i("else if (result != %s) return false;",JSON.stringify(e.value))}}}function d(e){return"var_"+e}function h(e){for(var t={},r=0;r<e.length;r++){var n=e[r].name;n&&"_"!==n&&(t[n]=!0),n=e[r].size,"string"==typeof n&&(t[n]=!0)}return Object.keys(t)}function p(e){n(),i("return function(binary, env) {"),i("'use strict';"),i("var bin = binary, env = env || {};"),i("var offset = 0, binsize = bin.length * 8;"),i("var bits, result, byteoffset;");for(var t=h(e),r=0;r<t.length;r++){var a=t[r];i("var %s = env['%s'];",d(a),a)}for(var s=e.length,u=0;u<s;u++){var c=e[u];i("// "+JSON.stringify(c)),f(c)}i("if (offset == binsize) {"),i("return {");for(var r=0;r<t.length;r++){var a=t[r];i("%s: %s,",a,d(a))}return i("};"),i("}"),i("else return false;"),i("}"),new Function("parse_int","parse_float",o())(x,k)}function g(e){switch(e.type){case"string":i("offset += buf.write(%s, offset, 'utf8');",JSON.stringify(e.value));break;case"binary":i("val = bindings['%s'];",e.name),!0===e.size?i("size = val.length;"):"string"==typeof e.size?i("size = (bindings['%s'] * %d) / 8;",e.size,e.unit):i("size = %d;",e.size*e.unit/8),i("val.copy(buf, offset, 0, size);"),i("offset += size;");break;case"integer":case"float":v(e)}}function v(e){e.name?i("val = bindings['%s'];",e.name):i("val = %d",e.value);var t="integer"===e.type?"write_int":"write_float";"string"==typeof e.size?i("size = (bindings['%s'] * %d) / 8;",e.size,e.unit):i("size = %d;",e.size*e.unit/8),i("%s(buf, val, offset, size, %s);",t,e.bigendian),i("offset += size;")}function m(e){for(var t=[],r=0,n=0;n<e.length;n++){var o=e[n];"string"==typeof o.size||!0===o.size?t.push(o):"string"===o.type?r+=C.byteLength(o.value):r+=o.size*o.unit/8}if(i("var buffersize = %d;",r),t.length>0)for(var a=0;a<t.length;a++){var o=t[a];!0===o.size?i("buffersize += bindings['%s'].length;",o.name):i("buffersize += (bindings['%s'] * %d) / 8;",o.size,o.unit)}}function w(e){i("var val, size;");for(var t=e.length,r=0;r<t;r++){var n=e[r];i("// %s",JSON.stringify(n)),g(n)}}function y(e){return n(),i("return function(bindings) {"),i("'use strict';"),m(e),i("var buf = Buffer.alloc(buffersize);"),i("var offset = 0;"),w(e),i("return buf;"),i("}"),new Function("write_int","write_float","Buffer",o())(U,T,C)}r(9);var b=r(0).format,E=r(22).parse,I=r(35),x=I.parse_int,k=I.parse_float,B=r(21),U=B.write_int,T=B.write_float,C=r(2).Buffer,S=[];e.exports.compile_pattern=p,e.exports.compile=function(){var e=[].join.call(arguments,",");return p(E(e))},e.exports.compile_builder=function(){var e=[].join.call(arguments,",");return y(E(e))}},function(e,t,r){"use strict";function n(e,t,r,n,i){switch(r){case 1:return i?e.readInt8(t):e.readUInt8(t);case 2:return n?i?e.readInt16BE(t):e.readUInt16BE(t):i?e.readInt16LE(t):e.readUInt16LE(t);case 4:return n?i?e.readInt32BE(t):e.readUInt32BE(t):i?e.readInt32LE(t):e.readUInt32LE(t);case 8:return n?(i?c.readInt64BE:c.readUInt64BE)(e,t):(i?c.readInt64LE:c.readUInt64LE)(e,t);default:throw"Integers must be 8-, 16-, 32- or 64-bit"}}function i(e,t,r,n){switch(r){case 4:return n?e.readFloatBE(t):e.readFloatLE(t);case 8:return n?e.readDoubleBE(t):e.readDoubleLE(t);default:throw"Floats must be 32- or 64-bit"}}function o(e,t){var r=e.size;return"string"==typeof r?t[r]:r}function a(e){function t(){}return t.prototype=e,new t}function s(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function u(e,t,r){for(var u=0,c=a(r),f=8*t.length,d=e.length,h=0;h<d;h++){var p=e[h],g=!1;if("_"===p.name)g=function(e){l("skip bits"),l(e);var t=o(e,c);if(!0===t)return u%8==0&&(u=f,!0);var r=e.unit*t;if(u+r>f)return!1;u+=r}(p);else{switch(p.type){case"string":g=function(e){l("get_string"),l(e);var r=e.value.length,n=u/8;return!((u+=8*r)>f)&&t.slice(n,n+r).toString("utf8")}(p);break;case"integer":g=function(e){l("get_integer"),l(e);var r=e.unit,i=o(e,c),a=i*r,s=u/8;return u+=a,!(a%8>0||u>f)&&n(t,s,a/8,e.bigendian,e.signed)}(p);break;case"float":g=function(e){l("get_float"),l(e);var r=e.unit,n=o(e,c),a=n*r,s=u/8;return!((u+=a)>f)&&i(t,s,a/8,e.bigendian)}(p);break;case"binary":g=function(e){l("get_binary"),l(e);var r=e.unit,n=o(e,c),i=u/8;if(!0===n)return u=f,t.slice(i);var a=n*r;return!(a%8>0||u+a>f)&&(u+=a,t.slice(i,i+a/8))}(p)}if(!1===g)return!1;if(p.name)c[p.name]=g;else if(p.value!=g)return!1}}return u==f&&s(c)}var c=r(9),l=r(19)("bitsyntax-Interpreter");e.exports.match=u,e.exports.parse_int=n,e.exports.parse_float=i},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(104),i=r(36);e.exports=function(e){return n(i(e))}},function(e,t,r){"use strict";function n(e){Error.call(this,e),Error.captureStackTrace(this,this.constructor),this.name="ArgumentError",this.message=e}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,e.exports=n},function(e,t,r){"use strict";function n(e){Error.call(this,e),Error.captureStackTrace(this,this.constructor),this.name="JwksError",this.message=e}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,e.exports=n},function(e,t,r){"use strict";function n(e){Error.call(this,e),Error.captureStackTrace(this,this.constructor),this.name="JwksRateLimitError",this.message=e}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,e.exports=n},function(e,t,r){"use strict";function n(e){Error.call(this,e),Error.captureStackTrace(this,this.constructor),this.name="SigningKeyNotFoundError",this.message=e}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,e.exports=n},function(e,t,r){"use strict";function n(e){this.message=e}var i=r(132);n.prototype=new Error,n.prototype.name="InvalidTokenError",e.exports=function(e,t){if("string"!=typeof e)throw new n("Invalid token specified");t=t||{};var r=!0===t.header?0:1;try{return JSON.parse(i(e.split(".")[r]))}catch(e){throw new n("Invalid token specified: "+e.message)}},e.exports.InvalidTokenError=n},function(e,t){var r=function(e,t,r,n){if(this.bucketSize=e,this.tokensPerInterval=t,"string"==typeof r)switch(r){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+r)}else this.interval=r;this.parentBucket=n,this.content=0,this.lastDrip=+new Date};r.prototype={bucketSize:1,tokensPerInterval:1,interval:1e3,parentBucket:null,content:0,lastDrip:0,removeTokens:function(e,t){function r(){var r=Math.ceil((e-n.content)*(n.interval/n.tokensPerInterval));return setTimeout(function(){n.removeTokens(e,t)},r),!1}var n=this;return this.bucketSize?e>this.bucketSize?(process.nextTick(t.bind(null,"Requested tokens "+e+" exceeds bucket size "+this.bucketSize,null)),!1):(this.drip(),e>this.content?r():this.parentBucket?this.parentBucket.removeTokens(e,function(i,o){return i?t(i,null):e>n.content?r():(n.content-=e,void t(null,Math.min(o,n.content)))}):(this.content-=e,process.nextTick(t.bind(null,null,this.content)),!0)):(process.nextTick(t.bind(null,null,e,Number.POSITIVE_INFINITY)),!0)},tryRemoveTokens:function(e){return!this.bucketSize||!(e>this.bucketSize)&&(this.drip(),!(e>this.content)&&(!(this.parentBucket&&!this.parentBucket.tryRemoveTokens(e))&&(this.content-=e,!0)))},drip:function(){if(!this.tokensPerInterval)return void(this.content=this.bucketSize);var e=+new Date,t=Math.max(e-this.lastDrip,0);this.lastDrip=e;var r=t*(this.tokensPerInterval/this.interval);this.content=Math.min(this.content+r,this.bucketSize)}},e.exports=r},function(e,t){e.exports=require("assert")},function(e,t){e.exports=require("bluebird@3.4.6")},function(e,t){e.exports=require("express-jwt@3.1.0")},function(e,t){e.exports=require("jsonwebtoken@7.1.9")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("url")},function(e,t,r){"use strict";(function(t){var n=(r(51),r(50)),i=r(150),o=r(16),a=r(142),s=r(1),u=r(6),c=r(82),l=r(83),f=r(80),d=r(17),h=r(3),p=r(79);e.exports=function(e,r){h.setProvider(e);var g=r?new s.WebtaskStorageContext(r,{force:1}):new s.FileStorageContext(n.join(t,"./data.json"),{mergeWrites:!0}),v=new o;v.use(i(":method :url :status :response-time ms - :res[content-length]",{stream:d.stream}));var m=function(e){return function(t,r,n){return t.webtaskContext&&t.webtaskContext.body?(t.body=t.webtaskContext.body,n()):e(t,r,n)}};return v.use(m(a.json())),v.use(m(a.urlencoded({extended:!1}))),v.use("/meta",l()),v.use("/.extensions",f()),v.use(p(g)),v.use(u.routes.dashboardAdmins({secret:h("EXTENSION_SECRET"),audience:"urn:logs-to-rabbitmq",rta:h("AUTH0_RTA").replace("https://",""),domain:h("AUTH0_DOMAIN"),baseUrl:h("PUBLIC_WT_URL")||h("WT_URL"),clientName:"Logs to RabbitMQ",urlPrefix:"",sessionStorageKey:"logs-to-rabbitmq:apiToken"})),v.use("/app",o.static(n.join(t,"../dist"))),v.use("/",c(g)),v.use(u.middlewares.errorHandler(d.error.bind(d))),v}}).call(t,"/")},function(e,t,r){function n(e,t){return a.fromCallback(function(r){return i(e,t,r)}).then(function(e){return new o(e)})}var i=r(57).connect,o=r(56).ChannelModel,a=r(47);e.exports.connect=n,e.exports.credentials=r(29),e.exports.IllegalOperationError=r(8).IllegalOperationError},function(e,t,r){"use strict";function n(e,t,r){void 0!=r&&(e[t]=r)}var i=Object.freeze({}),o={};o.assertQueue=function(e,t){e=e||"",t=t||i;var r=Object.create(t.arguments||null);return n(r,"x-expires",t.expires),n(r,"x-message-ttl",t.messageTtl),n(r,"x-dead-letter-exchange",t.deadLetterExchange),n(r,"x-dead-letter-routing-key",t.deadLetterRoutingKey),n(r,"x-max-length",t.maxLength),n(r,"x-max-priority",t.maxPriority),n(r,"x-overflow",t.overflow),n(r,"x-queue-mode",t.queueMode),{queue:e,exclusive:!!t.exclusive,durable:void 0===t.durable||t.durable,autoDelete:!!t.autoDelete,arguments:r,passive:!1,ticket:0,nowait:!1}},o.checkQueue=function(e){return{queue:e,passive:!0,nowait:!1,durable:!0,autoDelete:!1,exclusive:!1,ticket:0}},o.deleteQueue=function(e,t){return t=t||i,{queue:e,ifUnused:!!t.ifUnused,ifEmpty:!!t.ifEmpty,ticket:0,nowait:!1}},o.purgeQueue=function(e){return{queue:e,ticket:0,nowait:!1}},o.bindQueue=function(e,t,r,n){return{queue:e,exchange:t,routingKey:r,arguments:n,ticket:0,nowait:!1}},o.unbindQueue=function(e,t,r,n){return{queue:e,exchange:t,routingKey:r,arguments:n,ticket:0,nowait:!1}},o.assertExchange=function(e,t,r){r=r||i;var o=Object.create(r.arguments||null);return n(o,"alternate-exchange",r.alternateExchange),{exchange:e,ticket:0,type:t,passive:!1,durable:void 0===r.durable||r.durable,autoDelete:!!r.autoDelete,internal:!!r.internal,nowait:!1,arguments:o}},o.checkExchange=function(e){return{exchange:e,passive:!0,nowait:!1,durable:!0,internal:!1,type:"",autoDelete:!1,ticket:0}},o.deleteExchange=function(e,t){return t=t||i,{exchange:e,ifUnused:!!t.ifUnused,ticket:0,nowait:!1}},o.bindExchange=function(e,t,r,n){return{source:t,destination:e,routingKey:r,arguments:n,ticket:0,nowait:!1}},o.unbindExchange=function(e,t,r,n){return{source:t,destination:e,routingKey:r,arguments:n,ticket:0,nowait:!1}},o.publish=function(e,t,r){function o(e){return void 0===e?void 0:Array.isArray(e)?e.map(String):[String(e)]}r=r||i;var a=Object.create(r.headers||null);n(a,"CC",o(r.CC)),n(a,"BCC",o(r.BCC));var s;void 0!==r.persistent?s=r.persistent?2:1:"number"==typeof r.deliveryMode?s=r.deliveryMode:r.deliveryMode&&(s=2);var u=r.expiration;return void 0!==u&&(u=u.toString()),{exchange:e,routingKey:t,mandatory:!!r.mandatory,immediate:!1,ticket:void 0,contentType:r.contentType,contentEncoding:r.contentEncoding,headers:a,deliveryMode:s,priority:r.priority,correlationId:r.correlationId,replyTo:r.replyTo,expiration:u,messageId:r.messageId,timestamp:r.timestamp,type:r.type,userId:r.userId,appId:r.appId,clusterId:void 0}},o.consume=function(e,t){t=t||i;var r=Object.create(t.arguments||null);return n(r,"x-priority",t.priority),{ticket:0,queue:e,consumerTag:t.consumerTag||"",noLocal:!!t.noLocal,noAck:!!t.noAck,exclusive:!!t.exclusive,nowait:!1,arguments:r}},o.cancel=function(e){return{consumerTag:e,nowait:!1}},o.get=function(e,t){return t=t||i,{ticket:0,queue:e,noAck:!!t.noAck}},o.ack=function(e,t){return{deliveryTag:e,multiple:!!t}},o.nack=function(e,t,r){return{deliveryTag:e,multiple:!!t,requeue:void 0===r||r}},o.reject=function(e,t){return{deliveryTag:e,requeue:void 0===t||t}},o.prefetch=function(e,t){return{prefetchCount:e||0,prefetchSize:0,global:!!t}},o.recover=function(){return{requeue:!0}},e.exports=Object.freeze(o)},function(e,t,r){"use strict";function n(e){if(e){var t=Math.ceil(e/32);this.words=new Array(t)}else this.words=[];this.wordsInUse=0}function i(e){return Math.floor(e/32)}function o(e){if(0===e)return 32;var t,r=31;return t=e<<16,0!=t&&(r-=16,e=t),t=e<<8,0!=t&&(r-=8,e=t),t=e<<4,0!=t&&(r-=4,e=t),t=e<<2,0!=t&&(r-=2,e=t),r-(e<<1>>>31)}var a=n.prototype;a.ensureSize=function(e){var t=this.words.length;t<e&&(this.words=this.words.concat(new Array(e-t)))},a.set=function(e){var t=i(e);t>=this.wordsInUse&&(this.ensureSize(t+1),this.wordsInUse=t+1);var r=1<<e;this.words[t]|=r},a.clear=function(e){var t=i(e);if(!(t>=this.wordsInUse)){var r=~(1<<e);this.words[t]&=r}},a.get=function(e){var t=i(e);if(t>=this.wordsInUse)return!1;var r=1<<e;return!!(this.words[t]&r)},a.nextSetBit=function(e){var t=i(e);if(t>=this.wordsInUse)return-1;for(var r=this.words[t]&4294967295<<e;;){if(r)return 32*t+o(r);if(++t===this.wordsInUse)return-1;r=this.words[t]}},a.nextClearBit=function(e){var t=i(e);if(t>=this.wordsInUse)return e;for(var r=~this.words[t]&4294967295<<e;;){if(r)return 32*t+o(r);if(++t==this.wordsInUse)return 32*t;r=~this.words[t]}},e.exports.BitSet=n},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);c.call(this),this.connection=e;var t=this;["error","close","blocked","unblocked"].forEach(function(r){e.on(r,t.emit.bind(t,r))})}function i(e){l.call(this,e),this.on("delivery",this.handleDelivery.bind(this)),this.on("cancel",this.handleCancel.bind(this))}function o(e){i.call(this,e)}var a=r(7),s=r(47),u=r(0).inherits,c=r(15).EventEmitter,l=r(27).BaseChannel,f=r(27).acceptMessage,d=r(54);u(n,c),e.exports.ChannelModel=n;var h=n.prototype;h.close=function(){return s.fromCallback(this.connection.close.bind(this.connection))},u(i,l),e.exports.Channel=i,h.createChannel=function(){var e=new i(this.connection);return e.open().then(function(t){return e})};var p=i.prototype;p.rpc=function(e,t,r){var n=this;return s.fromCallback(function(i){return n._rpc(e,t,r,i)}).then(function(e){return e.fields})},p.open=function(){return s.try(this.allocate.bind(this)).then(function(e){return e.rpc(a.ChannelOpen,{outOfBand:""},a.ChannelOpenOk)})},p.close=function(){var e=this;return s.fromCallback(function(t){return e.closeBecause("Goodbye",a.constants.REPLY_SUCCESS,t)})},p.assertQueue=function(e,t){return this.rpc(a.QueueDeclare,d.assertQueue(e,t),a.QueueDeclareOk)},p.checkQueue=function(e){return this.rpc(a.QueueDeclare,d.checkQueue(e),a.QueueDeclareOk)},p.deleteQueue=function(e,t){return this.rpc(a.QueueDelete,d.deleteQueue(e,t),a.QueueDeleteOk)},p.purgeQueue=function(e){return this.rpc(a.QueuePurge,d.purgeQueue(e),a.QueuePurgeOk)},p.bindQueue=function(e,t,r,n){return this.rpc(a.QueueBind,d.bindQueue(e,t,r,n),a.QueueBindOk)},p.unbindQueue=function(e,t,r,n){return this.rpc(a.QueueUnbind,d.unbindQueue(e,t,r,n),a.QueueUnbindOk)},p.assertExchange=function(e,t,r){return this.rpc(a.ExchangeDeclare,d.assertExchange(e,t,r),a.ExchangeDeclareOk).then(function(t){return{exchange:e}})},p.checkExchange=function(e){return this.rpc(a.ExchangeDeclare,d.checkExchange(e),a.ExchangeDeclareOk)},p.deleteExchange=function(e,t){return this.rpc(a.ExchangeDelete,d.deleteExchange(e,t),a.ExchangeDeleteOk)},p.bindExchange=function(e,t,r,n){return this.rpc(a.ExchangeBind,d.bindExchange(e,t,r,n),a.ExchangeBindOk)},p.unbindExchange=function(e,t,r,n){return this.rpc(a.ExchangeUnbind,d.unbindExchange(e,t,r,n),a.ExchangeUnbindOk)},p.publish=function(e,t,r,n){var i=d.publish(e,t,n);return this.sendMessage(i,i,r)},p.sendToQueue=function(e,t,r){return this.publish("",e,t,r)},p.consume=function(e,t,r){var n=this,i=d.consume(e,r);return s.fromCallback(function(e){n._rpc(a.BasicConsume,i,a.BasicConsumeOk,e)}).then(function(e){return n.registerConsumer(e.fields.consumerTag,t),e.fields})},p.cancel=function(e){var t=this;return s.fromCallback(function(r){t._rpc(a.BasicCancel,d.cancel(e),a.BasicCancelOk,r)}).then(function(r){return t.unregisterConsumer(e),r.fields})},p.get=function(e,t){var r=this,n=d.get(e,t);return s.fromCallback(function(e){return r.sendOrEnqueue(a.BasicGet,n,e)}).then(function(e){if(e.id===a.BasicGetEmpty)return!1;if(e.id===a.BasicGetOk){var t=e.fields;return new s(function(e){r.handleMessage=f(function(r){r.fields=t,e(r)})})}throw new Error("Unexpected response to BasicGet: "+inspect(e))})},p.ack=function(e,t){this.sendImmediately(a.BasicAck,d.ack(e.fields.deliveryTag,t))},p.ackAll=function(){this.sendImmediately(a.BasicAck,d.ack(0,!0))},p.nack=function(e,t,r){this.sendImmediately(a.BasicNack,d.nack(e.fields.deliveryTag,t,r))},p.nackAll=function(e){this.sendImmediately(a.BasicNack,d.nack(0,!0,e))},p.reject=function(e,t){this.sendImmediately(a.BasicReject,d.reject(e.fields.deliveryTag,t))},p.prefetch=p.qos=function(e,t){return this.rpc(a.BasicQos,d.prefetch(e,t),a.BasicQosOk)},p.recover=function(){return this.rpc(a.BasicRecover,d.recover(),a.BasicRecoverOk)},u(o,i),e.exports.ConfirmChannel=o,h.createConfirmChannel=function(){var e=new o(this.connection);return e.open().then(function(t){return e.rpc(a.ConfirmSelect,{nowait:!1},a.ConfirmSelectOk)}).then(function(){return e})};var g=o.prototype;g.publish=function(e,t,r,n,i){return this.pushConfirmCallback(i),p.publish.call(this,e,t,r,n)},g.sendToQueue=function(e,t,r,n){return this.publish("",e,t,r,n)},g.waitForConfirms=function(){var e=[],t=this.unconfirmed;return t.forEach(function(r,n){if(null===r);else{var i=new s(function(e,i){t[n]=function(t){r&&r(t),null===t?e():i(t)}});e.push(i)}}),s.all(e)}},function(e,t,r){"use strict";function n(e,t){for(var r=Object.keys(e),n=r.length;n--;){var i=r[n];t[i]=e[i]}return t}function i(e){return n(e,{})}function o(e,t,r,i){function o(e,t){return void 0===e?t:parseInt(e)}e=e?c.unescape(e):"/";var t=t||{};return{clientProperties:n(i,Object.create(h)),mechanism:r.mechanism,response:r.response(),locale:t.locale||"en_US",channelMax:o(t.channelMax,0),frameMax:o(t.frameMax,4096),heartbeat:o(t.heartbeat,0),virtualHost:e,capabilities:"",insist:0}}function a(e){var t="guest",r="guest";return""==e.username&&""==e.password||(t=e.username?unescape(e.username):"",r=e.password?unescape(e.password):""),d.plain(t,r)}function s(e,t,n){function s(){B=!0,k.setNoDelay(p),v&&k.setKeepAlive(v,m);var e=new l(k);e.open(h,function(t,r){g&&k.setTimeout(0),null===t?n(null,e):n(t)})}var c=i(t||{});e=e||"amqp://localhost";var f,h,p=!!c.noDelay,g=c.timeout,v=!!c.keepAlive,m=c.keepAliveDelay||0,w=c.clientProperties||{};if("object"==typeof e){f=(e.protocol||"amqp")+":",c.host=e.hostname,c.port=e.port||("amqp:"===f?5672:5671);var y,b;void 0==e.username&&void 0==e.password?(y="guest",b="guest"):(y=e.username||"",b=e.password||"");var E={locale:e.locale,channelMax:e.channelMax,frameMax:e.frameMax,heartbeat:e.heartbeat};h=o(e.vhost,E,c.credentials||d.plain(y,b),w)}else{var I=u(e,!0);f=I.protocol,c.host=I.hostname,c.port=parseInt(I.port)||("amqp:"===f?5672:5671);var x=I.pathname?I.pathname.substr(1):null;h=o(x,I.query,c.credentials||a(I),w)}var k,B=!1;if("amqp:"===f)k=r(152).connect(c,s);else{if("amqps:"!==f)throw new Error("Expected amqp: or amqps: as the protocol; got "+f);k=r(155).connect(c,s)}g&&k.setTimeout(g,function(){k.end(),k.destroy(),n(new Error("connect ETIMEDOUT"))}),k.once("error",function(e){B||n(e)})}var u=r(139),c=r(153),l=r(58).Connection,f=r(0).format,d=r(29),h={product:"amqplib",version:r(120).version,platform:f("Node.JS %s",process.version),information:"http://squaremo.github.io/amqp.node",capabilities:{publisher_confirms:!0,exchange_exchange_bindings:!0,"basic.nack":!0,consumer_cancel_notify:!0,"connection.blocked":!0,authentication_failure_close:!0}};e.exports.connect=s,e.exports.credentialsFromUrl=a},function(e,t,r){"use strict";function n(e){m.call(this);var t=this.stream=u(e);this.muxer=new p(t),this.rest=g.alloc(0),this.frameMax=f.FRAME_MIN_SIZE,this.sentSinceLastCheck=!1,this.recvSinceLastCheck=!1,this.expectSocketClose=!1,this.freeChannels=new I,this.channels=[{channel:{accept:o(this)},buffer:e}]}function i(e){var t=this.channels[e.channel];if(t)return t.channel.accept(e);this.closeWithError(k("Frame on unknown channel %d",e.channel),f.CHANNEL_ERROR,new Error(k("Frame on unknown channel: %s",E(e,!1))))}function o(e){return function(t){if(t===h);else if(t.id===l.ConnectionClose){e.sendMethod(0,l.ConnectionCloseOk,{});var r=k("Connection closed: %s",b(t)),n=T(r),i=new Error(r);i.code=t.fields.replyCode,c(i)&&e.emit("error",i),e.toClosed(n,i)}else t.id===l.ConnectionBlocked?e.emit("blocked",t.fields.reason):t.id===l.ConnectionUnblocked?e.emit("unblocked"):e.closeWithError(k("Unexpected frame on channel 0"),f.UNEXPECTED_FRAME,new Error(k("Unexpected frame on channel 0: %s",E(t,!1))))}}function a(e,t){return function(){throw new U(e,t)}}function s(e,t,r){e.sendMethod=e.sendContent=e.sendMessage=a(t,r)}function u(e){if(e instanceof v)return e;var t=new v;return t.wrap(e),t._write=function(t,r,n){return e.write(t,r,n)},t}function c(e){switch(e&&e.code){case l.constants.CONNECTION_FORCED:case l.constants.REPLY_SUCCESS:return!1;default:return!0}}var l=r(7),f=l.constants,d=r(30),h=d.HEARTBEAT,p=r(60).Mux,g=r(2).Buffer,v=r(20).Duplex||r(62),m=r(15).EventEmitter,w=r(59).Heart,y=r(4).methodName,b=r(4).closeMessage,E=r(4).inspect,I=r(55).BitSet,x=r(0).inherits,k=r(0).format,B=r(20).PassThrough||r(67),U=r(8).IllegalOperationError,T=r(8).stackCapture;x(n,m);var C=n.prototype;C.sendProtocolHeader=function(){this.sendBytes(d.PROTOCOL_HEADER)},C.open=function(e,t){function r(e){p.step(function(t,r){null!==t?o(t):0!==r.channel?o(new Error(k("Frame on channel != 0 during handshake: %s",E(r,!1)))):e(r)})}function n(e,t){r(function(r){r.id===e?t(r):o(new Error(k("Expected %s; got %s",y(e),E(r,!1))))})}function o(e){g(e)}function a(e){try{p.sendMethod(0,e,v)}catch(e){o(e)}}function s(e,t){return 0===e||0===t?Math.max(e,t):Math.min(e,t)}function u(t){if(t.fields.mechanisms.toString().split(" ").indexOf(e.mechanism)<0)return void o(new Error(k("SASL mechanism %s is not provided by the server",e.mechanism)));p.serverProperties=t.fields.serverProperties,a(l.ConnectionStartOk),r(c)}function c(t){switch(t.id){case l.ConnectionSecure:o(new Error("Wasn't expecting to have to go through secure"));break;case l.ConnectionClose:o(new Error(k("Handshake terminated by server: %s",b(t))));break;case l.ConnectionTune:var r=t.fields;v.frameMax=s(r.frameMax,e.frameMax),v.channelMax=s(r.channelMax,e.channelMax),v.heartbeat=s(r.heartbeat,e.heartbeat),a(l.ConnectionTuneOk),a(l.ConnectionOpen),n(l.ConnectionOpenOk,f);break;default:o(new Error(k("Expected connection.secure, connection.close, or connection.tune during handshake; got %s",E(t,!1))))}}function f(e){p.channelMax=v.channelMax||65535,p.frameMax=v.frameMax||4294967295,p.heartbeat=v.heartbeat,p.heartbeater=p.startHeartbeater(),p.accept=i,h(e)}function d(e){o(e||new Error("Socket closed abruptly during opening handshake"))}function h(e){p.stream.removeListener("end",d),p.stream.removeListener("error",d),p.stream.on("error",p.onSocketError.bind(p)),p.stream.on("end",p.onSocketError.bind(p,new Error("Unexpected close"))),p.on("frameError",p.onSocketError.bind(p)),p.acceptLoop(),g(null,e)}var p=this,g=t||function(){},v=Object.create(e);this.stream.on("end",d),this.stream.on("error",d),this.sendProtocolHeader(),n(l.ConnectionStart,u)},C.close=function(e){var t=e&&function(){e(null)};this.closeBecause("Cheers, thanks",f.REPLY_SUCCESS,t)},C.closeBecause=function(e,t,r){this.sendMethod(0,l.ConnectionClose,{replyText:e,replyCode:t,methodId:0,classId:0});var n=T("closeBecause called: "+e);this.toClosing(n,r)},C.closeWithError=function(e,t,r){this.emit("error",r),this.closeBecause(e,t)},C.onSocketError=function(e){if(!this.expectSocketClose){this.expectSocketClose=!0,this.emit("error",e);var t=T("Socket error");this.toClosed(t,e)}},C.toClosing=function(e,t){var r=this.sendMethod.bind(this);this.accept=function(e){if(e.id===l.ConnectionCloseOk){t&&t();var n=T("ConnectionCloseOk received");this.toClosed(n,void 0)}else e.id===l.ConnectionClose&&r(0,l.ConnectionCloseOk,{})},s(this,"Connection closing",e)},C._closeChannels=function(e){for(var t=1;t<this.channels.length;t++){var r=this.channels[t];null!==r&&r.channel.toClosed(e)}},C.toClosed=function(e,t){this._closeChannels(e);var r=k("Connection closed (%s)",t?t.toString():"by client");s(this,r,e),this.accept=a(r,e),this.close=function(t){t&&t(new U(r,e))},this.heartbeater&&this.heartbeater.clear(),this.expectSocketClose=!0,this.stream.end(),this.emit("close",t)},C.startHeartbeater=function(){if(0===this.heartbeat)return null;var e=this,t=new w(this.heartbeat,this.checkSend.bind(this),this.checkRecv.bind(this));return t.on("timeout",function(){var t=new Error("Heartbeat timeout");e.emit("error",t);var r=T("Heartbeat timeout");e.toClosed(r,t)}),t.on("beat",function(){e.sendHeartbeat()}),t},C.freshChannel=function(e,t){var r=this.freeChannels.nextClearBit(1);if(r<0||r>this.channelMax)throw new Error("No channels left to allocate");this.freeChannels.set(r);var n=t&&t.highWaterMark||1024,i=new B({objectMode:!0,highWaterMark:n});return this.channels[r]={channel:e,buffer:i},i.on("drain",function(){e.onBufferDrain()}),this.muxer.pipeFrom(i),r},C.releaseChannel=function(e){this.freeChannels.clear(e),this.channels[e].buffer.end(),this.channels[e]=null},C.acceptLoop=function(){function e(){try{for(var e;e=t.recvFrame();)t.accept(e)}catch(e){t.emit("frameError",e)}}var t=this;t.stream.on("readable",e),e()},C.step=function(e){function t(){var n;try{n=r.recvFrame()}catch(t){return void e(t,null)}n?e(null,n):r.stream.once("readable",t)}var r=this;t()},C.checkSend=function(){var e=this.sentSinceLastCheck;return this.sentSinceLastCheck=!1,e},C.checkRecv=function(){var e=this.recvSinceLastCheck;return this.recvSinceLastCheck=!1,e},C.sendBytes=function(e){this.sentSinceLastCheck=!0,this.stream.write(e)},C.sendHeartbeat=function(){return this.sendBytes(d.HEARTBEAT_BUF)};var S=l.encodeMethod,M=l.encodeProperties;C.sendMethod=function(e,t,r){var n=S(t,e,r);return this.sentSinceLastCheck=!0,this.channels[e].buffer.write(n)},C.sendMessage=function(e,t,r,n,i,o){if(!g.isBuffer(o))throw new TypeError("content is not a buffer");var a=S(t,e,r),s=M(n,e,o.length,i),u=this.channels[e].buffer;this.sentSinceLastCheck=!0;var c=a.length+s.length,l=o.length>0?o.length+_:0,f=c+l;if(f<2048){var d=g.alloc(f),h=a.copy(d,0);return h+=s.copy(d,h),l>0&&A(e,o).copy(d,h),u.write(d)}if(c<2048){var p=g.alloc(c),h=a.copy(p,0);s.copy(p,h),u.write(p)}else u.write(a),u.write(s);return this.sendContent(e,o)};var _=l.FRAME_OVERHEAD,A=d.makeBodyFrame;C.sendContent=function(e,t){if(!g.isBuffer(t))throw new TypeError(k("Expected buffer; got %s",t));for(var r=!0,n=this.channels[e].buffer,i=this.frameMax-_,o=0;o<t.length;o+=i){var a=o+i,s=a>t.length?t.slice(o):t.slice(o,a),u=A(e,s);r=n.write(u)}return this.sentSinceLastCheck=!0,r};var O=d.parseFrame,L=d.decodeFrame;C.recvFrame=function(){var e=O(this.rest,this.frameMax);if(e)return this.rest=e.rest,L(e);var t=this.stream.read();return null!==t&&(this.recvSinceLastCheck=!0,this.rest=g.concat([this.rest,t]),this.recvFrame())},e.exports.Connection=n,e.exports.isFatalError=c},function(e,t,r){"use strict";function n(t,r,n){function i(){return n()?(c=0,!0):++c<2}o.call(this),this.interval=t;var a=t*e.exports.UNITS_TO_MS,s=this.emit.bind(this,"beat"),u=this.emit.bind(this,"timeout");this.sendTimer=setInterval(this.runHeartbeat.bind(this,r,s),a/2);var c=0;this.recvTimer=setInterval(this.runHeartbeat.bind(this,i,u),a)}var i=r(0).inherits,o=r(15).EventEmitter;e.exports.UNITS_TO_MS=1e3,i(n,o),e.exports.Heart=n,n.prototype.clear=function(){clearInterval(this.sendTimer),clearInterval(this.recvTimer)},n.prototype.runHeartbeat=function(e,t){e()||t()}},function(e,t,r){"use strict";function n(e){this.newStreams=[],this.oldStreams=[],this.blocked=!1,this.scheduledRead=!1,this.out=e;var t=this;e.on("drain",function(){t.blocked=!1,t._readIncoming()})}var i=(r(0).inherits,r(46)),o="function"==typeof setImmediate?setImmediate:process.nextTick;n.prototype._readIncoming=function(){function e(e){var n;if(1===e.length){for(n=e.shift();t;){var i=n.read();if(null===i)break;t=r.write(i)}t||e.push(n)}else for(;t&&(n=e.shift());){var i=n.read();null!==i&&(t=r.write(i),e.push(n))}}if(!this.blocked){var t=!0,r=this.out;e(this.newStreams),t?(i.equal(0,this.newStreams.length),e(this.oldStreams)):(i(this.newStreams.length>0,"Expect some new streams to remain"),this.oldStreams=this.oldStreams.concat(this.newStreams),this.newStreams=[]),this.blocked=!t}},n.prototype._scheduleRead=function(){var e=this;e.scheduledRead||(o(function(){e.scheduledRead=!1,e._readIncoming()}),e.scheduledRead=!0)},n.prototype.pipeFrom=function(e){function t(){i.newStreams.push(e),i._scheduleRead()}function r(){e.removeListener("readable",t),e.removeListener("error",r),e.removeListener("end",r),e.removeListener("unpipeFrom",n)}function n(e){e===i&&r()}var i=this;e.on("unpipeFrom",n),e.on("end",r),e.on("error",r),e.on("readable",t)},n.prototype.unpipeFrom=function(e){e.emit("unpipeFrom",this)},e.exports.Mux=n},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,r){e.exports=r(5)},function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}e.exports=n;var i=r(65),o=r(11);o.inherits=r(12),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){function n(e,t){var n=r(5);e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,t instanceof n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(C||(C=r(31).StringDecoder),this.decoder=new C(e.encoding),this.encoding=e.encoding)}function i(e){r(5);if(!(this instanceof i))return new i(e);this._readableState=new n(e,this),this.readable=!0,U.call(this)}function o(e,t,r,n,i){var o=c(t,r);if(o)e.emit("error",o);else if(T.isNullOrUndefined(r))t.reading=!1,t.ended||l(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else!t.decoder||i||n||(r=t.decoder.write(r)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&f(e)),h(e,t);else i||(t.reading=!1);return a(t)}function a(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function s(e){if(e>=M)e=M;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||T.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=s(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function c(e,t){var r=null;return T.isBuffer(t)||T.isString(t)||T.isNullOrUndefined(t)||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function l(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,f(e)}function f(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(S("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?process.nextTick(function(){d(e)}):d(e))}function d(e){S("emit readable"),e.emit("readable"),w(e)}function h(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(function(){p(e,t)}))}function p(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(S("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;S("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&B.listenerCount(e,"data")&&(t.flowing=!0,w(e))}}function v(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(function(){m(e,t)}))}function m(e,t){t.resumeScheduled=!1,e.emit("resume"),w(e),t.flowing&&!t.reading&&e.read(0)}function w(e){var t=e._readableState;if(S("flow",t.flowing),t.flowing)do{var r=e.read()}while(null!==r&&t.flowing)}function y(e,t){var r,n=t.buffer,i=t.length,o=!!t.decoder,a=!!t.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(a)r=n.shift();else if(!e||e>=i)r=o?n.join(""):k.concat(n,i),n.length=0;else if(e<n[0].length){var s=n[0];r=s.slice(0,e),n[0]=s.slice(e)}else if(e===n[0].length)r=n.shift();else{r=o?"":new k(e);for(var u=0,c=0,l=n.length;c<l&&u<e;c++){var s=n[0],f=Math.min(e-u,s.length);o?r+=s.slice(0,f):s.copy(r,u,0,f),f<s.length?n[0]=s.slice(f):n.shift(),u+=f}}return r}function b(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,process.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function E(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function I(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}e.exports=i;var x=r(61),k=r(18).Buffer;i.ReadableState=n;var B=r(15).EventEmitter;B.listenerCount||(B.listenerCount=function(e,t){return e.listeners(t).length});var U=r(20),T=r(11);T.inherits=r(12);var C,S=r(0);S=S&&S.debuglog?S.debuglog("stream"):function(){},T.inherits(i,U),i.prototype.push=function(e,t){var r=this._readableState;return T.isString(e)&&!r.objectMode&&(t=t||r.defaultEncoding)!==r.encoding&&(e=new k(e,t),t=""),o(this,r,e,t,!1)},i.prototype.unshift=function(e){return o(this,this._readableState,e,"",!0)},i.prototype.setEncoding=function(e){return C||(C=r(31).StringDecoder),this._readableState.decoder=new C(e),this._readableState.encoding=e,this};var M=8388608;i.prototype.read=function(e){S("read",e);var t=this._readableState,r=e;if((!T.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return S("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?b(this):f(this),null;if(0===(e=u(e,t))&&t.ended)return 0===t.length&&b(this),null;var n=t.needReadable;S("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,S("length less than watermark",n)),(t.ended||t.reading)&&(n=!1,S("reading or ended",n)),n&&(S("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),n&&!t.reading&&(e=u(r,t));var i;return i=e>0?y(e,t):null,T.isNull(i)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),r!==e&&t.ended&&0===t.length&&b(this),T.isNull(i)||this.emit("data",i),i},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function r(e){S("onunpipe"),e===l&&i()}function n(){S("onend"),e.end()}function i(){S("cleanup"),e.removeListener("close",s),e.removeListener("finish",u),e.removeListener("drain",p),e.removeListener("error",a),e.removeListener("unpipe",r),l.removeListener("end",n),l.removeListener("end",i),l.removeListener("data",o),!f.awaitDrain||e._writableState&&!e._writableState.needDrain||p()}function o(t){S("ondata"),!1===e.write(t)&&(S("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function a(t){S("onerror",t),c(),e.removeListener("error",a),0===B.listenerCount(e,"error")&&e.emit("error",t)}function s(){e.removeListener("finish",u),c()}function u(){S("onfinish"),e.removeListener("close",s),c()}function c(){S("unpipe"),l.unpipe(e)}var l=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1,S("pipe count=%d opts=%j",f.pipesCount,t);var d=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr,h=d?n:i;f.endEmitted?process.nextTick(h):l.once("end",h),e.on("unpipe",r);var p=g(l);return e.on("drain",p),l.on("data",o),e._events&&e._events.error?x(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",s),e.once("finish",u),e.emit("pipe",l),f.flowing||(S("pipe resume"),l.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var i=I(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var r=U.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var n=this._readableState;if(!n.readableListening)if(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading)n.length&&f(this);else{var i=this;process.nextTick(function(){S("readable nexttick read 0"),i.read(0)})}}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState;return e.flowing||(S("resume"),e.flowing=!0,e.reading||(S("resume read 0"),this.read(0)),v(this,e)),this},i.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(S("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(S("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)){n.push(i)||(r=!0,e.pause())}});for(var i in e)T.isFunction(e[i])&&T.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return E(["error","close","destroy","pause","resume"],function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){S("wrapped _read",t),r&&(r=!1,e.resume())},n},i._fromList=y},function(e,t,r){function n(e,t){this.afterTransform=function(e,r){return i(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,u.isNullOrUndefined(r)||e.push(r),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e),this._transformState=new n(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(e){a(t,e)}):a(t)})}function a(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}e.exports=o;var s=r(5),u=r(11);u.inherits=r(12),u.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;u.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},function(e,t,r){function n(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function i(e,t){var n=r(5);e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!e.objectMode,t instanceof n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){h(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(e){var t=r(5);if(!(this instanceof o||this instanceof t))return new o(e);this._writableState=new i(e,this),this.writable=!0,x.call(this)}function a(e,t,r){var n=new Error("write after end");e.emit("error",n),process.nextTick(function(){r(n)})}function s(e,t,r,n){var i=!0;if(!(I.isBuffer(r)||I.isString(r)||I.isNullOrUndefined(r)||t.objectMode)){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),process.nextTick(function(){n(o)}),i=!1}return i}function u(e,t,r){return!e.objectMode&&!1!==e.decodeStrings&&I.isString(t)&&(t=new E(t,r)),t}function c(e,t,r,i,o){r=u(t,r,i),I.isBuffer(r)&&(i="buffer");var a=t.objectMode?1:r.length;t.length+=a;var s=t.length<t.highWaterMark;return s||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new n(r,i,o)):l(e,t,!1,a,r,i,o),s}function l(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function f(e,t,r,n,i){r?process.nextTick(function(){t.pendingcb--,i(n)}):(t.pendingcb--,i(n)),e._writableState.errorEmitted=!0,e.emit("error",n)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function h(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(d(r),t)f(e,r,n,t,i);else{var o=m(e,r);o||r.corked||r.bufferProcessing||!r.buffer.length||v(e,r),n?process.nextTick(function(){p(e,r,o,i)}):p(e,r,o,i)}}function p(e,t,r,n){r||g(e,t),t.pendingcb--,n(),y(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function v(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var r=[],n=0;n<t.buffer.length;n++)r.push(t.buffer[n].callback);t.pendingcb++,l(e,t,!0,t.length,t.buffer,"",function(e){for(var n=0;n<r.length;n++)t.pendingcb--,r[n](e)}),t.buffer=[]}else{for(var n=0;n<t.buffer.length;n++){var i=t.buffer[n],o=i.chunk,a=i.encoding,s=i.callback,u=t.objectMode?1:o.length;if(l(e,t,!1,u,o,a,s),t.writing){n++;break}}n<t.buffer.length?t.buffer=t.buffer.slice(n):t.buffer.length=0}t.bufferProcessing=!1}function m(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function w(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function y(e,t){var r=m(e,t);return r&&(0===t.pendingcb?(w(e,t),t.finished=!0,e.emit("finish")):w(e,t)),r}function b(e,t,r){t.ending=!0,y(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0}e.exports=o;var E=r(18).Buffer;o.WritableState=i;var I=r(11);I.inherits=r(12);var x=r(20);I.inherits(o,x),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return I.isFunction(t)&&(r=t,t=null),I.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),I.isFunction(r)||(r=function(){}),n.ended?a(this,n,r):s(this,n,e,r)&&(n.pendingcb++,i=c(this,n,e,t,r)),i},o.prototype.cork=function(){this._writableState.corked++},o.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||v(this,e))},o.prototype._write=function(e,t,r){r(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(e,t,r){var n=this._writableState;I.isFunction(e)?(r=e,e=null,t=null):I.isFunction(t)&&(r=t,t=null),I.isNullOrUndefined(e)||this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||b(this,n,r)}},function(e,t,r){e.exports=r(63)},function(e,t,r){const n=r(44),i=r(48),o=r(1),a=r(33);e.exports=function(e){if(!e||"object"!=typeof e)throw new o.ArgumentError("Must provide the options");if(null===e.secret||void 0===e.secret)throw new o.ArgumentError("Must provide a valid secret");if("string"!=typeof e.secret||0===e.secret.length)throw new o.ArgumentError("The provided secret is invalid: "+e.secret);if(null===e.audience||void 0===e.audience)throw new o.ArgumentError("Must provide a valid secret");if("string"!=typeof e.audience||0===e.audience.length)throw new o.ArgumentError("The provided audience is invalid: "+e.audience);if(null===e.baseUrl||void 0===e.baseUrl)throw new o.ArgumentError("Must provide a valid base URL");if("string"!=typeof e.baseUrl||0===e.baseUrl.length)throw new o.ArgumentError("The provided base URL is invalid: "+e.baseUrl);const t=i({audience:e.audience,issuer:e.baseUrl,secret:e.secret,algorithms:["HS256"],credentialsRequired:e.credentialsRequired||!0});return function(r,n,i){t(r,n,function(t){return t?i(t):e.onLoginSuccess?e.onLoginSuccess(r,n,i):i()})}},e.exports.optional=function(t){const r=e.exports(t);return a(function(e){if(e&&e.headers&&e.headers.authorization&&0===e.headers.authorization.indexOf("Bearer "))try{const r=n(e.headers.authorization.split(" ")[1]);return r&&r.iss===t.baseUrl}catch(e){return!1}return!1},r)}},function(e,t,r){const n=r(44),i=r(48),o=r(122),a=r(1),s=r(33),u=r(1).UnauthorizedError;e.exports=function(e){if(!e||"object"!=typeof e)throw new a.ArgumentError("Must provide the options");if(null===e.domain||void 0===e.domain)throw new a.ArgumentError("Must provide a valid domain");if("string"!=typeof e.domain||0===e.domain.length)throw new a.ArgumentError("The provided domain is invalid: "+e.domain);if(null===e.audience||void 0===e.audience)throw new a.ArgumentError("Must provide a valid audience");if("string"!=typeof e.audience||0===e.audience.length)throw new a.ArgumentError("The provided audience is invalid: "+e.audience);const t=i({secret:o.expressJwtSecret({cache:!0,rateLimit:!0,jwksRequestsPerMinute:5,jwksUri:"https://"+e.domain+"/.well-known/jwks.json",handleSigningKeyError:function(e,t){return t(e instanceof o.SigningKeyNotFoundError?new u("A token was provided with an invalid kid"):e)}}),audience:e.audience,issuer:"https://"+e.domain+"/",algorithms:["RS256"],credentialsRequired:e&&e.credentialsRequired||!0});return function(r,n,i){t(r,n,function(t){return t?i(t):e.onLoginSuccess?e.onLoginSuccess(r,n,i):i()})}},e.exports.optional=function(t){const r=e.exports(t);return s(function(e){if(e&&e.headers&&e.headers.authorization&&0===e.headers.authorization.indexOf("Bearer "))try{const r=n(e.headers.authorization.split(" ")[1]);return r&&r.iss==="https://"+t.domain+"/"}catch(e){return!1}return!1},r)}},function(e,t,r){e.exports=function(e){return function(t,r,n,i){return e&&e(t),t&&t.status?(n.status(t.status),n.json({error:t.code||t.name,message:t.message||t.name})):(n.status(t.status||500),n.json({error:"InternalServerError",message:t.message||t.name}))}}},function(e,t,r){e.exports.authenticateAdmins=r(68),e.exports.authenticateUsers=r(69),e.exports.requireAuthentication=r(73),e.exports.errorHandler=r(70),e.exports.managementApiClient=r(72),e.exports.validateHookToken=r(74),e.exports.webtaskConfig=r(75)},function(e,t,r){const n=r(1);e.exports=function(e){return function(t,r,i){const o=t,a=t.user&&t.user.access_token&&t.user.access_token.length,s=a?{domain:e.domain,accessToken:t.user.access_token}:e;n.managementApi.getClient(s).then(function(e){return o.auth0=e,i(),null}).catch(function(e){i(e)})}}},function(e,t,r){const n=r(1).UnauthorizedError;e.exports=function(e,t,r){return e.user?r():r(new n("Authentication required for this endpoint."))}},function(e,t,r){const n=r(1);e.exports=function(e,t,r){if(null===e||void 0===e)throw new n.ArgumentError("Must provide the domain");if("string"!=typeof e||0===e.length)throw new n.ArgumentError("The provided domain is invalid: "+e);if(null===t||void 0===t)throw new n.ArgumentError("Must provide the webtaskUrl");if("string"!=typeof t||0===t.length)throw new n.ArgumentError("The provided webtaskUrl is invalid: "+t);if(null===r||void 0===r)throw new n.ArgumentError("Must provide the extensionSecret");if("string"!=typeof r||0===r.length)throw new n.ArgumentError("The provided extensionSecret is invalid: "+r);return function(i){if(null===i||void 0===i)throw new n.ArgumentError("Must provide the hookPath");if("string"!=typeof i||0===i.length)throw new n.ArgumentError("The provided hookPath is invalid: "+i);return function(o,a,s){if(o.headers.authorization&&"Bearer"===o.headers.authorization.split(" ")[0]){const u=o.headers.authorization.split(" ")[1];try{if(n.validateHookToken(e,t,i,r,u))return s()}catch(e){return s(e)}}return s(new n.HookTokenError("Hook token missing for the call to: "+i))}}}},function(e,t,r){const n=r(1);e.exports=function(e){return function(t,r,i){return t.webtaskContext&&e.setProvider(n.configProvider.fromWebtaskContext(t.webtaskContext)),i()}}},function(e,t,r){const n=r(16),i=r(144),o=r(90),a=r(49),s=r(1),u=r(32);e.exports=function(e){if(!e||"object"!=typeof e)throw new s.ArgumentError("Must provide the options");if(null===e.secret||void 0===e.secret)throw new s.ArgumentError("Must provide a valid secret");if("string"!=typeof e.secret||0===e.secret.length)throw new s.ArgumentError("The provided secret is invalid: "+e.secret);if(null===e.audience||void 0===e.audience)throw new s.ArgumentError("Must provide a valid audience");if("string"!=typeof e.audience||0===e.audience.length)throw new s.ArgumentError("The provided audience is invalid: "+e.audience);if(null===e.rta||void 0===e.rta)throw new s.ArgumentError("Must provide a valid rta");if("string"!=typeof e.rta||0===e.rta.length)throw new s.ArgumentError("The provided rta is invalid: "+e.rta);if(null===e.domain||void 0===e.domain)throw new s.ArgumentError("Must provide a valid domain");if("string"!=typeof e.domain||0===e.domain.length)throw new s.ArgumentError("The provided domain is invalid: "+e.domain);if(null===e.baseUrl||void 0===e.baseUrl)throw new s.ArgumentError("Must provide a valid base URL");if("string"!=typeof e.baseUrl||0===e.baseUrl.length)throw new s.ArgumentError("The provided base URL is invalid: "+e.baseUrl);if(null===e.clientName||void 0===e.clientName)throw new s.ArgumentError("Must provide a valid client name");if("string"!=typeof e.clientName||0===e.clientName.length)throw new s.ArgumentError("The provided client name is invalid: "+e.clientName);const t=e.stateKey||"state",r=e.nonceKey||"nonce",c=e.urlPrefix||"",l=e.sessionStorageKey||"apiToken",f=n.Router();return f.get(c+"/login",function(n,o){const a=i.randomBytes(16).toString("hex"),l=i.randomBytes(16).toString("hex");o.cookie(t,a),o.cookie(r,l);const f=new s.SessionManager(e.rta,e.domain,e.baseUrl),d=f.createAuthorizeUrl({redirectUri:u.getBaseUrl(n)+c+"/login/callback",scopes:e.scopes,expiration:e.expiration,nonce:l,state:a});o.redirect(d)}),f.post(c+"/login/callback",o(),function(n,i,o){var c;try{c=a.decode(n.body.id_token)}catch(e){c=null}return c&&n.cookies&&n.cookies[r]===c.nonce?n.cookies&&n.cookies[t]===n.body.state?new s.SessionManager(e.rta,e.domain,e.baseUrl).create(n.body.id_token,n.body.access_token,{secret:e.secret,issuer:e.baseUrl,audience:e.audience}).then(function(e){i.header("Content-Type","text/html"),i.status(200).send('<html><head><script type="text/javascript">sessionStorage.setItem("'+l+'", "'+e+'");window.location.href = "'+u.getBaseUrl(n)+'";<\/script></head></html>')}).catch(function(e){o(e)}):o(new s.ValidationError("Login failed. State mismatch.")):o(new s.ValidationError("Login failed. Nonce mismatch."))}),f.get(c+"/logout",function(t,r){const n=encodeURIComponent(u.getBaseUrl(t));r.header("Content-Type","text/html"),r.status(200).send('<html><head><script type="text/javascript">sessionStorage.removeItem("'+l+'");window.location.href = "https://'+e.rta+"/v2/logout/?returnTo="+n+"&client_id="+n+'";<\/script></head></html>')}),f.get("/.well-known/oauth2-client-configuration",function(t,r){r.header("Content-Type","application/json"),r.status(200).send({redirect_uris:[u.getBaseUrl(t)+c+"/login/callback"],client_name:e.clientName,post_logout_redirect_uris:[u.getBaseUrl(t)]})}),f}},function(e,t,r){e.exports.dashboardAdmins=r(76)},function(e,t,r){const n=r(1),i=r(156);e.exports.createServer=function(e){const t=n.createServer(e);var r=null;return i.fromExpress(function(e,n){return r||(r=t(e.webtaskContext)),r(e,n)})}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r(85),o=n(i),a=r(86),s=n(a),u=r(53),c=r(140),l=r(149),f=r(141),d=r(3),h=r(17);e.exports=function(e){return function(t,r,n){var i=t.webtaskContext&&t.webtaskContext.body||t.body||{},a=t.webtaskContext&&t.webtaskContext.headers||{};if(!(i.schedule&&"active"===i.state||a.referer===d("AUTH0_MANAGE_URL")+"/"&&a["if-none-match"]))return n();var p=Date.now(),g={hostname:d("RABBITMQ_URI_HOSTNAME"),protocol:d("RABBITMQ_URI_PROTOCOL"),port:d("RABBITMQ_URI_PORT"),username:d("RABBITMQ_URI_USER"),password:d("RABBITMQ_URI_PASSWORD"),locale:d("RABBITMQ_URI_LOCALE"),frameMax:d("RABBITMQ_URI_FRAMEMAX"),heartbeat:d("RABBITMQ_URI_HEARTBEAT"),vhost:d("RABBITMQ_URI_VHOST")},v=d("RABBITMQ_EXCHANGE_NAME"),m=d("RABBITMQ_ROUTINGKEY"),w=d("RABBITMQ_EXCHANGE_TYPE"),y=d("RABBITMQ_EXCHANGE_DURABILITY"),b=u.connect(g),E=function(e,t){if(!e)return t();var r={post_date:p,type_description:f.logTypes.get(e.type)};(0,s.default)(e).forEach(function(t){r[t]=e[t]}),r.message=(0,o.default)(e);var n=b.createChannel().then(function(){n.assertExchange(v,w,{durable:y})}).then(function(){n.publish(v,m,Buffer.from(message))}).then(function(){n.close()}).then(function(){t()})},I=function(e,t){if(!e||!e.length)return t();h.info("Sending "+e.length+" logs to RabbitMQ."),c.eachLimit(e,10,E,t)},x={domain:d("AUTH0_DOMAIN"),clientId:d("AUTH0_CLIENT_ID"),clientSecret:d("AUTH0_CLIENT_SECRET"),batchSize:parseInt(d("BATCH_SIZE"),10),startFrom:d("START_FROM"),logTypes:d("LOG_TYPES"),logLevel:d("LOG_LEVEL")};(!x.batchSize||x.batchSize>100)&&(x.batchSize=100),x.logTypes&&!Array.isArray(x.logTypes)&&(x.logTypes=x.logTypes.replace(/\s/g,"").split(","));var k=new f.LogsProcessor(e,x),B=function(t){var r=new Date,n=r.getTime(),i=n-864e5;k.getReport(i,n).then(function(){return e.read()}).then(function(r){return r.lastReportDate=t,e.write(r)})},U=function(){e.read().then(function(e){var t=l().format("DD-MM-YYYY"),r=d("DAILY_REPORT_TIME")||16;e.lastReportDate!==t&&(new Date).getHours()>=r&&B(t)})};return k.run(I).then(function(e){U(),r.json(e)}).catch(function(e){U(),n(e)}).then(function(){b.close()})}}},function(e,t,r){"use strict";var n=r(16).Router,i=r(6).middlewares,o=r(3),a=r(17);e.exports=function(){var e=n(),t=i.validateHookToken(o("AUTH0_DOMAIN"),o("WT_URL"),o("EXTENSION_SECRET"));return e.use("/on-uninstall",t("/.extensions/on-uninstall")),e.use(i.managementApiClient({domain:o("AUTH0_DOMAIN"),clientId:o("AUTH0_CLIENT_ID"),clientSecret:o("AUTH0_CLIENT_SECRET")})),e.delete("/on-uninstall",function(e,t){var r=o("AUTH0_CLIENT_ID");e.auth0.clients.delete({client_id:r}).then(function(){a.debug("Deleted client "+r),t.sendStatus(204)}).catch(function(e){a.debug("Error deleting client: "+o("AUTH0_CLIENT_ID")),a.error(e),t.sendStatus(204)})}),e}},function(e,t,r){"use strict";(function(t){var n=(r(146),r(145)),i=(r(50),r(6).urlHelpers),o=r(3);e.exports=function(){var e='\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n    <title><%= config.TITLE %></title>\n    <meta charset="UTF-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <link rel="shortcut icon" href="https://cdn.auth0.com/styleguide/4.6.13/lib/logos/img/favicon.png">\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styles/zocial.min.css" />\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/manage/v0.3.1672/css/index.min.css" />\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styleguide/4.6.13/index.min.css" />\n    <% if (assets.style) { %><link rel="stylesheet" type="text/css" href="/app/<%= assets.style %>" /><% } %>\n    <% if (assets.useCdn) { %><link rel="stylesheet" type="text/css" href="//cdn.auth0.com/extensions/auth0-logs-to-provider/assets/auth0-logs-to-provider.ui.css" /><% } %>\n    <% if (assets.customCss) { %><link rel="stylesheet" type="text/css" href="<%= assets.customCss %>" /><% } %>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="text/javascript" src="//cdn.auth0.com/w2/auth0-7.0.4.min.js"><\/script>\n    <script type="text/javascript" src="//cdn.auth0.com/manage/v0.3.1672/js/bundle.js"><\/script>\n    <script type="text/javascript">window.config = <%- JSON.stringify(config) %>;<\/script>\n    <% if (assets.vendors) { %><script type="text/javascript" src="/app/<%= assets.vendors %>"><\/script><% } %>\n    <% if (assets.app) { %><script type="text/javascript" src="<%= assets.app %>"><\/script><% } %>\n    <% if (assets.useCdn) { %>\n    <script type="text/javascript" src="//cdn.auth0.com/extensions/auth0-logs-to-provider/assets/auth0-logs-to-provider.ui.vendors.js"><\/script>\n    <script type="text/javascript" src="//cdn.auth0.com/extensions/auth0-logs-to-provider/assets/auth0-logs-to-provider.ui.js"><\/script>\n    <% } %>\n  </body>\n  </html>\n  ';return function(t,r,a){if(0===t.url.indexOf("/api"))return a();var s={AUTH0_DOMAIN:o("AUTH0_DOMAIN"),AUTH0_CLIENT_ID:o("EXTENSION_CLIENT_ID"),AUTH0_MANAGE_URL:o("AUTH0_MANAGE_URL")||"https://manage.auth0.com",BASE_URL:i.getBaseUrl(t),BASE_PATH:i.getBasePath(t),TITLE:o("TITLE")};return r.send(n.render(e,{config:s,assets:{customCss:o("CUSTOM_CSS"),version:"2.1.1"}}))}}}).call(t,"/")},function(e,t,r){"use strict";var n=r(147),i=r(16).Router,o=r(6).middlewares,a=r(3),s=r(81);e.exports=function(e){var t=i(),r=o.authenticateAdmins({credentialsRequired:!0,secret:a("EXTENSION_SECRET"),audience:"urn:logs-to-rabbitmq",baseUrl:a("PUBLIC_WT_URL")||a("WT_URL"),onLoginSuccess:function(e,t,r){return r()}});return t.get("/",s()),t.get("/api/report",r,function(t,r,i){return e.read().then(function(e){var i=e&&e.logs?n.sortByOrder(e.logs,"start","desc"):[],o=t.query.filter&&"errors"===t.query.filter?n.filter(i,function(e){return!!e.error}):i,a=t.query.page&&parseInt(t.query.page)?parseInt(t.query.page)-1:0,s=t.query.per_page&&parseInt(t.query.per_page)||10,u=s*a;return r.json({logs:o.slice(u,u+s),total:o.length})}).catch(i)}),t}},function(e,t,r){"use strict";var n=r(16),i=r(121);e.exports=function(){var e=n.Router();return e.get("/",function(e,t){t.status(200).send(i)}),e}},function(e,t,r){"use strict";var n=r(6),i=r(52),o=r(3),a=r(17),s=n.createServer(function(e,t){return a.info("Starting Auth0 Logs to RabbitMQ Extension - Version:","2.1.1"),i(e,t)});e.exports=function(e,t,r){o.setValue("PUBLIC_WT_URL",n.urlHelpers.getWebtaskUrl(t)),s(e,t,r)}},function(e,t,r){e.exports={default:r(92),__esModule:!0}},function(e,t,r){e.exports={default:r(93),__esModule:!0}},function(e,t,r){"use strict";e.exports.parse=r(22).parse,e.exports.match=r(35).match,e.exports.build=r(21).build,e.exports.write=r(21).write,e.exports.matcher=e.exports.compile=r(34).compile,e.exports.builder=r(34).compile_builder},function(e,t){e.exports=function(){function e(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var t={parse:function(t,r){function n(e){b<I||(b>I&&(I=b,x=[]),x.push(e))}function i(){var e,t,r,n,i,s;if(i=b,s=b,null!==(e=w()))if(null!==(t=a())){for(r=[],n=o();null!==n;)r.push(n),n=o();null!==r?e=[e,t,r]:(e=null,b=s)}else e=null,b=s;else e=null,b=s;return null!==e&&(e=function(e,t,r){return r.unshift(t),r}(0,e[1],e[2])),null===e&&(b=i),e}function o(){var e,r,i,o,s,u;return s=b,u=b,e=w(),null!==e?(44===t.charCodeAt(b)?(r=",",b++):(r=null,0===E&&n('","')),null!==r?(i=w(),null!==i?(o=a(),null!==o?e=[e,r,i,o]:(e=null,b=u)):(e=null,b=u)):(e=null,b=u)):(e=null,b=u),null!==e&&(e=function(e,t){return t}(0,e[3])),null===e&&(b=s),e}function a(){var e,t,r,n,i;return n=b,e=s(),null!==e&&(e=function(e,t){return{string:t}}(0,e)),null===e&&(b=n),null===e&&(n=b,i=b,e=f(),null!==e?(t=h(),t=null!==t?t:"",null!==t?(r=p(),r=null!==r?r:"",null!==r?e=[e,t,r]:(e=null,b=i)):(e=null,b=i)):(e=null,b=i),null!==e&&(e=function(e,t,r,n){return{name:t,size:r,specifiers:n}}(0,e[0],e[1],e[2])),null===e&&(b=n),null===e&&(n=b,i=b,e=d(),null!==e?(t=h(),t=null!==t?t:"",null!==t?(r=p(),r=null!==r?r:"",null!==r?e=[e,t,r]:(e=null,b=i)):(e=null,b=i)):(e=null,b=i),null!==e&&(e=function(e,t,r,n){return{value:t,size:r,specifiers:n}}(0,e[0],e[1],e[2])),null===e&&(b=n))),e}function s(){var e,r,i,o,a;return o=b,a=b,34===t.charCodeAt(b)?(e='"',b++):(e=null,0===E&&n('"\\""')),null!==e?(34===t.charCodeAt(b)?(r='"',b++):(r=null,0===E&&n('"\\""')),null!==r?e=[e,r]:(e=null,b=a)):(e=null,b=a),null!==e&&(e=""),null===e&&(b=o),null===e&&(o=b,a=b,34===t.charCodeAt(b)?(e='"',b++):(e=null,0===E&&n('"\\""')),null!==e?(r=u(),null!==r?(34===t.charCodeAt(b)?(i='"',b++):(i=null,0===E&&n('"\\""')),null!==i?e=[e,r,i]:(e=null,b=a)):(e=null,b=a)):(e=null,b=a),null!==e&&(e=function(e,t){return t}(0,e[1])),null===e&&(b=o)),e}function u(){var e,t,r;if(r=b,null!==(t=c()))for(e=[];null!==t;)e.push(t),t=c();else e=null;return null!==e&&(e=function(e,t){return t.join("")}(0,e)),null===e&&(b=r),e}function c(){var e,r,i,o,a,s,u;return/^[^"\\\0-\x1F]/.test(t.charAt(b))?(e=t.charAt(b),b++):(e=null,0===E&&n('[^"\\\\\\0-\\x1F]')),null===e&&(s=b,'\\"'===t.substr(b,2)?(e='\\"',b+=2):(e=null,0===E&&n('"\\\\\\""')),null!==e&&(e='"'),null===e&&(b=s),null===e&&(s=b,"\\\\"===t.substr(b,2)?(e="\\\\",b+=2):(e=null,0===E&&n('"\\\\\\\\"')),null!==e&&(e="\\"),null===e&&(b=s),null===e&&(s=b,"\\/"===t.substr(b,2)?(e="\\/",b+=2):(e=null,0===E&&n('"\\\\/"')),null!==e&&(e="/"),null===e&&(b=s),null===e&&(s=b,"\\b"===t.substr(b,2)?(e="\\b",b+=2):(e=null,0===E&&n('"\\\\b"')),null!==e&&(e="\b"),null===e&&(b=s),null===e&&(s=b,"\\f"===t.substr(b,2)?(e="\\f",b+=2):(e=null,0===E&&n('"\\\\f"')),null!==e&&(e="\f"),null===e&&(b=s),null===e&&(s=b,"\\n"===t.substr(b,2)?(e="\\n",b+=2):(e=null,0===E&&n('"\\\\n"')),null!==e&&(e="\n"),null===e&&(b=s),null===e&&(s=b,"\\r"===t.substr(b,2)?(e="\\r",b+=2):(e=null,0===E&&n('"\\\\r"')),null!==e&&(e="\r"),null===e&&(b=s),null===e&&(s=b,"\\t"===t.substr(b,2)?(e="\\t",b+=2):(e=null,0===E&&n('"\\\\t"')),null!==e&&(e="\t"),null===e&&(b=s),null===e&&(s=b,u=b,"\\u"===t.substr(b,2)?(e="\\u",b+=2):(e=null,0===E&&n('"\\\\u"')),null!==e?(r=l(),null!==r?(i=l(),null!==i?(o=l(),null!==o?(a=l(),null!==a?e=[e,r,i,o,a]:(e=null,b=u)):(e=null,b=u)):(e=null,b=u)):(e=null,b=u)):(e=null,b=u),null!==e&&(e=function(e,t,r,n,i){return String.fromCharCode(parseInt("0x"+t+r+n+i))}(0,e[1],e[2],e[3],e[4])),null===e&&(b=s)))))))))),e}function l(){var e;return/^[0-9a-fA-F]/.test(t.charAt(b))?(e=t.charAt(b),b++):(e=null,0===E&&n("[0-9a-fA-F]")),e}function f(){var e,r,i,o,a;if(o=b,a=b,/^[_a-zA-Z]/.test(t.charAt(b))?(e=t.charAt(b),b++):(e=null,0===E&&n("[_a-zA-Z]")),null!==e){for(r=[],/^[_a-zA-Z0-9]/.test(t.charAt(b))?(i=t.charAt(b),b++):(i=null,0===E&&n("[_a-zA-Z0-9]"));null!==i;)r.push(i),/^[_a-zA-Z0-9]/.test(t.charAt(b))?(i=t.charAt(b),b++):(i=null,0===E&&n("[_a-zA-Z0-9]"));null!==r?e=[e,r]:(e=null,b=a)}else e=null,b=a;return null!==e&&(e=function(e,t,r){return t+r.join("")}(0,e[0],e[1])),null===e&&(b=o),e}function d(){var e,r,i,o,a;if(o=b,48===t.charCodeAt(b)?(e="0",b++):(e=null,0===E&&n('"0"')),null!==e&&(e=0),null===e&&(b=o),null===e){if(o=b,a=b,/^[1-9]/.test(t.charAt(b))?(e=t.charAt(b),b++):(e=null,0===E&&n("[1-9]")),null!==e){for(r=[],/^[0-9]/.test(t.charAt(b))?(i=t.charAt(b),b++):(i=null,0===E&&n("[0-9]"));null!==i;)r.push(i),/^[0-9]/.test(t.charAt(b))?(i=t.charAt(b),b++):(i=null,0===E&&n("[0-9]"));null!==r?e=[e,r]:(e=null,b=a)}else e=null,b=a;null!==e&&(e=function(e,t,r){return parseInt(t+r.join(""))}(0,e[0],e[1])),null===e&&(b=o)}return e}function h(){var e,r,i,o;return i=b,o=b,58===t.charCodeAt(b)?(e=":",b++):(e=null,0===E&&n('":"')),null!==e?(r=d(),null!==r?e=[e,r]:(e=null,b=o)):(e=null,b=o),null!==e&&(e=function(e,t){return t}(0,e[1])),null===e&&(b=i),null===e&&(i=b,o=b,58===t.charCodeAt(b)?(e=":",b++):(e=null,0===E&&n('":"')),null!==e?(r=f(),null!==r?e=[e,r]:(e=null,b=o)):(e=null,b=o),null!==e&&(e=function(e,t){return t}(0,e[1])),null===e&&(b=i)),e}function p(){var e,r,i,o,a,s;if(a=b,s=b,47===t.charCodeAt(b)?(e="/",b++):(e=null,0===E&&n('"/"')),null!==e)if(null!==(r=v())){for(i=[],o=g();null!==o;)i.push(o),o=g();null!==i?e=[e,r,i]:(e=null,b=s)}else e=null,b=s;else e=null,b=s;return null!==e&&(e=function(e,t,r){return r.unshift(t),r}(0,e[1],e[2])),null===e&&(b=a),e}function g(){var e,r,i,o;return i=b,o=b,45===t.charCodeAt(b)?(e="-",b++):(e=null,0===E&&n('"-"')),null!==e?(r=v(),null!==r?e=[e,r]:(e=null,b=o)):(e=null,b=o),null!==e&&(e=function(e,t){return t}(0,e[1])),null===e&&(b=i),e}function v(){var e;return"little"===t.substr(b,6)?(e="little",b+=6):(e=null,0===E&&n('"little"')),null===e&&("big"===t.substr(b,3)?(e="big",b+=3):(e=null,0===E&&n('"big"')),null===e&&("signed"===t.substr(b,6)?(e="signed",b+=6):(e=null,0===E&&n('"signed"')),null===e&&("unsigned"===t.substr(b,8)?(e="unsigned",b+=8):(e=null,0===E&&n('"unsigned"')),null===e&&("integer"===t.substr(b,7)?(e="integer",b+=7):(e=null,0===E&&n('"integer"')),null===e&&("binary"===t.substr(b,6)?(e="binary",b+=6):(e=null,0===E&&n('"binary"')),null===e&&("float"===t.substr(b,5)?(e="float",b+=5):(e=null,0===E&&n('"float"')),null===e&&(e=m()))))))),e}function m(){var e,r,i,o;return i=b,o=b,"unit:"===t.substr(b,5)?(e="unit:",b+=5):(e=null,0===E&&n('"unit:"')),null!==e?(r=d(),null!==r?e=[e,r]:(e=null,b=o)):(e=null,b=o),null!==e&&(e=function(e,t){return"unit:"+t}(0,e[1])),null===e&&(b=i),e}function w(){var e,r;for(e=[],/^[ \t\n]/.test(t.charAt(b))?(r=t.charAt(b),b++):(r=null,0===E&&n("[ \\t\\n]"));null!==r;)e.push(r),/^[ \t\n]/.test(t.charAt(b))?(r=t.charAt(b),b++):(r=null,0===E&&n("[ \\t\\n]"));return e}var y={start:i,segmentTail:o,segment:a,string:s,chars:u,char:c,hexDigit:l,identifier:f,number:d,size:h,specifierList:p,specifierTail:g,specifier:v,unit:m,ws:w};if(void 0!==r){if(void 0===y[r])throw new Error("Invalid rule name: "+e(r)+".")}else r="start";var b=0,E=0,I=0,x=[],k=y[r]();if(null===k||b!==t.length){var B=Math.max(b,I),U=B<t.length?t.charAt(B):null,T=function(){for(var e=1,r=1,n=!1,i=0;i<Math.max(b,I);i++){var o=t.charAt(i);"\n"===o?(n||e++,r=1,n=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(e++,r=1,n=!0):(r++,n=!1)}return{line:e,column:r}}();throw new this.SyntaxError(function(e){e.sort();for(var t=null,r=[],n=0;n<e.length;n++)e[n]!==t&&(r.push(e[n]),t=e[n]);return r}(x),U,B,T.line,T.column)}return k},toSource:function(){return this._source}};return t.SyntaxError=function(t,r,n,i,o){this.name="SyntaxError",this.expected=t,this.found=r,this.message=function(t,r){var n,i;switch(t.length){case 0:n="end of input";break;case 1:n=t[0];break;default:n=t.slice(0,t.length-1).join(", ")+" or "+t[t.length-1]}return i=r?e(r):"end of input","Expected "+n+" but "+i+" found."}(t,r),this.offset=n,this.line=i,this.column=o},t.SyntaxError.prototype=Error.prototype,t}()},function(e,t,r){"use strict";function n(e){var t={};for(var r in e)t[e[r]]=1;return t}function i(e,t,r){var i=n(r),o={name:e};return o.type=s(i),u(o,o.type,i),o.size=d(o,o.type,t,o.unit),o}function o(e,t,r){var i=n(r),o={value:e};return o.type=s(i),u(o,o.type,i),o.size=d(o,o.type,t,o.unit),o}function a(e){return{value:e,type:"string"}}function s(e){for(var t in e)if(h[t])return t;return"integer"}function u(e,t,r){switch(t){case"integer":e.signed=l(r);case"float":e.bigendian=c(r);default:e.unit=f(r,e.type)}return e}function c(e){return!e.little}function l(e){return e.signed}function f(e,t){for(var r in e)if("unit:"==r.substr(0,5)){var n=parseInt(r.substr(5));return n}switch(t){case"binary":return 8;case"integer":case"float":return 1}}function d(e,t,r,n){if(void 0!==r&&""!==r)return r;switch(t){case"integer":return 8;case"float":return 64;case"binary":return!0}}e.exports.variable=i,e.exports.rest=function(){return i("_",!0,["binary"])},e.exports.value=o,e.exports.string=a;var h={integer:1,binary:1,float:1}},function(e,t,r){"use strict";function n(e,t){var r=!e||Array.isArray(e)?e||[]:[e];return function(e,n,i){if(e.cookies)return i();var a=e.headers.cookie;if(e.secret=r[0],e.cookies=Object.create(null),e.signedCookies=Object.create(null),!a)return i();e.cookies=u.parse(a,t),0!==r.length&&(e.signedCookies=s(e.cookies,r),e.signedCookies=o(e.signedCookies)),e.cookies=o(e.cookies),i()}}function i(e){if("string"==typeof e&&"j:"===e.substr(0,2))try{return JSON.parse(e.slice(2))}catch(e){return}}function o(e){for(var t,r,n=Object.keys(e),o=0;o<n.length;o++)t=n[o],(r=i(e[t]))&&(e[t]=r);return e}function a(e,t){if("string"==typeof e){if("s:"!==e.substr(0,2))return e;for(var r=!t||Array.isArray(t)?t||[]:[t],n=0;n<r.length;n++){var i=c.unsign(e.slice(2),r[n]);if(!1!==i)return i}return!1}}function s(e,t){for(var r,n,i,o=Object.keys(e),s=Object.create(null),u=0;u<o.length;u++)n=o[u],i=e[n],r=a(i,t),i!==r&&(s[n]=r,delete e[n]);return s}var u=r(91),c=r(143);e.exports=n,e.exports.JSONCookie=i,e.exports.JSONCookies=o,e.exports.signedCookie=a,e.exports.signedCookies=s},function(e,t,r){"use strict";function n(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},n=t||{},i=e.split(u),s=n.decode||a,c=0;c<i.length;c++){var l=i[c],f=l.indexOf("=");if(!(f<0)){var d=l.substr(0,f).trim(),h=l.substr(++f,l.length).trim();'"'==h[0]&&(h=h.slice(1,-1)),void 0==r[d]&&(r[d]=o(h,s))}}return r}function i(e,t,r){var n=r||{},i=n.encode||s;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!c.test(e))throw new TypeError("argument name is invalid");var o=i(t);if(o&&!c.test(o))throw new TypeError("argument val is invalid");var a=e+"="+o;if(null!=n.maxAge){var u=n.maxAge-0;if(isNaN(u))throw new Error("maxAge should be a Number");a+="; Max-Age="+Math.floor(u)}if(n.domain){if(!c.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!c.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return a}function o(e,t){try{return t(e)}catch(t){return e}}t.parse=n,t.serialize=i;var a=decodeURIComponent,s=encodeURIComponent,u=/; */,c=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},function(e,t,r){var n=r(10),i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,r){r(118),e.exports=r(10).Object.keys},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){var n=r(26);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){var n=r(39),i=r(114),o=r(113);e.exports=function(e){return function(t,r,a){var s,u=n(t),c=i(u.length),l=o(a,c);if(e&&r!=r){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var n=r(94);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){var n=r(26),i=r(25).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(25),i=r(10),o=r(98),a=r(102),s=r(37),u=function(e,t,r){var c,l,f,d=e&u.F,h=e&u.G,p=e&u.S,g=e&u.P,v=e&u.B,m=e&u.W,w=h?i:i[t]||(i[t]={}),y=w.prototype,b=h?n:p?n[t]:(n[t]||{}).prototype;h&&(r=t);for(c in r)(l=!d&&b&&void 0!==b[c])&&s(w,c)||(f=l?b[c]:r[c],w[c]=h&&"function"!=typeof b[c]?r[c]:v&&l?o(f,n):m&&b[c]==f?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):g&&"function"==typeof f?o(Function.call,f):f,g&&((w.virtual||(w.virtual={}))[c]=f,e&u.R&&y&&!y[c]&&a(y,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,r){var n=r(106),i=r(110);e.exports=r(23)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){e.exports=!r(23)&&!r(24)(function(){return 7!=Object.defineProperty(r(99)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(97);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){e.exports=!0},function(e,t,r){var n=r(95),i=r(103),o=r(116),a=Object.defineProperty;t.f=r(23)?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(37),i=r(39),o=r(96)(!1),a=r(111)("IE_PROTO");e.exports=function(e,t){var r,s=i(e),u=0,c=[];for(r in s)r!=a&&n(s,r)&&c.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~o(c,r)||c.push(r));return c}},function(e,t,r){var n=r(107),i=r(100);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(101),i=r(10),o=r(24);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",a)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(112)("keys"),i=r(117);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,r){var n=r(10),i=r(25),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(105)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,r){var n=r(38),i=Math.max,o=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):o(e,t)}},function(e,t,r){var n=r(38),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,r){var n=r(36);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(26);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(115),i=r(108);r(109)("keys",function(){return function(e){return i(n(e))}})},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t){e.exports={_from:"amqplib",_id:"amqplib@0.5.3",_inBundle:!1,_integrity:"sha512-ZOdUhMxcF+u62rPI+hMtU1NBXSDFQ3eCJJrenamtdQ7YYwh7RZJHOIM1gonVbZ5PyVdYH4xqBPje9OYqk7fnqw==",_location:"/amqplib",_phantomChildren:{"core-util-is":"1.0.2",inherits:"2.0.3"},_requested:{type:"tag",registry:!0,raw:"amqplib",name:"amqplib",escapedName:"amqplib",rawSpec:"",saveSpec:null,fetchSpec:"latest"},_requiredBy:["#USER","/"],_resolved:"https://registry.npmjs.org/amqplib/-/amqplib-0.5.3.tgz",_shasum:"7ccfc85d12ee7cd3c6dc861bb07f0648ec3d7193",_spec:"amqplib",_where:"C:\\code\\auth0-logs-to-rabbitmq",author:{name:"Michael Bridgen",email:"mikeb@squaremobius.net"},bugs:{url:"https://github.com/squaremo/amqp.node/issues"},bundleDependencies:!1,dependencies:{bitsyntax:"~0.1.0",bluebird:"^3.5.2","buffer-more-ints":"~1.0.0","readable-stream":"1.x >=1.1.9","safe-buffer":"~5.1.2","url-parse":"~1.4.3"},deprecated:!1,description:"An AMQP 0-9-1 (e.g., RabbitMQ) library and client.",devDependencies:{claire:"0.4.1",istanbul:"0.1.x",mocha:"^3.5.3","uglify-js":"2.6.x"},engines:{node:">=0.8 <=9"},homepage:"http://squaremo.github.io/amqp.node/",keywords:["AMQP","AMQP 0-9-1","RabbitMQ"],license:"MIT",main:"./channel_api.js",name:"amqplib",repository:{type:"git",url:"git+https://github.com/squaremo/amqp.node.git"},scripts:{prepublish:"make",test:"make test"},version:"0.5.3",warnings:[{code:"ENOTSUP",required:{node:">=0.8 <=9"},pkgid:"amqplib@0.5.3"},{code:"ENOTSUP",required:{node:">=0.8 <=9"},pkgid:"amqplib@0.5.3"}]}},function(e,t){e.exports={title:"Auth0 Logs to RabbitMQ",name:"auth0-logs-to-rabbitmq",version:"2.1.1",preVersion:"2.1.0",author:"auth0,slummock",category:"log_export",description:"This extension will continuously export your Auth0 logs to RabbitMQ",type:"cron",initialUrlPath:"/login",repository:"https://github.com/dannypnice/auth0-logs-to-rabbitmq",docsUrl:"https://github.com/dannypnice/auth0-logs-to-rabbitmq",logoUrl:"https://raw.githubusercontent.com/dannypnice/auth0-logs-to-rabbitmq/master/image/logo.png",keywords:["auth0","extension","rabbitmq"],schedule:"0 */5 * * * *",auth0:{createClient:!0,onUninstallPath:"/.extensions/on-uninstall",scopes:"read:logs delete:clients"},secrets:{BATCH_SIZE:{description:"The amount of logs to batch before sending to RabbitMQ. A single cron execution will send multiple batches.",default:100},RABBITMQ_URI_HOSTNAME:{description:"RabbitMQ instance hostname",example:"localhost",required:!0},RABBITMQ_URI_PROTOCOL:{description:"RabbitMQ protocol",example:"amqp",required:!0},RABBITMQ_URI_PORT:{description:"RabbitMQ Port",required:!0},RABBITMQ_URI_USER:{description:"RabbitMQ User",required:!0},RABBITMQ_URI_PASSWORD:{description:"RabbitMQ Password",type:"password"},RABBITMQ_URI_LOCALE:{description:"RabbitMQ locale"},RABBITMQ_URI_FRAMEMAX:{description:"RabbitMQ frameMax"},RABBITMQ_URI_HEARTBEAT:{description:"RabbitMQ heartbeat"},RABBITMQ_URI_VHOST:{description:"RabbitMQ vhost"},RABBITMQ_EXCHANGE_NAME:{description:"RabbitMQ exchange"},RABBITMQ_ROUTINGKEY:{description:"RabbitMQ routing key"},RABBITMQ_EXCHANGE_TYPE:{description:"RabbitMQ Exchange Type"},RABBITMQ_EXCHANGE_DURABILITY:{description:"RabbitMQ Exchange Durability"},START_FROM:{description:"Checkpoint ID of log to start from."},LOG_LEVEL:{description:"This allows you to specify the log level of events that need to be sent",type:"select",allowMultiple:!0,options:[{value:"-",text:""},{value:"0",text:"Debug"},{value:"1",text:"Info"},{value:"2",text:"Warning"},{value:"3",text:"Error"},{value:"4",text:"Critical"}]},LOG_TYPES:{description:"If you only want to send events with a specific type (eg: failed logins)",type:"select",allowMultiple:!0,options:[{text:"",value:"-"},{text:"Success Login",value:"s"},{text:"Success Exchange",value:"seacft"},{text:"Success Exchange (Client Credentials)",value:"seccft"},{text:"Failed Exchange",value:"feacft"},{text:"Failed Exchange (Client Credentials)",value:"feccft"},{text:"Failed Login",value:"f"},{text:"Warnings During Login",value:"w"},{text:"Deleted User",value:"du"},{text:"Failed Login (invalid email/username)",value:"fu"},{text:"Failed Login (wrong password)",value:"fp"},{text:"Failed by Connector",value:"fc"},{text:"Failed by CORS",value:"fco"},{text:"Connector Online",value:"con"},{text:"Connector Offline",value:"coff"},{text:"Failed Connector Provisioning",value:"fcpro"},{text:"Success Signup",value:"ss"},{text:"Failed Signup",value:"fs"},{text:"Code Sent",value:"cs"},{text:"Code/Link Sent",value:"cls"},{text:"Success Verification Email",value:"sv"},{text:"Failed Verification Email",value:"fv"},{text:"Success Change Password",value:"scp"},{text:"Failed Change Password",value:"fcp"},{text:"Success Change Email",value:"sce"},{text:"Failed Change Email",value:"fce"},{text:"Success Change Username",value:"scu"},{text:"Failed Change Username",value:"fcu"},{text:"Success Change Phone Number",value:"scpn"},{text:"Failed Change Phone Number",value:"fcpn"},{text:"Success Verification Email Request",value:"svr"},{text:"Failed Verification Email Request",value:"fvr"},{text:"Success Change Password Request",value:"scpr"},{text:"Failed Change Password Request",value:"fcpr"},{text:"Failed Sending Notification",value:"fn"},{text:"API Operation",value:"sapi"},{text:"Failed API Operation",value:"fapi"},{text:"Blocked Account",value:"limit_wc"},{text:"Too Many Calls to /userinfo",value:"limit_ui"},{text:"Rate Limit On API",value:"api_limit"},{text:"Successful User Deletion",value:"sdu"},{text:"Failed User Deletion",value:"fdu"},{text:"Blocked Account",value:"limit_wc"},{text:"Blocked IP Address",value:"limit_mu"},{text:"Success Logout",value:"slo"},{text:"Failed Logout",value:"flo"},{text:"Success Delegation",value:"sd"},{text:"Failed Delegation",value:"fd"}]}}}},function(e,t,r){"use strict";var n=r(13),i=r(14),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),a=r(124),s=r(123),u=r(125),c=r(126);e.exports=function(e){return new n.JwksClient(e)},e.exports.ArgumentError=o.ArgumentError,e.exports.JwksError=o.JwksError,e.exports.JwksRateLimitError=o.JwksRateLimitError,e.exports.SigningKeyNotFoundError=o.SigningKeyNotFoundError,e.exports.expressJwtSecret=s.expressJwtSecret,e.exports.hapiJwt2Key=a.hapiJwt2Key,e.exports.hapiJwt2KeyAsync=a.hapiJwt2KeyAsync,e.exports.koaJwtSecret=u.koaJwtSecret,e.exports.passportJwtSecret=c.passportJwtSecret},function(e,t,r){"use strict";var n=r(14),i=r(13),o=function(e,t){return e&&"SigningKeyNotFoundError"===e.name?t(null):e?t(e):void 0};e.exports.expressJwtSecret=function(e){if(null===e||void 0===e)throw new n.ArgumentError("An options object must be provided when initializing expressJwtSecret");var t=new i.JwksClient(e),r=e.handleSigningKeyError||o;return function(e,n,i,o){if(!n||"RS256"!==n.alg)return o(null,null);t.getSigningKey(n.kid,function(e,t){return e?r(e,function(e){return o(e,null)}):o(null,t.publicKey||t.rsaPublicKey)})}}},function(e,t,r){"use strict";var n=r(14),i=r(13),o=function(e,t){return e&&"SigningKeyNotFoundError"===e.name?t(null,null,null):e?t(e,null,null):void 0};e.exports.hapiJwt2KeyAsync=function(t){var r=e.exports.hapiJwt2Key(t);return function(e){return new Promise(function(t,n){r(e,function(e,r){!r||e?n(e):t({key:r})})})}},e.exports.hapiJwt2Key=function(e){if(null===e||void 0===e)throw new n.ArgumentError("An options object must be provided when initializing hapiJwt2Key");var t=new i.JwksClient(e),r=e.handleSigningKeyError||o;return function(e,n){return e&&e.header?"RS256"!==e.header.alg?n(null,null,null):void t.getSigningKey(e.header.kid,function(e,t){return e?r(e,function(e){return n(e,null,null)}):n(null,t.publicKey||t.rsaPublicKey,t)}):n(null,null,null)}}},function(e,t,r){"use strict";var n=r(14),i=r(13);e.exports.koaJwtSecret=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.jwksUri)throw new n.ArgumentError("No JWKS URI provided");var t=new i.JwksClient(e);return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.alg,i=r.kid;return new Promise(function(r,o){if("RS256"!==n)return o(new Error("Missing / invalid token algorithm"));t.getSigningKey(i,function(t,n){if(t)return e.handleSigningKeyError?e.handleSigningKeyError(t).then(o):o(t);r(n.publicKey||n.rsaPublicKey)})})}}},function(e,t,r){"use strict";var n=r(49),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(14),a=r(13),s=function(e,t){return e&&"SigningKeyNotFoundError"===e.name?t(null):e?t(e):void 0};e.exports.passportJwtSecret=function(e){if(null===e||void 0===e)throw new o.ArgumentError("An options object must be provided when initializing passportJwtSecret");var t=new a.JwksClient(e),r=e.handleSigningKeyError||s;return function(e,n,o){var a=i.default.decode(n,{complete:!0});if(!a||!a.header||"RS256"!==a.header.alg)return o(null,null);t.getSigningKey(a.header.kid,function(e,t){return e?r(e,function(e){return o(e,null)}):o(null,t.publicKey||t.rsaPublicKey)})}}},function(e,t,r){"use strict";function n(e){return e=e.match(/.{1,64}/g).join("\n"),e="-----BEGIN CERTIFICATE-----\n"+e+"\n-----END CERTIFICATE-----\n"}function i(e){var t=e[0];return t<"0"||t>"7"?"00"+e:e}function o(e){var t=e.toString(16);return t.length%2?"0"+t:t}function a(e){if(e<=127)return o(e);var t=o(e);return o(128+t.length/2)+t}function s(e,t){var r=new Buffer(e,"base64"),n=new Buffer(t,"base64"),o=i(r.toString("hex")),s=i(n.toString("hex")),u=o.length/2,c=s.length/2,l=a(u),f=a(c),d="30"+a(u+c+l.length/2+f.length/2+2)+"02"+l+o+"02"+f+s,h=new Buffer(d,"hex").toString("base64"),p="-----BEGIN RSA PUBLIC KEY-----\n";return p+=""+h.match(/.{1,64}/g).join("\n"),p+="\n-----END RSA PUBLIC KEY-----\n"}Object.defineProperty(t,"__esModule",{value:!0}),t.certToPEM=n,t.rsaPublicKeyToPEM=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:options,r=t.cacheMaxEntries,n=void 0===r?5:r,i=t.cacheMaxAge,a=void 0===i?(0,o.default)("10h"):i,u=(0,s.default)("jwks"),l=e.getSigningKey;return u("Configured caching of singing keys. Max: "+n+" / Age: "+a),(0,c.default)({load:function(e,t){l(e,function(r,n){return r?t(r):(u("Caching signing key for '"+e+"':",n),t(null,n))})},hash:function(e){return e},maxAge:a,max:n})};var i=r(151),o=n(i),a=r(19),s=n(a),u=r(148),c=n(u)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.rateLimitSigningKey=t.cacheSigningKey=void 0;var i=r(128),o=n(i),a=r(130),s=n(a);t.cacheSigningKey=o.default,t.rateLimitSigningKey=s.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:options,r=t.jwksRequestsPerMinute,n=void 0===r?10:r,i=(0,o.default)("jwks"),s=e.getSigningKey,c=new a.RateLimiter(n,"minute",!0);return i("Configured rate limiting to JWKS endpoint at "+n+"/minute"),function(e,t){c.removeTokens(1,function(r,n){return r?t(r):(i("Requests to the JWKS endpoint available for the next minute:",n),n<0?(i("Too many requests to the JWKS endpoint"),t(new u.default("Too many requests to the JWKS endpoint"))):s(e,t))})}};var i=r(19),o=n(i),a=r(133),s=r(42),u=n(s)},function(e,t){function r(e){this.message=e}function n(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,o,a=0,s=0,u="";o=t.charAt(s++);~o&&(n=a%4?64*n+o:o,a++%4)?u+=String.fromCharCode(255&n>>(-2*a&6)):0)o=i.indexOf(o);return u}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||n},function(e,t,r){function n(e){return decodeURIComponent(i(e).replace(/(.)/g,function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}var i=r(131);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return n(t)}catch(e){return i(t)}}},function(e,t,r){t.RateLimiter=r(135),t.TokenBucket=r(45)},function(e,t){var r=function(){if("undefined"!=typeof process&&process.hrtime){var e=process.hrtime(),t=e[0],r=e[1];return 1e3*t+Math.floor(r/1e6)}return(new Date).getTime()};e.exports=r},function(e,t,r){var n=r(45),i=r(134),o=function(e,t,r){this.tokenBucket=new n(e,e,t,null),this.tokenBucket.content=e,this.curIntervalStart=i(),this.tokensThisInterval=0,this.fireImmediately=r};o.prototype={tokenBucket:null,curIntervalStart:0,tokensThisInterval:0,fireImmediately:!1,removeTokens:function(e,t){function r(r,i){if(r)return t(r,null);n.tokensThisInterval+=e,t(null,i)}if(e>this.tokenBucket.bucketSize)return process.nextTick(t.bind(null,"Requested tokens "+e+" exceeds maximum tokens per interval "+this.tokenBucket.bucketSize,null)),!1;var n=this,o=i();if((o<this.curIntervalStart||o-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=o,this.tokensThisInterval=0),e>this.tokenBucket.tokensPerInterval-this.tokensThisInterval){if(this.fireImmediately)process.nextTick(t.bind(null,null,-1));else{var a=Math.ceil(this.curIntervalStart+this.tokenBucket.interval-o);setTimeout(function(){n.tokenBucket.removeTokens(e,r)},a)}return!1}return this.tokenBucket.removeTokens(e,r)},tryRemoveTokens:function(e){if(e>this.tokenBucket.bucketSize)return!1;var t=i();if((t<this.curIntervalStart||t-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=t,this.tokensThisInterval=0),e>this.tokenBucket.tokensPerInterval-this.tokensThisInterval)return!1;var r=this.tokenBucket.tryRemoveTokens(e);return r&&(this.tokensThisInterval+=e),r},getTokensRemaining:function(){return this.tokenBucket.drip(),this.tokenBucket.content}},e.exports=o},function(e,t,r){function n(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function i(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}var o=r(158);e.exports=o(n),e.exports.strict=o(i),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})})},function(e,t,r){"use strict";function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function i(e){for(var t,r=/([^=?&]+)=?([^&]*)/g,i={};t=r.exec(e);){var o=n(t[1]),a=n(t[2]);null===o||null===a||o in i||(i[o]=a)}return i}function o(e,t){t=t||"";var r,n,i=[];"string"!=typeof t&&(t="?");for(n in e)if(s.call(e,n)){if(r=e[n],r||null!==r&&r!==a&&!isNaN(r)||(r=""),n=encodeURIComponent(n),r=encodeURIComponent(r),null===n||null===r)continue;i.push(n+"="+r)}return i.length?t+i.join("&"):""}var a,s=Object.prototype.hasOwnProperty;t.stringify=o,t.parse=i},function(e,t,r){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,r){"use strict";function n(e){return(e||"").toString().replace(p,"")}function i(e){var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var r=t.location||{};e=e||r;var n,i={},o=typeof e;if("blob:"===e.protocol)i=new s(unescape(e.pathname),{});else if("string"===o){i=new s(e,{});for(n in v)delete i[n]}else if("object"===o){for(n in e)n in v||(i[n]=e[n]);void 0===i.slashes&&(i.slashes=d.test(e.href))}return i}function o(e){e=n(e);var t=h.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function a(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,i=r[n-1],o=!1,a=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),a++):a&&(0===n&&(o=!0),r.splice(n,1),a--);return o&&r.unshift(""),"."!==i&&".."!==i||r.push(""),r.join("/")}function s(e,t,r){if(e=n(e),!(this instanceof s))return new s(e,t,r);var u,c,d,h,p,v,m=g.slice(),w=typeof t,y=this,b=0;for("object"!==w&&"string"!==w&&(r=t,t=null),r&&"function"!=typeof r&&(r=f.parse),t=i(t),c=o(e||""),u=!c.protocol&&!c.slashes,y.slashes=c.slashes||u&&t.slashes,y.protocol=c.protocol||t.protocol||"",e=c.rest,c.slashes||(m[3]=[/(.*)/,"pathname"]);b<m.length;b++)h=m[b],"function"!=typeof h?(d=h[0],v=h[1],d!==d?y[v]=e:"string"==typeof d?~(p=e.indexOf(d))&&("number"==typeof h[2]?(y[v]=e.slice(0,p),e=e.slice(p+h[2])):(y[v]=e.slice(p),e=e.slice(0,p))):(p=d.exec(e))&&(y[v]=p[1],e=e.slice(0,p.index)),y[v]=y[v]||(u&&h[3]?t[v]||"":""),h[4]&&(y[v]=y[v].toLowerCase())):e=h(e);r&&(y.query=r(y.query)),u&&t.slashes&&"/"!==y.pathname.charAt(0)&&(""!==y.pathname||""!==t.pathname)&&(y.pathname=a(y.pathname,t.pathname)),l(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(h=y.auth.split(":"),y.username=h[0]||"",y.password=h[1]||""),y.origin=y.protocol&&y.host&&"file:"!==y.protocol?y.protocol+"//"+y.host:"null",y.href=y.toString()}function u(e,t,r){var n=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||f.parse)(t)),n[e]=t;break;case"port":n[e]=t,l(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[e]=t,/:\d+$/.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!r;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";n[e]=t.charAt(0)!==i?i+t:t}else n[e]=t;break;default:n[e]=t}for(var o=0;o<g.length;o++){var a=g[o];a[4]&&(n[a[1]]=n[a[1]].toLowerCase())}return n.origin=n.protocol&&n.host&&"file:"!==n.protocol?n.protocol+"//"+n.host:"null",n.href=n.toString(),n}function c(e){e&&"function"==typeof e||(e=f.stringify);var t,r=this,n=r.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var i=n+(r.slashes?"//":"");return r.username&&(i+=r.username,r.password&&(i+=":"+r.password),i+="@"),i+=r.host+r.pathname,t="object"==typeof r.query?e(r.query):r.query,t&&(i+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(i+=r.hash),i}var l=r(138),f=r(137),d=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,h=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,p=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+"),g=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],v={hash:1,query:1};s.prototype={set:u,toString:c},s.extractProtocol=o,s.location=i,s.trimLeft=n,s.qs=f,e.exports=s},function(e,t){e.exports=require("async@2.1.2")},function(e,t){e.exports=require("auth0-log-extension-tools@1.3.6")},function(e,t){e.exports=require("body-parser@1.12.4")},function(e,t){e.exports=require("cookie-signature@1.0.6")},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("ejs@2.3.1")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("lodash@3.10.1")},function(e,t){e.exports=require("lru-memoizer@1.10.0")},function(e,t){e.exports=require("moment@2.10.3")},function(e,t){e.exports=require("morgan@1.5.3")},function(e,t){e.exports=require("ms@0.7.1")},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("querystring")},function(e,t){e.exports=require("request@2.56.0")},function(e,t){e.exports=require("tls")},function(e,t){e.exports=require("webtask-tools")},function(e,t){e.exports=require("winston@1.0.0")},function(e,t){e.exports=require("wrappy@1.0.1")}]);